function Ne(){return Ne=Object.assign?Object.assign.bind():function(r){for(var e=1;e<arguments.length;e++){var t=arguments[e];for(var i in t)({}).hasOwnProperty.call(t,i)&&(r[i]=t[i])}return r},Ne.apply(null,arguments)}var Ei={relTol:1e-12,absTol:1e-15,matrix:"Matrix",number:"number",numberFallback:"number",precision:64,predictable:!1,randomSeed:null};function Fi(r,e){if(ot(r,e))return r[e];throw typeof r[e]=="function"&&nu(r,e)?new Error('Cannot access method "'+e+'" as a property'):new Error('No access to property "'+e+'"')}function Ci(r,e,t){if(ot(r,e))return r[e]=t,t;throw new Error('No access to property "'+e+'"')}function ot(r,e){return!iu(r)&&!Array.isArray(r)?!1:Ze(au,e)?!0:!(e in Object.prototype||e in Function.prototype)}function nu(r,e){return r==null||typeof r[e]!="function"||Ze(r,e)&&Object.getPrototypeOf&&e in Object.getPrototypeOf(r)?!1:Ze(uu,e)?!0:!(e in Object.prototype||e in Function.prototype)}function iu(r){return typeof r=="object"&&r&&r.constructor===Object}var au={length:!0,name:!0},uu={toString:!0,valueOf:!0,toLocaleString:!0};class ou{constructor(e){this.wrappedObject=e,this[Symbol.iterator]=this.entries}keys(){return Object.keys(this.wrappedObject).filter(e=>this.has(e)).values()}get(e){return Fi(this.wrappedObject,e)}set(e,t){return Ci(this.wrappedObject,e,t),this}has(e){return ot(this.wrappedObject,e)&&e in this.wrappedObject}entries(){return su(this.keys(),e=>[e,this.get(e)])}forEach(e){for(var t of this.keys())e(this.get(t),t,this)}delete(e){ot(this.wrappedObject,e)&&delete this.wrappedObject[e]}clear(){for(var e of this.keys())this.delete(e)}get size(){return Object.keys(this.wrappedObject).length}}function su(r,e){return{next:()=>{var t=r.next();return t.done?t:{value:e(t.value),done:!1}}}}function Nr(r){return typeof r=="number"}function Ir(r){return!r||typeof r!="object"||typeof r.constructor!="function"?!1:r.isBigNumber===!0&&typeof r.constructor.prototype=="object"&&r.constructor.prototype.isBigNumber===!0||typeof r.constructor.isDecimal=="function"&&r.constructor.isDecimal(r)===!0}function fu(r){return typeof r=="bigint"}function Qt(r){return r&&typeof r=="object"&&Object.getPrototypeOf(r).isComplex===!0||!1}function Xt(r){return r&&typeof r=="object"&&Object.getPrototypeOf(r).isFraction===!0||!1}function bi(r){return r&&r.constructor.prototype.isUnit===!0||!1}function re(r){return typeof r=="string"}var _r=Array.isArray;function Sr(r){return r&&r.constructor.prototype.isMatrix===!0||!1}function st(r){return Array.isArray(r)||Sr(r)}function _i(r){return r&&r.isDenseMatrix&&r.constructor.prototype.isMatrix===!0||!1}function Mi(r){return r&&r.isSparseMatrix&&r.constructor.prototype.isMatrix===!0||!1}function Si(r){return r&&r.constructor.prototype.isRange===!0||!1}function Et(r){return r&&r.constructor.prototype.isIndex===!0||!1}function cu(r){return typeof r=="boolean"}function lu(r){return r&&r.constructor.prototype.isResultSet===!0||!1}function vu(r){return r&&r.constructor.prototype.isHelp===!0||!1}function hu(r){return typeof r=="function"}function pu(r){return r instanceof Date}function du(r){return r instanceof RegExp}function Kt(r){return!!(r&&typeof r=="object"&&r.constructor===Object&&!Qt(r)&&!Xt(r))}function mu(r){return r?r instanceof Map||r instanceof ou||typeof r.set=="function"&&typeof r.get=="function"&&typeof r.keys=="function"&&typeof r.has=="function":!1}function Du(r){return r===null}function gu(r){return r===void 0}function yu(r){return r&&r.isAccessorNode===!0&&r.constructor.prototype.isNode===!0||!1}function wu(r){return r&&r.isArrayNode===!0&&r.constructor.prototype.isNode===!0||!1}function Au(r){return r&&r.isAssignmentNode===!0&&r.constructor.prototype.isNode===!0||!1}function Eu(r){return r&&r.isBlockNode===!0&&r.constructor.prototype.isNode===!0||!1}function Fu(r){return r&&r.isConditionalNode===!0&&r.constructor.prototype.isNode===!0||!1}function Cu(r){return r&&r.isConstantNode===!0&&r.constructor.prototype.isNode===!0||!1}function bu(r){return r&&r.isFunctionAssignmentNode===!0&&r.constructor.prototype.isNode===!0||!1}function _u(r){return r&&r.isFunctionNode===!0&&r.constructor.prototype.isNode===!0||!1}function Mu(r){return r&&r.isIndexNode===!0&&r.constructor.prototype.isNode===!0||!1}function Su(r){return r&&r.isNode===!0&&r.constructor.prototype.isNode===!0||!1}function Bu(r){return r&&r.isObjectNode===!0&&r.constructor.prototype.isNode===!0||!1}function Nu(r){return r&&r.isOperatorNode===!0&&r.constructor.prototype.isNode===!0||!1}function xu(r){return r&&r.isParenthesisNode===!0&&r.constructor.prototype.isNode===!0||!1}function Tu(r){return r&&r.isRangeNode===!0&&r.constructor.prototype.isNode===!0||!1}function zu(r){return r&&r.isRelationalNode===!0&&r.constructor.prototype.isNode===!0||!1}function Ou(r){return r&&r.isSymbolNode===!0&&r.constructor.prototype.isNode===!0||!1}function Iu(r){return r&&r.constructor.prototype.isChain===!0||!1}function ae(r){var e=typeof r;return e==="object"?r===null?"null":Ir(r)?"BigNumber":r.constructor&&r.constructor.name?r.constructor.name:"Object":e}function Er(r){var e=typeof r;if(e==="number"||e==="bigint"||e==="string"||e==="boolean"||r===null||r===void 0)return r;if(typeof r.clone=="function")return r.clone();if(Array.isArray(r))return r.map(function(t){return Er(t)});if(r instanceof Date)return new Date(r.valueOf());if(Ir(r))return r;if(Kt(r))return $u(r,Er);throw new TypeError("Cannot clone: unknown type of value (value: ".concat(r,")"))}function $u(r,e){var t={};for(var i in r)Ze(r,i)&&(t[i]=e(r[i]));return t}function qu(r,e){for(var t in e)Ze(e,t)&&(r[t]=e[t]);return r}function De(r,e){var t,i,n;if(Array.isArray(r)){if(!Array.isArray(e)||r.length!==e.length)return!1;for(i=0,n=r.length;i<n;i++)if(!De(r[i],e[i]))return!1;return!0}else{if(typeof r=="function")return r===e;if(r instanceof Object){if(Array.isArray(e)||!(e instanceof Object))return!1;for(t in r)if(!(t in e)||!De(r[t],e[t]))return!1;for(t in e)if(!(t in r))return!1;return!0}else return r===e}}function Ze(r,e){return r&&Object.hasOwnProperty.call(r,e)}function Pu(r,e){for(var t={},i=0;i<e.length;i++){var n=e[i],u=r[n];u!==void 0&&(t[n]=u)}return t}var Ru=["Matrix","Array"],Uu=["number","BigNumber","Fraction"],Qr=function(e){if(e)throw new Error(`The global config is readonly. 
Please create a mathjs instance if you want to change the default configuration. 
Example:

  import { create, all } from 'mathjs';
  const mathjs = create(all);
  mathjs.config({ number: 'BigNumber' });
`);return Object.freeze(Ei)};Ne(Qr,Ei,{MATRIX_OPTIONS:Ru,NUMBER_OPTIONS:Uu});function vn(){return!0}function jr(){return!1}function _e(){}const hn="Argument is not a typed-function.";function Bi(){function r(S){return typeof S=="object"&&S!==null&&S.constructor===Object}const e=[{name:"number",test:function(S){return typeof S=="number"}},{name:"string",test:function(S){return typeof S=="string"}},{name:"boolean",test:function(S){return typeof S=="boolean"}},{name:"Function",test:function(S){return typeof S=="function"}},{name:"Array",test:Array.isArray},{name:"Date",test:function(S){return S instanceof Date}},{name:"RegExp",test:function(S){return S instanceof RegExp}},{name:"Object",test:r},{name:"null",test:function(S){return S===null}},{name:"undefined",test:function(S){return S===void 0}}],t={name:"any",test:vn,isAny:!0};let i,n,u=0,s={createCount:0};function v(S){const x=i.get(S);if(x)return x;let $='Unknown type "'+S+'"';const P=S.toLowerCase();let Q;for(Q of n)if(Q.toLowerCase()===P){$+='. Did you mean "'+Q+'" ?';break}throw new TypeError($)}function l(S){let x=arguments.length>1&&arguments[1]!==void 0?arguments[1]:"any";const $=x?v(x).index:n.length,P=[];for(let J=0;J<S.length;++J){if(!S[J]||typeof S[J].name!="string"||typeof S[J].test!="function")throw new TypeError("Object with properties {name: string, test: function} expected");const ar=S[J].name;if(i.has(ar))throw new TypeError('Duplicate type name "'+ar+'"');P.push(ar),i.set(ar,{name:ar,test:S[J].test,isAny:S[J].isAny,index:$+J,conversionsTo:[]})}const Q=n.slice($);n=n.slice(0,$).concat(P).concat(Q);for(let J=$+P.length;J<n.length;++J)i.get(n[J]).index=J}function c(){i=new Map,n=[],u=0,l([t],!1)}c(),l(e);function o(){let S;for(S of n)i.get(S).conversionsTo=[];u=0}function a(S){const x=n.filter($=>{const P=i.get($);return!P.isAny&&P.test(S)});return x.length?x:["any"]}function f(S){return S&&typeof S=="function"&&"_typedFunctionData"in S}function h(S,x,$){if(!f(S))throw new TypeError(hn);const P=$&&$.exact,Q=Array.isArray(x)?x.join(","):x,J=C(Q),ar=g(J);if(!P||ar in S.signatures){const br=S._typedFunctionData.signatureMap.get(ar);if(br)return br}const tr=J.length;let ir;if(P){ir=[];let br;for(br in S.signatures)ir.push(S._typedFunctionData.signatureMap.get(br))}else ir=S._typedFunctionData.signatures;for(let br=0;br<tr;++br){const zr=J[br],qr=[];let Xr;for(Xr of ir){const Gr=F(Xr.params,br);if(!(!Gr||zr.restParam&&!Gr.restParam)){if(!Gr.hasAny){const te=y(Gr);if(zr.types.some(ne=>!te.has(ne.name)))continue}qr.push(Xr)}}if(ir=qr,ir.length===0)break}let er;for(er of ir)if(er.params.length<=tr)return er;throw new TypeError("Signature not found (signature: "+(S.name||"unnamed")+"("+g(J,", ")+"))")}function d(S,x,$){return h(S,x,$).implementation}function p(S,x){const $=v(x);if($.test(S))return S;const P=$.conversionsTo;if(P.length===0)throw new Error("There are no conversions to "+x+" defined.");for(let Q=0;Q<P.length;Q++)if(v(P[Q].from).test(S))return P[Q].convert(S);throw new Error("Cannot convert "+S+" to "+x)}function g(S){let x=arguments.length>1&&arguments[1]!==void 0?arguments[1]:",";return S.map($=>$.name).join(x)}function D(S){const x=S.indexOf("...")===0,P=(x?S.length>3?S.slice(3):"any":S).split("|").map(tr=>v(tr.trim()));let Q=!1,J=x?"...":"";return{types:P.map(function(tr){return Q=tr.isAny||Q,J+=tr.name+"|",{name:tr.name,typeIndex:tr.index,test:tr.test,isAny:tr.isAny,conversion:null,conversionIndex:-1}}),name:J.slice(0,-1),hasAny:Q,hasConversion:!1,restParam:x}}function E(S){const x=S.types.map(ar=>ar.name),$=Y(x);let P=S.hasAny,Q=S.name;const J=$.map(function(ar){const tr=v(ar.from);return P=tr.isAny||P,Q+="|"+ar.from,{name:ar.from,typeIndex:tr.index,test:tr.test,isAny:tr.isAny,conversion:ar,conversionIndex:ar.index}});return{types:S.types.concat(J),name:Q,hasAny:P,hasConversion:J.length>0,restParam:S.restParam}}function y(S){return S.typeSet||(S.typeSet=new Set,S.types.forEach(x=>S.typeSet.add(x.name))),S.typeSet}function C(S){const x=[];if(typeof S!="string")throw new TypeError("Signatures must be strings");const $=S.trim();if($==="")return x;const P=$.split(",");for(let Q=0;Q<P.length;++Q){const J=D(P[Q].trim());if(J.restParam&&Q!==P.length-1)throw new SyntaxError('Unexpected rest parameter "'+P[Q]+'": only allowed for the last parameter');if(J.types.length===0)return null;x.push(J)}return x}function A(S){const x=K(S);return x?x.restParam:!1}function m(S){if(!S||S.types.length===0)return vn;if(S.types.length===1)return v(S.types[0].name).test;if(S.types.length===2){const x=v(S.types[0].name).test,$=v(S.types[1].name).test;return function(Q){return x(Q)||$(Q)}}else{const x=S.types.map(function($){return v($.name).test});return function(P){for(let Q=0;Q<x.length;Q++)if(x[Q](P))return!0;return!1}}}function b(S){let x,$,P;if(A(S)){x=X(S).map(m);const Q=x.length,J=m(K(S)),ar=function(tr){for(let ir=Q;ir<tr.length;ir++)if(!J(tr[ir]))return!1;return!0};return function(ir){for(let er=0;er<x.length;er++)if(!x[er](ir[er]))return!1;return ar(ir)&&ir.length>=Q+1}}else return S.length===0?function(J){return J.length===0}:S.length===1?($=m(S[0]),function(J){return $(J[0])&&J.length===1}):S.length===2?($=m(S[0]),P=m(S[1]),function(J){return $(J[0])&&P(J[1])&&J.length===2}):(x=S.map(m),function(J){for(let ar=0;ar<x.length;ar++)if(!x[ar](J[ar]))return!1;return J.length===x.length})}function F(S,x){return x<S.length?S[x]:A(S)?K(S):null}function w(S,x){const $=F(S,x);return $?y($):new Set}function _(S){return S.conversion===null||S.conversion===void 0}function M(S,x){const $=new Set;return S.forEach(P=>{const Q=w(P.params,x);let J;for(J of Q)$.add(J)}),$.has("any")?["any"]:Array.from($)}function B(S,x,$){let P,Q;const J=S||"unnamed";let ar=$,tr;for(tr=0;tr<x.length;tr++){const zr=[];if(ar.forEach(qr=>{const Xr=F(qr.params,tr),Gr=m(Xr);(tr<qr.params.length||A(qr.params))&&Gr(x[tr])&&zr.push(qr)}),zr.length===0){if(Q=M(ar,tr),Q.length>0){const qr=a(x[tr]);return P=new TypeError("Unexpected type of argument in function "+J+" (expected: "+Q.join(" or ")+", actual: "+qr.join(" | ")+", index: "+tr+")"),P.data={category:"wrongType",fn:J,index:tr,actual:qr,expected:Q},P}}else ar=zr}const ir=ar.map(function(zr){return A(zr.params)?1/0:zr.params.length});if(x.length<Math.min.apply(null,ir))return Q=M(ar,tr),P=new TypeError("Too few arguments in function "+J+" (expected: "+Q.join(" or ")+", index: "+x.length+")"),P.data={category:"tooFewArgs",fn:J,index:x.length,expected:Q},P;const er=Math.max.apply(null,ir);if(x.length>er)return P=new TypeError("Too many arguments in function "+J+" (expected: "+er+", actual: "+x.length+")"),P.data={category:"tooManyArgs",fn:J,index:x.length,expectedLength:er},P;const br=[];for(let zr=0;zr<x.length;++zr)br.push(a(x[zr]).join("|"));return P=new TypeError('Arguments of type "'+br.join(", ")+'" do not match any of the defined signatures of function '+J+"."),P.data={category:"mismatch",actual:br},P}function O(S){let x=n.length+1;for(let $=0;$<S.types.length;$++)_(S.types[$])&&(x=Math.min(x,S.types[$].typeIndex));return x}function z(S){let x=u+1;for(let $=0;$<S.types.length;$++)_(S.types[$])||(x=Math.min(x,S.types[$].conversionIndex));return x}function I(S,x){if(S.hasAny){if(!x.hasAny)return 1}else if(x.hasAny)return-1;if(S.restParam){if(!x.restParam)return 1}else if(x.restParam)return-1;if(S.hasConversion){if(!x.hasConversion)return 1}else if(x.hasConversion)return-1;const $=O(S)-O(x);if($<0)return-1;if($>0)return 1;const P=z(S)-z(x);return P<0?-1:P>0?1:0}function N(S,x){const $=S.params,P=x.params,Q=K($),J=K(P),ar=A($),tr=A(P);if(ar&&Q.hasAny){if(!tr||!J.hasAny)return 1}else if(tr&&J.hasAny)return-1;let ir=0,er=0,br;for(br of $)br.hasAny&&++ir,br.hasConversion&&++er;let zr=0,qr=0;for(br of P)br.hasAny&&++zr,br.hasConversion&&++qr;if(ir!==zr)return ir-zr;if(ar&&Q.hasConversion){if(!tr||!J.hasConversion)return 1}else if(tr&&J.hasConversion)return-1;if(er!==qr)return er-qr;if(ar){if(!tr)return 1}else if(tr)return-1;const Xr=($.length-P.length)*(ar?-1:1);if(Xr!==0)return Xr;const Gr=[];let te=0;for(let be=0;be<$.length;++be){const ke=I($[be],P[be]);Gr.push(ke),te+=ke}if(te!==0)return te;let ne;for(ne of Gr)if(ne!==0)return ne;return 0}function Y(S){if(S.length===0)return[];const x=S.map(v);S.length>1&&x.sort((Q,J)=>Q.index-J.index);let $=x[0].conversionsTo;if(S.length===1)return $;$=$.concat([]);const P=new Set(S);for(let Q=1;Q<x.length;++Q){let J;for(J of x[Q].conversionsTo)P.has(J.from)||($.push(J),P.add(J.from))}return $}function q(S,x){let $=x;if(S.some(Q=>Q.hasConversion)){const Q=A(S),J=S.map(T);$=function(){const tr=[],ir=Q?arguments.length-1:arguments.length;for(let er=0;er<ir;er++)tr[er]=J[er](arguments[er]);return Q&&(tr[ir]=arguments[ir].map(J[ir])),x.apply(this,tr)}}let P=$;if(A(S)){const Q=S.length-1;P=function(){return $.apply(this,G(arguments,0,Q).concat([G(arguments,Q)]))}}return P}function T(S){let x,$,P,Q;const J=[],ar=[];switch(S.types.forEach(function(tr){tr.conversion&&(J.push(v(tr.conversion.from).test),ar.push(tr.conversion.convert))}),ar.length){case 0:return function(ir){return ir};case 1:return x=J[0],P=ar[0],function(ir){return x(ir)?P(ir):ir};case 2:return x=J[0],$=J[1],P=ar[0],Q=ar[1],function(ir){return x(ir)?P(ir):$(ir)?Q(ir):ir};default:return function(ir){for(let er=0;er<ar.length;er++)if(J[er](ir))return ar[er](ir);return ir}}}function Z(S){function x($,P,Q){if(P<$.length){const J=$[P];let ar=[];if(J.restParam){const tr=J.types.filter(_);tr.length<J.types.length&&ar.push({types:tr,name:"..."+tr.map(ir=>ir.name).join("|"),hasAny:tr.some(ir=>ir.isAny),hasConversion:!1,restParam:!0}),ar.push(J)}else ar=J.types.map(function(tr){return{types:[tr],name:tr.name,hasAny:tr.isAny,hasConversion:tr.conversion,restParam:!1}});return j(ar,function(tr){return x($,P+1,Q.concat([tr]))})}else return[Q]}return x(S,0,[])}function W(S,x){const $=Math.max(S.length,x.length);for(let tr=0;tr<$;tr++){const ir=w(S,tr),er=w(x,tr);let br=!1,zr;for(zr of er)if(ir.has(zr)){br=!0;break}if(!br)return!1}const P=S.length,Q=x.length,J=A(S),ar=A(x);return J?ar?P===Q:Q>=P:ar?P>=Q:P===Q}function R(S){return S.map(x=>Dr(x)?pr(x.referToSelf.callback):mr(x)?cr(x.referTo.references,x.referTo.callback):x)}function U(S,x,$){const P=[];let Q;for(Q of S){let J=$[Q];if(typeof J!="number")throw new TypeError('No definition for referenced signature "'+Q+'"');if(J=x[J],typeof J!="function")return!1;P.push(J)}return P}function V(S,x,$){const P=R(S),Q=new Array(P.length).fill(!1);let J=!0;for(;J;){J=!1;let ar=!0;for(let tr=0;tr<P.length;++tr){if(Q[tr])continue;const ir=P[tr];if(Dr(ir))P[tr]=ir.referToSelf.callback($),P[tr].referToSelf=ir.referToSelf,Q[tr]=!0,ar=!1;else if(mr(ir)){const er=U(ir.referTo.references,P,x);er?(P[tr]=ir.referTo.callback.apply(this,er),P[tr].referTo=ir.referTo,Q[tr]=!0,ar=!1):J=!0}}if(ar&&J)throw new SyntaxError("Circular reference detected in resolving typed.referTo")}return P}function nr(S){const x=/\bthis(\(|\.signatures\b)/;Object.keys(S).forEach($=>{const P=S[$];if(x.test(P.toString()))throw new SyntaxError("Using `this` to self-reference a function is deprecated since typed-function@3. Use typed.referTo and typed.referToSelf instead.")})}function k(S,x){if(s.createCount++,Object.keys(x).length===0)throw new SyntaxError("No signatures provided");s.warnAgainstDeprecatedThis&&nr(x);const $=[],P=[],Q={},J=[];let ar;for(ar in x){if(!Object.prototype.hasOwnProperty.call(x,ar))continue;const Cr=C(ar);if(!Cr)continue;$.forEach(function(Ue){if(W(Ue,Cr))throw new TypeError('Conflicting signatures "'+g(Ue)+'" and "'+g(Cr)+'".')}),$.push(Cr);const Kr=P.length;P.push(x[ar]);const eu=Cr.map(E);let je;for(je of Z(eu)){const Ue=g(je);J.push({params:je,name:Ue,fn:Kr}),je.every(tu=>!tu.hasConversion)&&(Q[Ue]=Kr)}}J.sort(N);const tr=V(P,Q,Re);let ir;for(ir in Q)Object.prototype.hasOwnProperty.call(Q,ir)&&(Q[ir]=tr[Q[ir]]);const er=[],br=new Map;for(ir of J)br.has(ir.name)||(ir.fn=tr[ir.fn],er.push(ir),br.set(ir.name,ir));const zr=er[0]&&er[0].params.length<=2&&!A(er[0].params),qr=er[1]&&er[1].params.length<=2&&!A(er[1].params),Xr=er[2]&&er[2].params.length<=2&&!A(er[2].params),Gr=er[3]&&er[3].params.length<=2&&!A(er[3].params),te=er[4]&&er[4].params.length<=2&&!A(er[4].params),ne=er[5]&&er[5].params.length<=2&&!A(er[5].params),be=zr&&qr&&Xr&&Gr&&te&&ne;for(let Cr=0;Cr<er.length;++Cr)er[Cr].test=b(er[Cr].params);const ke=zr?m(er[0].params[0]):jr,Ma=qr?m(er[1].params[0]):jr,Sa=Xr?m(er[2].params[0]):jr,Ba=Gr?m(er[3].params[0]):jr,Na=te?m(er[4].params[0]):jr,xa=ne?m(er[5].params[0]):jr,Ta=zr?m(er[0].params[1]):jr,za=qr?m(er[1].params[1]):jr,Oa=Xr?m(er[2].params[1]):jr,Ia=Gr?m(er[3].params[1]):jr,$a=te?m(er[4].params[1]):jr,qa=ne?m(er[5].params[1]):jr;for(let Cr=0;Cr<er.length;++Cr)er[Cr].implementation=q(er[Cr].params,er[Cr].fn);const Pa=zr?er[0].implementation:_e,Ra=qr?er[1].implementation:_e,Ua=Xr?er[2].implementation:_e,La=Gr?er[3].implementation:_e,Za=te?er[4].implementation:_e,Va=ne?er[5].implementation:_e,Ya=zr?er[0].params.length:-1,Ja=qr?er[1].params.length:-1,Ga=Xr?er[2].params.length:-1,Qa=Gr?er[3].params.length:-1,Xa=te?er[4].params.length:-1,Ka=ne?er[5].params.length:-1,Wa=be?6:0,Ha=er.length,ka=er.map(Cr=>Cr.test),ja=er.map(Cr=>Cr.implementation),ru=function(){for(let Kr=Wa;Kr<Ha;Kr++)if(ka[Kr](arguments))return ja[Kr].apply(this,arguments);return s.onMismatch(S,arguments,er)};function Re(Cr,Kr){return arguments.length===Ya&&ke(Cr)&&Ta(Kr)?Pa.apply(this,arguments):arguments.length===Ja&&Ma(Cr)&&za(Kr)?Ra.apply(this,arguments):arguments.length===Ga&&Sa(Cr)&&Oa(Kr)?Ua.apply(this,arguments):arguments.length===Qa&&Ba(Cr)&&Ia(Kr)?La.apply(this,arguments):arguments.length===Xa&&Na(Cr)&&$a(Kr)?Za.apply(this,arguments):arguments.length===Ka&&xa(Cr)&&qa(Kr)?Va.apply(this,arguments):ru.apply(this,arguments)}try{Object.defineProperty(Re,"name",{value:S})}catch{}return Re.signatures=Q,Re._typedFunctionData={signatures:er,signatureMap:br},Re}function L(S,x,$){throw B(S,x,$)}function X(S){return G(S,0,S.length-1)}function K(S){return S[S.length-1]}function G(S,x,$){return Array.prototype.slice.call(S,x,$)}function ur(S,x){for(let $=0;$<S.length;$++)if(x(S[$]))return S[$]}function j(S,x){return Array.prototype.concat.apply([],S.map(x))}function or(){const S=X(arguments).map($=>g(C($))),x=K(arguments);if(typeof x!="function")throw new TypeError("Callback function expected as last argument");return cr(S,x)}function cr(S,x){return{referTo:{references:S,callback:x}}}function pr(S){if(typeof S!="function")throw new TypeError("Callback function expected as first argument");return{referToSelf:{callback:S}}}function mr(S){return S&&typeof S.referTo=="object"&&Array.isArray(S.referTo.references)&&typeof S.referTo.callback=="function"}function Dr(S){return S&&typeof S.referToSelf=="object"&&typeof S.referToSelf.callback=="function"}function lr(S,x){if(!S)return x;if(x&&x!==S){const $=new Error("Function names do not match (expected: "+S+", actual: "+x+")");throw $.data={actual:x,expected:S},$}return S}function Ar(S){let x;for(const $ in S)Object.prototype.hasOwnProperty.call(S,$)&&(f(S[$])||typeof S[$].signature=="string")&&(x=lr(x,S[$].name));return x}function yr(S,x){let $;for($ in x)if(Object.prototype.hasOwnProperty.call(x,$)){if($ in S&&x[$]!==S[$]){const P=new Error('Signature "'+$+'" is defined twice');throw P.data={signature:$,sourceFunction:x[$],destFunction:S[$]},P}S[$]=x[$]}}const Fr=s;s=function(S){const x=typeof S=="string",$=x?1:0;let P=x?S:"";const Q={};for(let J=$;J<arguments.length;++J){const ar=arguments[J];let tr={},ir;if(typeof ar=="function"?(ir=ar.name,typeof ar.signature=="string"?tr[ar.signature]=ar:f(ar)&&(tr=ar.signatures)):r(ar)&&(tr=ar,x||(ir=Ar(ar))),Object.keys(tr).length===0){const er=new TypeError("Argument to 'typed' at index "+J+" is not a (typed) function, nor an object with signatures as keys and functions as values.");throw er.data={index:J,argument:ar},er}x||(P=lr(P,ir)),yr(Q,tr)}return k(P||"",Q)},s.create=Bi,s.createCount=Fr.createCount,s.onMismatch=L,s.throwMismatchError=L,s.createError=B,s.clear=c,s.clearConversions=o,s.addTypes=l,s._findType=v,s.referTo=or,s.referToSelf=pr,s.convert=p,s.findSignature=h,s.find=d,s.isTypedFunction=f,s.warnAgainstDeprecatedThis=!0,s.addType=function(S,x){let $="any";x!==!1&&i.has("Object")&&($="Object"),s.addTypes([S],$)};function Pr(S){if(!S||typeof S.from!="string"||typeof S.to!="string"||typeof S.convert!="function")throw new TypeError("Object with properties {from: string, to: string, convert: function} expected");if(S.to===S.from)throw new SyntaxError('Illegal to define conversion from "'+S.from+'" to itself.')}return s.addConversion=function(S){let x=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{override:!1};Pr(S);const $=v(S.to),P=$.conversionsTo.find(Q=>Q.from===S.from);if(P)if(x&&x.override)s.removeConversion({from:P.from,to:S.to,convert:P.convert});else throw new Error('There is already a conversion from "'+S.from+'" to "'+$.name+'"');$.conversionsTo.push({from:S.from,convert:S.convert,index:u++})},s.addConversions=function(S,x){S.forEach($=>s.addConversion($,x))},s.removeConversion=function(S){Pr(S);const x=v(S.to),$=ur(x.conversionsTo,Q=>Q.from===S.from);if(!$)throw new Error("Attempt to remove nonexistent conversion from "+S.from+" to "+S.to);if($.convert!==S.convert)throw new Error("Conversion to remove does not match existing conversion");const P=x.conversionsTo.indexOf($);x.conversionsTo.splice(P,1)},s.resolve=function(S,x){if(!f(S))throw new TypeError(hn);const $=S._typedFunctionData.signatures;for(let P=0;P<$.length;++P)if($[P].test(x))return $[P];return null},s}const ft=Bi();function rr(r,e,t,i){function n(u){var s=Pu(u,e.map(Vu));return Lu(r,e,u),t(s)}return n.isFactory=!0,n.fn=r,n.dependencies=e.slice().sort(),i&&(n.meta=i),n}function Lu(r,e,t){var i=e.filter(u=>!Zu(u)).every(u=>t[u]!==void 0);if(!i){var n=e.filter(u=>t[u]===void 0);throw new Error('Cannot create function "'.concat(r,'", ')+"some dependencies are missing: ".concat(n.map(u=>'"'.concat(u,'"')).join(", "),"."))}}function Zu(r){return r&&r[0]==="?"}function Vu(r){return r&&r[0]==="?"?r.slice(1):r}function xr(r){return typeof r=="boolean"?!0:isFinite(r)?r===Math.round(r):!1}var Yu=Math.sign||function(r){return r>0?1:r<0?-1:0};function Ot(r,e,t){var i={2:"0b",8:"0o",16:"0x"},n=i[e],u="";if(t){if(t<1)throw new Error("size must be in greater than 0");if(!xr(t))throw new Error("size must be an integer");if(r>2**(t-1)-1||r<-(2**(t-1)))throw new Error("Value must be in range [-2^".concat(t-1,", 2^").concat(t-1,"-1]"));if(!xr(r))throw new Error("Value must be an integer");r<0&&(r=r+2**t),u="i".concat(t)}var s="";return r<0&&(r=-r,s="-"),"".concat(s).concat(n).concat(r.toString(e)).concat(u)}function $t(r,e){if(typeof e=="function")return e(r);if(r===1/0)return"Infinity";if(r===-1/0)return"-Infinity";if(isNaN(r))return"NaN";var{notation:t,precision:i,wordSize:n}=Ni(e);switch(t){case"fixed":return Gu(r,i);case"exponential":return xi(r,i);case"engineering":return Ju(r,i);case"bin":return Ot(r,2,n);case"oct":return Ot(r,8,n);case"hex":return Ot(r,16,n);case"auto":return Qu(r,i,e).replace(/((\.\d*?)(0+))($|e)/,function(){var u=arguments[2],s=arguments[4];return u!=="."?u+s:s});default:throw new Error('Unknown notation "'+t+'". Choose "auto", "exponential", "fixed", "bin", "oct", or "hex.')}}function Ni(r){var e="auto",t,i;if(r!==void 0)if(Nr(r))t=r;else if(Ir(r))t=r.toNumber();else if(Kt(r))r.precision!==void 0&&(t=pn(r.precision,()=>{throw new Error('Option "precision" must be a number or BigNumber')})),r.wordSize!==void 0&&(i=pn(r.wordSize,()=>{throw new Error('Option "wordSize" must be a number or BigNumber')})),r.notation&&(e=r.notation);else throw new Error("Unsupported type of options, number, BigNumber, or object expected");return{notation:e,precision:t,wordSize:i}}function Ft(r){var e=String(r).toLowerCase().match(/^(-?)(\d+\.?\d*)(e([+-]?\d+))?$/);if(!e)throw new SyntaxError("Invalid number "+r);var t=e[1],i=e[2],n=parseFloat(e[4]||"0"),u=i.indexOf(".");n+=u!==-1?u-1:i.length-1;var s=i.replace(".","").replace(/^0*/,function(v){return n-=v.length,""}).replace(/0*$/,"").split("").map(function(v){return parseInt(v)});return s.length===0&&(s.push(0),n++),{sign:t,coefficients:s,exponent:n}}function Ju(r,e){if(isNaN(r)||!isFinite(r))return String(r);var t=Ft(r),i=Ct(t,e),n=i.exponent,u=i.coefficients,s=n%3===0?n:n<0?n-3-n%3:n-n%3;if(Nr(e))for(;e>u.length||n-s+1>u.length;)u.push(0);else for(var v=Math.abs(n-s)-(u.length-1),l=0;l<v;l++)u.push(0);for(var c=Math.abs(n-s),o=1;c>0;)o++,c--;var a=u.slice(o).join(""),f=Nr(e)&&a.length||a.match(/[1-9]/)?"."+a:"",h=u.slice(0,o).join("")+f+"e"+(n>=0?"+":"")+s.toString();return i.sign+h}function Gu(r,e){if(isNaN(r)||!isFinite(r))return String(r);var t=Ft(r),i=typeof e=="number"?Ct(t,t.exponent+1+e):t,n=i.coefficients,u=i.exponent+1,s=u+(e||0);return n.length<s&&(n=n.concat(Be(s-n.length))),u<0&&(n=Be(-u+1).concat(n),u=1),u<n.length&&n.splice(u,0,u===0?"0.":"."),i.sign+n.join("")}function xi(r,e){if(isNaN(r)||!isFinite(r))return String(r);var t=Ft(r),i=e?Ct(t,e):t,n=i.coefficients,u=i.exponent;n.length<e&&(n=n.concat(Be(e-n.length)));var s=n.shift();return i.sign+s+(n.length>0?"."+n.join(""):"")+"e"+(u>=0?"+":"")+u}function Qu(r,e,t){if(isNaN(r)||!isFinite(r))return String(r);var i=dn(t==null?void 0:t.lowerExp,-3),n=dn(t==null?void 0:t.upperExp,5),u=Ft(r),s=e?Ct(u,e):u;if(s.exponent<i||s.exponent>=n)return xi(r,e);var v=s.coefficients,l=s.exponent;v.length<e&&(v=v.concat(Be(e-v.length))),v=v.concat(Be(l-v.length+1+(v.length<e?e-v.length:0))),v=Be(-l).concat(v);var c=l>0?l:0;return c<v.length-1&&v.splice(c+1,0,"."),s.sign+v.join("")}function Ct(r,e){for(var t={sign:r.sign,coefficients:r.coefficients,exponent:r.exponent},i=t.coefficients;e<=0;)i.unshift(0),t.exponent++,e++;if(i.length>e){var n=i.splice(e,i.length-e);if(n[0]>=5){var u=e-1;for(i[u]++;i[u]===10;)i.pop(),u===0&&(i.unshift(0),t.exponent++,u++),u--,i[u]++}}return t}function Be(r){for(var e=[],t=0;t<r;t++)e.push(0);return e}function Xu(r){return r.toExponential().replace(/e.*$/,"").replace(/^0\.?0*|\./,"").length}function le(r,e){var t=arguments.length>2&&arguments[2]!==void 0?arguments[2]:1e-8,i=arguments.length>3&&arguments[3]!==void 0?arguments[3]:0;if(t<=0)throw new Error("Relative tolerance must be greater than 0");if(i<0)throw new Error("Absolute tolerance must be at least 0");return isNaN(r)||isNaN(e)?!1:!isFinite(r)||!isFinite(e)?r===e:r===e?!0:Math.abs(r-e)<=Math.max(t*Math.max(Math.abs(r),Math.abs(e)),i)}function pn(r,e){if(Nr(r))return r;if(Ir(r))return r.toNumber();e()}function dn(r,e){return Nr(r)?r:Ir(r)?r.toNumber():e}var Ti=function(){return Ti=ft.create,ft},Ku=["?BigNumber","?Complex","?DenseMatrix","?Fraction"],Wu=rr("typed",Ku,function(e){var{BigNumber:t,Complex:i,DenseMatrix:n,Fraction:u}=e,s=Ti();return s.clear(),s.addTypes([{name:"number",test:Nr},{name:"Complex",test:Qt},{name:"BigNumber",test:Ir},{name:"bigint",test:fu},{name:"Fraction",test:Xt},{name:"Unit",test:bi},{name:"identifier",test:v=>re&&/^(?:[A-Za-z\xAA\xB5\xBA\xC0-\xD6\xD8-\xF6\xF8-\u02C1\u02C6-\u02D1\u02E0-\u02E4\u02EC\u02EE\u0370-\u0374\u0376\u0377\u037A-\u037D\u037F\u0386\u0388-\u038A\u038C\u038E-\u03A1\u03A3-\u03F5\u03F7-\u0481\u048A-\u052F\u0531-\u0556\u0559\u0560-\u0588\u05D0-\u05EA\u05EF-\u05F2\u0620-\u064A\u066E\u066F\u0671-\u06D3\u06D5\u06E5\u06E6\u06EE\u06EF\u06FA-\u06FC\u06FF\u0710\u0712-\u072F\u074D-\u07A5\u07B1\u07CA-\u07EA\u07F4\u07F5\u07FA\u0800-\u0815\u081A\u0824\u0828\u0840-\u0858\u0860-\u086A\u0870-\u0887\u0889-\u088E\u08A0-\u08C9\u0904-\u0939\u093D\u0950\u0958-\u0961\u0971-\u0980\u0985-\u098C\u098F\u0990\u0993-\u09A8\u09AA-\u09B0\u09B2\u09B6-\u09B9\u09BD\u09CE\u09DC\u09DD\u09DF-\u09E1\u09F0\u09F1\u09FC\u0A05-\u0A0A\u0A0F\u0A10\u0A13-\u0A28\u0A2A-\u0A30\u0A32\u0A33\u0A35\u0A36\u0A38\u0A39\u0A59-\u0A5C\u0A5E\u0A72-\u0A74\u0A85-\u0A8D\u0A8F-\u0A91\u0A93-\u0AA8\u0AAA-\u0AB0\u0AB2\u0AB3\u0AB5-\u0AB9\u0ABD\u0AD0\u0AE0\u0AE1\u0AF9\u0B05-\u0B0C\u0B0F\u0B10\u0B13-\u0B28\u0B2A-\u0B30\u0B32\u0B33\u0B35-\u0B39\u0B3D\u0B5C\u0B5D\u0B5F-\u0B61\u0B71\u0B83\u0B85-\u0B8A\u0B8E-\u0B90\u0B92-\u0B95\u0B99\u0B9A\u0B9C\u0B9E\u0B9F\u0BA3\u0BA4\u0BA8-\u0BAA\u0BAE-\u0BB9\u0BD0\u0C05-\u0C0C\u0C0E-\u0C10\u0C12-\u0C28\u0C2A-\u0C39\u0C3D\u0C58-\u0C5A\u0C5D\u0C60\u0C61\u0C80\u0C85-\u0C8C\u0C8E-\u0C90\u0C92-\u0CA8\u0CAA-\u0CB3\u0CB5-\u0CB9\u0CBD\u0CDD\u0CDE\u0CE0\u0CE1\u0CF1\u0CF2\u0D04-\u0D0C\u0D0E-\u0D10\u0D12-\u0D3A\u0D3D\u0D4E\u0D54-\u0D56\u0D5F-\u0D61\u0D7A-\u0D7F\u0D85-\u0D96\u0D9A-\u0DB1\u0DB3-\u0DBB\u0DBD\u0DC0-\u0DC6\u0E01-\u0E30\u0E32\u0E33\u0E40-\u0E46\u0E81\u0E82\u0E84\u0E86-\u0E8A\u0E8C-\u0EA3\u0EA5\u0EA7-\u0EB0\u0EB2\u0EB3\u0EBD\u0EC0-\u0EC4\u0EC6\u0EDC-\u0EDF\u0F00\u0F40-\u0F47\u0F49-\u0F6C\u0F88-\u0F8C\u1000-\u102A\u103F\u1050-\u1055\u105A-\u105D\u1061\u1065\u1066\u106E-\u1070\u1075-\u1081\u108E\u10A0-\u10C5\u10C7\u10CD\u10D0-\u10FA\u10FC-\u1248\u124A-\u124D\u1250-\u1256\u1258\u125A-\u125D\u1260-\u1288\u128A-\u128D\u1290-\u12B0\u12B2-\u12B5\u12B8-\u12BE\u12C0\u12C2-\u12C5\u12C8-\u12D6\u12D8-\u1310\u1312-\u1315\u1318-\u135A\u1380-\u138F\u13A0-\u13F5\u13F8-\u13FD\u1401-\u166C\u166F-\u167F\u1681-\u169A\u16A0-\u16EA\u16F1-\u16F8\u1700-\u1711\u171F-\u1731\u1740-\u1751\u1760-\u176C\u176E-\u1770\u1780-\u17B3\u17D7\u17DC\u1820-\u1878\u1880-\u1884\u1887-\u18A8\u18AA\u18B0-\u18F5\u1900-\u191E\u1950-\u196D\u1970-\u1974\u1980-\u19AB\u19B0-\u19C9\u1A00-\u1A16\u1A20-\u1A54\u1AA7\u1B05-\u1B33\u1B45-\u1B4C\u1B83-\u1BA0\u1BAE\u1BAF\u1BBA-\u1BE5\u1C00-\u1C23\u1C4D-\u1C4F\u1C5A-\u1C7D\u1C80-\u1C88\u1C90-\u1CBA\u1CBD-\u1CBF\u1CE9-\u1CEC\u1CEE-\u1CF3\u1CF5\u1CF6\u1CFA\u1D00-\u1DBF\u1E00-\u1F15\u1F18-\u1F1D\u1F20-\u1F45\u1F48-\u1F4D\u1F50-\u1F57\u1F59\u1F5B\u1F5D\u1F5F-\u1F7D\u1F80-\u1FB4\u1FB6-\u1FBC\u1FBE\u1FC2-\u1FC4\u1FC6-\u1FCC\u1FD0-\u1FD3\u1FD6-\u1FDB\u1FE0-\u1FEC\u1FF2-\u1FF4\u1FF6-\u1FFC\u2071\u207F\u2090-\u209C\u2102\u2107\u210A-\u2113\u2115\u2119-\u211D\u2124\u2126\u2128\u212A-\u212D\u212F-\u2139\u213C-\u213F\u2145-\u2149\u214E\u2183\u2184\u2C00-\u2CE4\u2CEB-\u2CEE\u2CF2\u2CF3\u2D00-\u2D25\u2D27\u2D2D\u2D30-\u2D67\u2D6F\u2D80-\u2D96\u2DA0-\u2DA6\u2DA8-\u2DAE\u2DB0-\u2DB6\u2DB8-\u2DBE\u2DC0-\u2DC6\u2DC8-\u2DCE\u2DD0-\u2DD6\u2DD8-\u2DDE\u2E2F\u3005\u3006\u3031-\u3035\u303B\u303C\u3041-\u3096\u309D-\u309F\u30A1-\u30FA\u30FC-\u30FF\u3105-\u312F\u3131-\u318E\u31A0-\u31BF\u31F0-\u31FF\u3400-\u4DBF\u4E00-\uA48C\uA4D0-\uA4FD\uA500-\uA60C\uA610-\uA61F\uA62A\uA62B\uA640-\uA66E\uA67F-\uA69D\uA6A0-\uA6E5\uA717-\uA71F\uA722-\uA788\uA78B-\uA7CA\uA7D0\uA7D1\uA7D3\uA7D5-\uA7D9\uA7F2-\uA801\uA803-\uA805\uA807-\uA80A\uA80C-\uA822\uA840-\uA873\uA882-\uA8B3\uA8F2-\uA8F7\uA8FB\uA8FD\uA8FE\uA90A-\uA925\uA930-\uA946\uA960-\uA97C\uA984-\uA9B2\uA9CF\uA9E0-\uA9E4\uA9E6-\uA9EF\uA9FA-\uA9FE\uAA00-\uAA28\uAA40-\uAA42\uAA44-\uAA4B\uAA60-\uAA76\uAA7A\uAA7E-\uAAAF\uAAB1\uAAB5\uAAB6\uAAB9-\uAABD\uAAC0\uAAC2\uAADB-\uAADD\uAAE0-\uAAEA\uAAF2-\uAAF4\uAB01-\uAB06\uAB09-\uAB0E\uAB11-\uAB16\uAB20-\uAB26\uAB28-\uAB2E\uAB30-\uAB5A\uAB5C-\uAB69\uAB70-\uABE2\uAC00-\uD7A3\uD7B0-\uD7C6\uD7CB-\uD7FB\uF900-\uFA6D\uFA70-\uFAD9\uFB00-\uFB06\uFB13-\uFB17\uFB1D\uFB1F-\uFB28\uFB2A-\uFB36\uFB38-\uFB3C\uFB3E\uFB40\uFB41\uFB43\uFB44\uFB46-\uFBB1\uFBD3-\uFD3D\uFD50-\uFD8F\uFD92-\uFDC7\uFDF0-\uFDFB\uFE70-\uFE74\uFE76-\uFEFC\uFF21-\uFF3A\uFF41-\uFF5A\uFF66-\uFFBE\uFFC2-\uFFC7\uFFCA-\uFFCF\uFFD2-\uFFD7\uFFDA-\uFFDC]|\uD800[\uDC00-\uDC0B\uDC0D-\uDC26\uDC28-\uDC3A\uDC3C\uDC3D\uDC3F-\uDC4D\uDC50-\uDC5D\uDC80-\uDCFA\uDE80-\uDE9C\uDEA0-\uDED0\uDF00-\uDF1F\uDF2D-\uDF40\uDF42-\uDF49\uDF50-\uDF75\uDF80-\uDF9D\uDFA0-\uDFC3\uDFC8-\uDFCF]|\uD801[\uDC00-\uDC9D\uDCB0-\uDCD3\uDCD8-\uDCFB\uDD00-\uDD27\uDD30-\uDD63\uDD70-\uDD7A\uDD7C-\uDD8A\uDD8C-\uDD92\uDD94\uDD95\uDD97-\uDDA1\uDDA3-\uDDB1\uDDB3-\uDDB9\uDDBB\uDDBC\uDE00-\uDF36\uDF40-\uDF55\uDF60-\uDF67\uDF80-\uDF85\uDF87-\uDFB0\uDFB2-\uDFBA]|\uD802[\uDC00-\uDC05\uDC08\uDC0A-\uDC35\uDC37\uDC38\uDC3C\uDC3F-\uDC55\uDC60-\uDC76\uDC80-\uDC9E\uDCE0-\uDCF2\uDCF4\uDCF5\uDD00-\uDD15\uDD20-\uDD39\uDD80-\uDDB7\uDDBE\uDDBF\uDE00\uDE10-\uDE13\uDE15-\uDE17\uDE19-\uDE35\uDE60-\uDE7C\uDE80-\uDE9C\uDEC0-\uDEC7\uDEC9-\uDEE4\uDF00-\uDF35\uDF40-\uDF55\uDF60-\uDF72\uDF80-\uDF91]|\uD803[\uDC00-\uDC48\uDC80-\uDCB2\uDCC0-\uDCF2\uDD00-\uDD23\uDE80-\uDEA9\uDEB0\uDEB1\uDF00-\uDF1C\uDF27\uDF30-\uDF45\uDF70-\uDF81\uDFB0-\uDFC4\uDFE0-\uDFF6]|\uD804[\uDC03-\uDC37\uDC71\uDC72\uDC75\uDC83-\uDCAF\uDCD0-\uDCE8\uDD03-\uDD26\uDD44\uDD47\uDD50-\uDD72\uDD76\uDD83-\uDDB2\uDDC1-\uDDC4\uDDDA\uDDDC\uDE00-\uDE11\uDE13-\uDE2B\uDE3F\uDE40\uDE80-\uDE86\uDE88\uDE8A-\uDE8D\uDE8F-\uDE9D\uDE9F-\uDEA8\uDEB0-\uDEDE\uDF05-\uDF0C\uDF0F\uDF10\uDF13-\uDF28\uDF2A-\uDF30\uDF32\uDF33\uDF35-\uDF39\uDF3D\uDF50\uDF5D-\uDF61]|\uD805[\uDC00-\uDC34\uDC47-\uDC4A\uDC5F-\uDC61\uDC80-\uDCAF\uDCC4\uDCC5\uDCC7\uDD80-\uDDAE\uDDD8-\uDDDB\uDE00-\uDE2F\uDE44\uDE80-\uDEAA\uDEB8\uDF00-\uDF1A\uDF40-\uDF46]|\uD806[\uDC00-\uDC2B\uDCA0-\uDCDF\uDCFF-\uDD06\uDD09\uDD0C-\uDD13\uDD15\uDD16\uDD18-\uDD2F\uDD3F\uDD41\uDDA0-\uDDA7\uDDAA-\uDDD0\uDDE1\uDDE3\uDE00\uDE0B-\uDE32\uDE3A\uDE50\uDE5C-\uDE89\uDE9D\uDEB0-\uDEF8]|\uD807[\uDC00-\uDC08\uDC0A-\uDC2E\uDC40\uDC72-\uDC8F\uDD00-\uDD06\uDD08\uDD09\uDD0B-\uDD30\uDD46\uDD60-\uDD65\uDD67\uDD68\uDD6A-\uDD89\uDD98\uDEE0-\uDEF2\uDF02\uDF04-\uDF10\uDF12-\uDF33\uDFB0]|\uD808[\uDC00-\uDF99]|\uD809[\uDC80-\uDD43]|\uD80B[\uDF90-\uDFF0]|[\uD80C\uD81C-\uD820\uD822\uD840-\uD868\uD86A-\uD86C\uD86F-\uD872\uD874-\uD879\uD880-\uD883\uD885-\uD887][\uDC00-\uDFFF]|\uD80D[\uDC00-\uDC2F\uDC41-\uDC46]|\uD811[\uDC00-\uDE46]|\uD81A[\uDC00-\uDE38\uDE40-\uDE5E\uDE70-\uDEBE\uDED0-\uDEED\uDF00-\uDF2F\uDF40-\uDF43\uDF63-\uDF77\uDF7D-\uDF8F]|\uD81B[\uDE40-\uDE7F\uDF00-\uDF4A\uDF50\uDF93-\uDF9F\uDFE0\uDFE1\uDFE3]|\uD821[\uDC00-\uDFF7]|\uD823[\uDC00-\uDCD5\uDD00-\uDD08]|\uD82B[\uDFF0-\uDFF3\uDFF5-\uDFFB\uDFFD\uDFFE]|\uD82C[\uDC00-\uDD22\uDD32\uDD50-\uDD52\uDD55\uDD64-\uDD67\uDD70-\uDEFB]|\uD82F[\uDC00-\uDC6A\uDC70-\uDC7C\uDC80-\uDC88\uDC90-\uDC99]|\uD835[\uDC00-\uDC54\uDC56-\uDC9C\uDC9E\uDC9F\uDCA2\uDCA5\uDCA6\uDCA9-\uDCAC\uDCAE-\uDCB9\uDCBB\uDCBD-\uDCC3\uDCC5-\uDD05\uDD07-\uDD0A\uDD0D-\uDD14\uDD16-\uDD1C\uDD1E-\uDD39\uDD3B-\uDD3E\uDD40-\uDD44\uDD46\uDD4A-\uDD50\uDD52-\uDEA5\uDEA8-\uDEC0\uDEC2-\uDEDA\uDEDC-\uDEFA\uDEFC-\uDF14\uDF16-\uDF34\uDF36-\uDF4E\uDF50-\uDF6E\uDF70-\uDF88\uDF8A-\uDFA8\uDFAA-\uDFC2\uDFC4-\uDFCB]|\uD837[\uDF00-\uDF1E\uDF25-\uDF2A]|\uD838[\uDC30-\uDC6D\uDD00-\uDD2C\uDD37-\uDD3D\uDD4E\uDE90-\uDEAD\uDEC0-\uDEEB]|\uD839[\uDCD0-\uDCEB\uDFE0-\uDFE6\uDFE8-\uDFEB\uDFED\uDFEE\uDFF0-\uDFFE]|\uD83A[\uDC00-\uDCC4\uDD00-\uDD43\uDD4B]|\uD83B[\uDE00-\uDE03\uDE05-\uDE1F\uDE21\uDE22\uDE24\uDE27\uDE29-\uDE32\uDE34-\uDE37\uDE39\uDE3B\uDE42\uDE47\uDE49\uDE4B\uDE4D-\uDE4F\uDE51\uDE52\uDE54\uDE57\uDE59\uDE5B\uDE5D\uDE5F\uDE61\uDE62\uDE64\uDE67-\uDE6A\uDE6C-\uDE72\uDE74-\uDE77\uDE79-\uDE7C\uDE7E\uDE80-\uDE89\uDE8B-\uDE9B\uDEA1-\uDEA3\uDEA5-\uDEA9\uDEAB-\uDEBB]|\uD869[\uDC00-\uDEDF\uDF00-\uDFFF]|\uD86D[\uDC00-\uDF39\uDF40-\uDFFF]|\uD86E[\uDC00-\uDC1D\uDC20-\uDFFF]|\uD873[\uDC00-\uDEA1\uDEB0-\uDFFF]|\uD87A[\uDC00-\uDFE0\uDFF0-\uDFFF]|\uD87B[\uDC00-\uDE5D]|\uD87E[\uDC00-\uDE1D]|\uD884[\uDC00-\uDF4A\uDF50-\uDFFF]|\uD888[\uDC00-\uDFAF])(?:[0-9A-Za-z\xAA\xB5\xBA\xC0-\xD6\xD8-\xF6\xF8-\u02C1\u02C6-\u02D1\u02E0-\u02E4\u02EC\u02EE\u0370-\u0374\u0376\u0377\u037A-\u037D\u037F\u0386\u0388-\u038A\u038C\u038E-\u03A1\u03A3-\u03F5\u03F7-\u0481\u048A-\u052F\u0531-\u0556\u0559\u0560-\u0588\u05D0-\u05EA\u05EF-\u05F2\u0620-\u064A\u066E\u066F\u0671-\u06D3\u06D5\u06E5\u06E6\u06EE\u06EF\u06FA-\u06FC\u06FF\u0710\u0712-\u072F\u074D-\u07A5\u07B1\u07CA-\u07EA\u07F4\u07F5\u07FA\u0800-\u0815\u081A\u0824\u0828\u0840-\u0858\u0860-\u086A\u0870-\u0887\u0889-\u088E\u08A0-\u08C9\u0904-\u0939\u093D\u0950\u0958-\u0961\u0971-\u0980\u0985-\u098C\u098F\u0990\u0993-\u09A8\u09AA-\u09B0\u09B2\u09B6-\u09B9\u09BD\u09CE\u09DC\u09DD\u09DF-\u09E1\u09F0\u09F1\u09FC\u0A05-\u0A0A\u0A0F\u0A10\u0A13-\u0A28\u0A2A-\u0A30\u0A32\u0A33\u0A35\u0A36\u0A38\u0A39\u0A59-\u0A5C\u0A5E\u0A72-\u0A74\u0A85-\u0A8D\u0A8F-\u0A91\u0A93-\u0AA8\u0AAA-\u0AB0\u0AB2\u0AB3\u0AB5-\u0AB9\u0ABD\u0AD0\u0AE0\u0AE1\u0AF9\u0B05-\u0B0C\u0B0F\u0B10\u0B13-\u0B28\u0B2A-\u0B30\u0B32\u0B33\u0B35-\u0B39\u0B3D\u0B5C\u0B5D\u0B5F-\u0B61\u0B71\u0B83\u0B85-\u0B8A\u0B8E-\u0B90\u0B92-\u0B95\u0B99\u0B9A\u0B9C\u0B9E\u0B9F\u0BA3\u0BA4\u0BA8-\u0BAA\u0BAE-\u0BB9\u0BD0\u0C05-\u0C0C\u0C0E-\u0C10\u0C12-\u0C28\u0C2A-\u0C39\u0C3D\u0C58-\u0C5A\u0C5D\u0C60\u0C61\u0C80\u0C85-\u0C8C\u0C8E-\u0C90\u0C92-\u0CA8\u0CAA-\u0CB3\u0CB5-\u0CB9\u0CBD\u0CDD\u0CDE\u0CE0\u0CE1\u0CF1\u0CF2\u0D04-\u0D0C\u0D0E-\u0D10\u0D12-\u0D3A\u0D3D\u0D4E\u0D54-\u0D56\u0D5F-\u0D61\u0D7A-\u0D7F\u0D85-\u0D96\u0D9A-\u0DB1\u0DB3-\u0DBB\u0DBD\u0DC0-\u0DC6\u0E01-\u0E30\u0E32\u0E33\u0E40-\u0E46\u0E81\u0E82\u0E84\u0E86-\u0E8A\u0E8C-\u0EA3\u0EA5\u0EA7-\u0EB0\u0EB2\u0EB3\u0EBD\u0EC0-\u0EC4\u0EC6\u0EDC-\u0EDF\u0F00\u0F40-\u0F47\u0F49-\u0F6C\u0F88-\u0F8C\u1000-\u102A\u103F\u1050-\u1055\u105A-\u105D\u1061\u1065\u1066\u106E-\u1070\u1075-\u1081\u108E\u10A0-\u10C5\u10C7\u10CD\u10D0-\u10FA\u10FC-\u1248\u124A-\u124D\u1250-\u1256\u1258\u125A-\u125D\u1260-\u1288\u128A-\u128D\u1290-\u12B0\u12B2-\u12B5\u12B8-\u12BE\u12C0\u12C2-\u12C5\u12C8-\u12D6\u12D8-\u1310\u1312-\u1315\u1318-\u135A\u1380-\u138F\u13A0-\u13F5\u13F8-\u13FD\u1401-\u166C\u166F-\u167F\u1681-\u169A\u16A0-\u16EA\u16F1-\u16F8\u1700-\u1711\u171F-\u1731\u1740-\u1751\u1760-\u176C\u176E-\u1770\u1780-\u17B3\u17D7\u17DC\u1820-\u1878\u1880-\u1884\u1887-\u18A8\u18AA\u18B0-\u18F5\u1900-\u191E\u1950-\u196D\u1970-\u1974\u1980-\u19AB\u19B0-\u19C9\u1A00-\u1A16\u1A20-\u1A54\u1AA7\u1B05-\u1B33\u1B45-\u1B4C\u1B83-\u1BA0\u1BAE\u1BAF\u1BBA-\u1BE5\u1C00-\u1C23\u1C4D-\u1C4F\u1C5A-\u1C7D\u1C80-\u1C88\u1C90-\u1CBA\u1CBD-\u1CBF\u1CE9-\u1CEC\u1CEE-\u1CF3\u1CF5\u1CF6\u1CFA\u1D00-\u1DBF\u1E00-\u1F15\u1F18-\u1F1D\u1F20-\u1F45\u1F48-\u1F4D\u1F50-\u1F57\u1F59\u1F5B\u1F5D\u1F5F-\u1F7D\u1F80-\u1FB4\u1FB6-\u1FBC\u1FBE\u1FC2-\u1FC4\u1FC6-\u1FCC\u1FD0-\u1FD3\u1FD6-\u1FDB\u1FE0-\u1FEC\u1FF2-\u1FF4\u1FF6-\u1FFC\u2071\u207F\u2090-\u209C\u2102\u2107\u210A-\u2113\u2115\u2119-\u211D\u2124\u2126\u2128\u212A-\u212D\u212F-\u2139\u213C-\u213F\u2145-\u2149\u214E\u2183\u2184\u2C00-\u2CE4\u2CEB-\u2CEE\u2CF2\u2CF3\u2D00-\u2D25\u2D27\u2D2D\u2D30-\u2D67\u2D6F\u2D80-\u2D96\u2DA0-\u2DA6\u2DA8-\u2DAE\u2DB0-\u2DB6\u2DB8-\u2DBE\u2DC0-\u2DC6\u2DC8-\u2DCE\u2DD0-\u2DD6\u2DD8-\u2DDE\u2E2F\u3005\u3006\u3031-\u3035\u303B\u303C\u3041-\u3096\u309D-\u309F\u30A1-\u30FA\u30FC-\u30FF\u3105-\u312F\u3131-\u318E\u31A0-\u31BF\u31F0-\u31FF\u3400-\u4DBF\u4E00-\uA48C\uA4D0-\uA4FD\uA500-\uA60C\uA610-\uA61F\uA62A\uA62B\uA640-\uA66E\uA67F-\uA69D\uA6A0-\uA6E5\uA717-\uA71F\uA722-\uA788\uA78B-\uA7CA\uA7D0\uA7D1\uA7D3\uA7D5-\uA7D9\uA7F2-\uA801\uA803-\uA805\uA807-\uA80A\uA80C-\uA822\uA840-\uA873\uA882-\uA8B3\uA8F2-\uA8F7\uA8FB\uA8FD\uA8FE\uA90A-\uA925\uA930-\uA946\uA960-\uA97C\uA984-\uA9B2\uA9CF\uA9E0-\uA9E4\uA9E6-\uA9EF\uA9FA-\uA9FE\uAA00-\uAA28\uAA40-\uAA42\uAA44-\uAA4B\uAA60-\uAA76\uAA7A\uAA7E-\uAAAF\uAAB1\uAAB5\uAAB6\uAAB9-\uAABD\uAAC0\uAAC2\uAADB-\uAADD\uAAE0-\uAAEA\uAAF2-\uAAF4\uAB01-\uAB06\uAB09-\uAB0E\uAB11-\uAB16\uAB20-\uAB26\uAB28-\uAB2E\uAB30-\uAB5A\uAB5C-\uAB69\uAB70-\uABE2\uAC00-\uD7A3\uD7B0-\uD7C6\uD7CB-\uD7FB\uF900-\uFA6D\uFA70-\uFAD9\uFB00-\uFB06\uFB13-\uFB17\uFB1D\uFB1F-\uFB28\uFB2A-\uFB36\uFB38-\uFB3C\uFB3E\uFB40\uFB41\uFB43\uFB44\uFB46-\uFBB1\uFBD3-\uFD3D\uFD50-\uFD8F\uFD92-\uFDC7\uFDF0-\uFDFB\uFE70-\uFE74\uFE76-\uFEFC\uFF21-\uFF3A\uFF41-\uFF5A\uFF66-\uFFBE\uFFC2-\uFFC7\uFFCA-\uFFCF\uFFD2-\uFFD7\uFFDA-\uFFDC]|\uD800[\uDC00-\uDC0B\uDC0D-\uDC26\uDC28-\uDC3A\uDC3C\uDC3D\uDC3F-\uDC4D\uDC50-\uDC5D\uDC80-\uDCFA\uDE80-\uDE9C\uDEA0-\uDED0\uDF00-\uDF1F\uDF2D-\uDF40\uDF42-\uDF49\uDF50-\uDF75\uDF80-\uDF9D\uDFA0-\uDFC3\uDFC8-\uDFCF]|\uD801[\uDC00-\uDC9D\uDCB0-\uDCD3\uDCD8-\uDCFB\uDD00-\uDD27\uDD30-\uDD63\uDD70-\uDD7A\uDD7C-\uDD8A\uDD8C-\uDD92\uDD94\uDD95\uDD97-\uDDA1\uDDA3-\uDDB1\uDDB3-\uDDB9\uDDBB\uDDBC\uDE00-\uDF36\uDF40-\uDF55\uDF60-\uDF67\uDF80-\uDF85\uDF87-\uDFB0\uDFB2-\uDFBA]|\uD802[\uDC00-\uDC05\uDC08\uDC0A-\uDC35\uDC37\uDC38\uDC3C\uDC3F-\uDC55\uDC60-\uDC76\uDC80-\uDC9E\uDCE0-\uDCF2\uDCF4\uDCF5\uDD00-\uDD15\uDD20-\uDD39\uDD80-\uDDB7\uDDBE\uDDBF\uDE00\uDE10-\uDE13\uDE15-\uDE17\uDE19-\uDE35\uDE60-\uDE7C\uDE80-\uDE9C\uDEC0-\uDEC7\uDEC9-\uDEE4\uDF00-\uDF35\uDF40-\uDF55\uDF60-\uDF72\uDF80-\uDF91]|\uD803[\uDC00-\uDC48\uDC80-\uDCB2\uDCC0-\uDCF2\uDD00-\uDD23\uDE80-\uDEA9\uDEB0\uDEB1\uDF00-\uDF1C\uDF27\uDF30-\uDF45\uDF70-\uDF81\uDFB0-\uDFC4\uDFE0-\uDFF6]|\uD804[\uDC03-\uDC37\uDC71\uDC72\uDC75\uDC83-\uDCAF\uDCD0-\uDCE8\uDD03-\uDD26\uDD44\uDD47\uDD50-\uDD72\uDD76\uDD83-\uDDB2\uDDC1-\uDDC4\uDDDA\uDDDC\uDE00-\uDE11\uDE13-\uDE2B\uDE3F\uDE40\uDE80-\uDE86\uDE88\uDE8A-\uDE8D\uDE8F-\uDE9D\uDE9F-\uDEA8\uDEB0-\uDEDE\uDF05-\uDF0C\uDF0F\uDF10\uDF13-\uDF28\uDF2A-\uDF30\uDF32\uDF33\uDF35-\uDF39\uDF3D\uDF50\uDF5D-\uDF61]|\uD805[\uDC00-\uDC34\uDC47-\uDC4A\uDC5F-\uDC61\uDC80-\uDCAF\uDCC4\uDCC5\uDCC7\uDD80-\uDDAE\uDDD8-\uDDDB\uDE00-\uDE2F\uDE44\uDE80-\uDEAA\uDEB8\uDF00-\uDF1A\uDF40-\uDF46]|\uD806[\uDC00-\uDC2B\uDCA0-\uDCDF\uDCFF-\uDD06\uDD09\uDD0C-\uDD13\uDD15\uDD16\uDD18-\uDD2F\uDD3F\uDD41\uDDA0-\uDDA7\uDDAA-\uDDD0\uDDE1\uDDE3\uDE00\uDE0B-\uDE32\uDE3A\uDE50\uDE5C-\uDE89\uDE9D\uDEB0-\uDEF8]|\uD807[\uDC00-\uDC08\uDC0A-\uDC2E\uDC40\uDC72-\uDC8F\uDD00-\uDD06\uDD08\uDD09\uDD0B-\uDD30\uDD46\uDD60-\uDD65\uDD67\uDD68\uDD6A-\uDD89\uDD98\uDEE0-\uDEF2\uDF02\uDF04-\uDF10\uDF12-\uDF33\uDFB0]|\uD808[\uDC00-\uDF99]|\uD809[\uDC80-\uDD43]|\uD80B[\uDF90-\uDFF0]|[\uD80C\uD81C-\uD820\uD822\uD840-\uD868\uD86A-\uD86C\uD86F-\uD872\uD874-\uD879\uD880-\uD883\uD885-\uD887][\uDC00-\uDFFF]|\uD80D[\uDC00-\uDC2F\uDC41-\uDC46]|\uD811[\uDC00-\uDE46]|\uD81A[\uDC00-\uDE38\uDE40-\uDE5E\uDE70-\uDEBE\uDED0-\uDEED\uDF00-\uDF2F\uDF40-\uDF43\uDF63-\uDF77\uDF7D-\uDF8F]|\uD81B[\uDE40-\uDE7F\uDF00-\uDF4A\uDF50\uDF93-\uDF9F\uDFE0\uDFE1\uDFE3]|\uD821[\uDC00-\uDFF7]|\uD823[\uDC00-\uDCD5\uDD00-\uDD08]|\uD82B[\uDFF0-\uDFF3\uDFF5-\uDFFB\uDFFD\uDFFE]|\uD82C[\uDC00-\uDD22\uDD32\uDD50-\uDD52\uDD55\uDD64-\uDD67\uDD70-\uDEFB]|\uD82F[\uDC00-\uDC6A\uDC70-\uDC7C\uDC80-\uDC88\uDC90-\uDC99]|\uD835[\uDC00-\uDC54\uDC56-\uDC9C\uDC9E\uDC9F\uDCA2\uDCA5\uDCA6\uDCA9-\uDCAC\uDCAE-\uDCB9\uDCBB\uDCBD-\uDCC3\uDCC5-\uDD05\uDD07-\uDD0A\uDD0D-\uDD14\uDD16-\uDD1C\uDD1E-\uDD39\uDD3B-\uDD3E\uDD40-\uDD44\uDD46\uDD4A-\uDD50\uDD52-\uDEA5\uDEA8-\uDEC0\uDEC2-\uDEDA\uDEDC-\uDEFA\uDEFC-\uDF14\uDF16-\uDF34\uDF36-\uDF4E\uDF50-\uDF6E\uDF70-\uDF88\uDF8A-\uDFA8\uDFAA-\uDFC2\uDFC4-\uDFCB]|\uD837[\uDF00-\uDF1E\uDF25-\uDF2A]|\uD838[\uDC30-\uDC6D\uDD00-\uDD2C\uDD37-\uDD3D\uDD4E\uDE90-\uDEAD\uDEC0-\uDEEB]|\uD839[\uDCD0-\uDCEB\uDFE0-\uDFE6\uDFE8-\uDFEB\uDFED\uDFEE\uDFF0-\uDFFE]|\uD83A[\uDC00-\uDCC4\uDD00-\uDD43\uDD4B]|\uD83B[\uDE00-\uDE03\uDE05-\uDE1F\uDE21\uDE22\uDE24\uDE27\uDE29-\uDE32\uDE34-\uDE37\uDE39\uDE3B\uDE42\uDE47\uDE49\uDE4B\uDE4D-\uDE4F\uDE51\uDE52\uDE54\uDE57\uDE59\uDE5B\uDE5D\uDE5F\uDE61\uDE62\uDE64\uDE67-\uDE6A\uDE6C-\uDE72\uDE74-\uDE77\uDE79-\uDE7C\uDE7E\uDE80-\uDE89\uDE8B-\uDE9B\uDEA1-\uDEA3\uDEA5-\uDEA9\uDEAB-\uDEBB]|\uD869[\uDC00-\uDEDF\uDF00-\uDFFF]|\uD86D[\uDC00-\uDF39\uDF40-\uDFFF]|\uD86E[\uDC00-\uDC1D\uDC20-\uDFFF]|\uD873[\uDC00-\uDEA1\uDEB0-\uDFFF]|\uD87A[\uDC00-\uDFE0\uDFF0-\uDFFF]|\uD87B[\uDC00-\uDE5D]|\uD87E[\uDC00-\uDE1D]|\uD884[\uDC00-\uDF4A\uDF50-\uDFFF]|\uD888[\uDC00-\uDFAF])*$/.test(v)},{name:"string",test:re},{name:"Chain",test:Iu},{name:"Array",test:_r},{name:"Matrix",test:Sr},{name:"DenseMatrix",test:_i},{name:"SparseMatrix",test:Mi},{name:"Range",test:Si},{name:"Index",test:Et},{name:"boolean",test:cu},{name:"ResultSet",test:lu},{name:"Help",test:vu},{name:"function",test:hu},{name:"Date",test:pu},{name:"RegExp",test:du},{name:"null",test:Du},{name:"undefined",test:gu},{name:"AccessorNode",test:yu},{name:"ArrayNode",test:wu},{name:"AssignmentNode",test:Au},{name:"BlockNode",test:Eu},{name:"ConditionalNode",test:Fu},{name:"ConstantNode",test:Cu},{name:"FunctionNode",test:_u},{name:"FunctionAssignmentNode",test:bu},{name:"IndexNode",test:Mu},{name:"Node",test:Su},{name:"ObjectNode",test:Bu},{name:"OperatorNode",test:Nu},{name:"ParenthesisNode",test:xu},{name:"RangeNode",test:Tu},{name:"RelationalNode",test:zu},{name:"SymbolNode",test:Ou},{name:"Map",test:mu},{name:"Object",test:Kt}]),s.addConversions([{from:"number",to:"BigNumber",convert:function(l){if(t||rt(l),Xu(l)>15)throw new TypeError("Cannot implicitly convert a number with >15 significant digits to BigNumber (value: "+l+"). Use function bignumber(x) to convert to BigNumber.");return new t(l)}},{from:"number",to:"Complex",convert:function(l){return i||et(l),new i(l,0)}},{from:"BigNumber",to:"Complex",convert:function(l){return i||et(l),new i(l.toNumber(),0)}},{from:"bigint",to:"number",convert:function(l){if(l>Number.MAX_SAFE_INTEGER)throw new TypeError("Cannot implicitly convert bigint to number: value exceeds the max safe integer value (value: "+l+")");return Number(l)}},{from:"bigint",to:"BigNumber",convert:function(l){return t||rt(l),new t(l.toString())}},{from:"bigint",to:"Fraction",convert:function(l){return u||tt(l),new u(l.toString())}},{from:"Fraction",to:"BigNumber",convert:function(l){throw new TypeError("Cannot implicitly convert a Fraction to BigNumber or vice versa. Use function bignumber(x) to convert to BigNumber or fraction(x) to convert to Fraction.")}},{from:"Fraction",to:"Complex",convert:function(l){return i||et(l),new i(l.valueOf(),0)}},{from:"number",to:"Fraction",convert:function(l){u||tt(l);var c=new u(l);if(c.valueOf()!==l)throw new TypeError("Cannot implicitly convert a number to a Fraction when there will be a loss of precision (value: "+l+"). Use function fraction(x) to convert to Fraction.");return c}},{from:"string",to:"number",convert:function(l){var c=Number(l);if(isNaN(c))throw new Error('Cannot convert "'+l+'" to a number');return c}},{from:"string",to:"BigNumber",convert:function(l){t||rt(l);try{return new t(l)}catch{throw new Error('Cannot convert "'+l+'" to BigNumber')}}},{from:"string",to:"bigint",convert:function(l){try{return BigInt(l)}catch{throw new Error('Cannot convert "'+l+'" to BigInt')}}},{from:"string",to:"Fraction",convert:function(l){u||tt(l);try{return new u(l)}catch{throw new Error('Cannot convert "'+l+'" to Fraction')}}},{from:"string",to:"Complex",convert:function(l){i||et(l);try{return new i(l)}catch{throw new Error('Cannot convert "'+l+'" to Complex')}}},{from:"boolean",to:"number",convert:function(l){return+l}},{from:"boolean",to:"BigNumber",convert:function(l){return t||rt(l),new t(+l)}},{from:"boolean",to:"bigint",convert:function(l){return BigInt(+l)}},{from:"boolean",to:"Fraction",convert:function(l){return u||tt(l),new u(+l)}},{from:"boolean",to:"string",convert:function(l){return String(l)}},{from:"Array",to:"Matrix",convert:function(l){return n||Hu(),new n(l)}},{from:"Matrix",to:"Array",convert:function(l){return l.valueOf()}}]),s.onMismatch=(v,l,c)=>{var o=s.createError(v,l,c);if(["wrongType","mismatch"].includes(o.data.category)&&l.length===1&&st(l[0])&&c.some(f=>!f.params.includes(","))){var a=new TypeError("Function '".concat(v,"' doesn't apply to matrices. To call it ")+"elementwise on a matrix 'M', try 'map(M, ".concat(v,")'."));throw a.data=o.data,a}throw o},s.onMismatch=(v,l,c)=>{var o=s.createError(v,l,c);if(["wrongType","mismatch"].includes(o.data.category)&&l.length===1&&st(l[0])&&c.some(f=>!f.params.includes(","))){var a=new TypeError("Function '".concat(v,"' doesn't apply to matrices. To call it ")+"elementwise on a matrix 'M', try 'map(M, ".concat(v,")'."));throw a.data=o.data,a}throw o},s});function rt(r){throw new Error("Cannot convert value ".concat(r," into a BigNumber: no class 'BigNumber' provided"))}function et(r){throw new Error("Cannot convert value ".concat(r," into a Complex number: no class 'Complex' provided"))}function Hu(){throw new Error("Cannot convert array into a Matrix: no class 'DenseMatrix' provided")}function tt(r){throw new Error("Cannot convert value ".concat(r," into a Fraction, no class 'Fraction' provided."))}/*!
 *  decimal.js v10.4.3
 *  An arbitrary-precision Decimal type for JavaScript.
 *  https://github.com/MikeMcl/decimal.js
 *  Copyright (c) 2022 Michael Mclaughlin <M8ch88l@gmail.com>
 *  MIT Licence
 */var Me=9e15,ye=1e9,qt="0123456789abcdef",ct="2.3025850929940456840179914546843642076011014886287729760333279009675726096773524802359972050895982983419677840422862486334095254650828067566662873690987816894829072083255546808437998948262331985283935053089653777326288461633662222876982198867465436674744042432743651550489343149393914796194044002221051017141748003688084012647080685567743216228355220114804663715659121373450747856947683463616792101806445070648000277502684916746550586856935673420670581136429224554405758925724208241314695689016758940256776311356919292033376587141660230105703089634572075440370847469940168269282808481184289314848524948644871927809676271275775397027668605952496716674183485704422507197965004714951050492214776567636938662976979522110718264549734772662425709429322582798502585509785265383207606726317164309505995087807523710333101197857547331541421808427543863591778117054309827482385045648019095610299291824318237525357709750539565187697510374970888692180205189339507238539205144634197265287286965110862571492198849978748873771345686209167058",lt="3.1415926535897932384626433832795028841971693993751058209749445923078164062862089986280348253421170679821480865132823066470938446095505822317253594081284811174502841027019385211055596446229489549303819644288109756659334461284756482337867831652712019091456485669234603486104543266482133936072602491412737245870066063155881748815209209628292540917153643678925903600113305305488204665213841469519415116094330572703657595919530921861173819326117931051185480744623799627495673518857527248912279381830119491298336733624406566430860213949463952247371907021798609437027705392171762931767523846748184676694051320005681271452635608277857713427577896091736371787214684409012249534301465495853710507922796892589235420199561121290219608640344181598136297747713099605187072113499999983729780499510597317328160963185950244594553469083026425223082533446850352619311881710100031378387528865875332083814206171776691473035982534904287554687311595628638823537875937519577818577805321712268066130019278766111959092164201989380952572010654858632789",Pt={precision:20,rounding:4,modulo:1,toExpNeg:-7,toExpPos:21,minE:-Me,maxE:Me,crypto:!1},zi,ce,dr=!0,bt="[DecimalError] ",ge=bt+"Invalid argument: ",Oi=bt+"Precision limit exceeded",Ii=bt+"crypto unavailable",$i="[object Decimal]",Jr=Math.floor,Rr=Math.pow,ku=/^0b([01]+(\.[01]*)?|\.[01]+)(p[+-]?\d+)?$/i,ju=/^0x([0-9a-f]+(\.[0-9a-f]*)?|\.[0-9a-f]+)(p[+-]?\d+)?$/i,ro=/^0o([0-7]+(\.[0-7]*)?|\.[0-7]+)(p[+-]?\d+)?$/i,qi=/^(\d+(\.\d*)?|\.\d+)(e[+-]?\d+)?$/i,ue=1e7,hr=7,eo=9007199254740991,to=ct.length-1,Rt=lt.length-1,H={toStringTag:$i};H.absoluteValue=H.abs=function(){var r=new this.constructor(this);return r.s<0&&(r.s=1),vr(r)};H.ceil=function(){return vr(new this.constructor(this),this.e+1,2)};H.clampedTo=H.clamp=function(r,e){var t,i=this,n=i.constructor;if(r=new n(r),e=new n(e),!r.s||!e.s)return new n(NaN);if(r.gt(e))throw Error(ge+e);return t=i.cmp(r),t<0?r:i.cmp(e)>0?e:new n(i)};H.comparedTo=H.cmp=function(r){var e,t,i,n,u=this,s=u.d,v=(r=new u.constructor(r)).d,l=u.s,c=r.s;if(!s||!v)return!l||!c?NaN:l!==c?l:s===v?0:!s^l<0?1:-1;if(!s[0]||!v[0])return s[0]?l:v[0]?-c:0;if(l!==c)return l;if(u.e!==r.e)return u.e>r.e^l<0?1:-1;for(i=s.length,n=v.length,e=0,t=i<n?i:n;e<t;++e)if(s[e]!==v[e])return s[e]>v[e]^l<0?1:-1;return i===n?0:i>n^l<0?1:-1};H.cosine=H.cos=function(){var r,e,t=this,i=t.constructor;return t.d?t.d[0]?(r=i.precision,e=i.rounding,i.precision=r+Math.max(t.e,t.sd())+hr,i.rounding=1,t=no(i,Zi(i,t)),i.precision=r,i.rounding=e,vr(ce==2||ce==3?t.neg():t,r,e,!0)):new i(1):new i(NaN)};H.cubeRoot=H.cbrt=function(){var r,e,t,i,n,u,s,v,l,c,o=this,a=o.constructor;if(!o.isFinite()||o.isZero())return new a(o);for(dr=!1,u=o.s*Rr(o.s*o,1/3),!u||Math.abs(u)==1/0?(t=Zr(o.d),r=o.e,(u=(r-t.length+1)%3)&&(t+=u==1||u==-2?"0":"00"),u=Rr(t,1/3),r=Jr((r+1)/3)-(r%3==(r<0?-1:2)),u==1/0?t="5e"+r:(t=u.toExponential(),t=t.slice(0,t.indexOf("e")+1)+r),i=new a(t),i.s=o.s):i=new a(u.toString()),s=(r=a.precision)+3;;)if(v=i,l=v.times(v).times(v),c=l.plus(o),i=Tr(c.plus(o).times(v),c.plus(l),s+2,1),Zr(v.d).slice(0,s)===(t=Zr(i.d)).slice(0,s))if(t=t.slice(s-3,s+1),t=="9999"||!n&&t=="4999"){if(!n&&(vr(v,r+1,0),v.times(v).times(v).eq(o))){i=v;break}s+=4,n=1}else{(!+t||!+t.slice(1)&&t.charAt(0)=="5")&&(vr(i,r+1,1),e=!i.times(i).times(i).eq(o));break}return dr=!0,vr(i,r,a.rounding,e)};H.decimalPlaces=H.dp=function(){var r,e=this.d,t=NaN;if(e){if(r=e.length-1,t=(r-Jr(this.e/hr))*hr,r=e[r],r)for(;r%10==0;r/=10)t--;t<0&&(t=0)}return t};H.dividedBy=H.div=function(r){return Tr(this,new this.constructor(r))};H.dividedToIntegerBy=H.divToInt=function(r){var e=this,t=e.constructor;return vr(Tr(e,new t(r),0,1,1),t.precision,t.rounding)};H.equals=H.eq=function(r){return this.cmp(r)===0};H.floor=function(){return vr(new this.constructor(this),this.e+1,3)};H.greaterThan=H.gt=function(r){return this.cmp(r)>0};H.greaterThanOrEqualTo=H.gte=function(r){var e=this.cmp(r);return e==1||e===0};H.hyperbolicCosine=H.cosh=function(){var r,e,t,i,n,u=this,s=u.constructor,v=new s(1);if(!u.isFinite())return new s(u.s?1/0:NaN);if(u.isZero())return v;t=s.precision,i=s.rounding,s.precision=t+Math.max(u.e,u.sd())+4,s.rounding=1,n=u.d.length,n<32?(r=Math.ceil(n/3),e=(1/Mt(4,r)).toString()):(r=16,e="2.3283064365386962890625e-10"),u=xe(s,1,u.times(e),new s(1),!0);for(var l,c=r,o=new s(8);c--;)l=u.times(u),u=v.minus(l.times(o.minus(l.times(o))));return vr(u,s.precision=t,s.rounding=i,!0)};H.hyperbolicSine=H.sinh=function(){var r,e,t,i,n=this,u=n.constructor;if(!n.isFinite()||n.isZero())return new u(n);if(e=u.precision,t=u.rounding,u.precision=e+Math.max(n.e,n.sd())+4,u.rounding=1,i=n.d.length,i<3)n=xe(u,2,n,n,!0);else{r=1.4*Math.sqrt(i),r=r>16?16:r|0,n=n.times(1/Mt(5,r)),n=xe(u,2,n,n,!0);for(var s,v=new u(5),l=new u(16),c=new u(20);r--;)s=n.times(n),n=n.times(v.plus(s.times(l.times(s).plus(c))))}return u.precision=e,u.rounding=t,vr(n,e,t,!0)};H.hyperbolicTangent=H.tanh=function(){var r,e,t=this,i=t.constructor;return t.isFinite()?t.isZero()?new i(t):(r=i.precision,e=i.rounding,i.precision=r+7,i.rounding=1,Tr(t.sinh(),t.cosh(),i.precision=r,i.rounding=e)):new i(t.s)};H.inverseCosine=H.acos=function(){var r,e=this,t=e.constructor,i=e.abs().cmp(1),n=t.precision,u=t.rounding;return i!==-1?i===0?e.isNeg()?ie(t,n,u):new t(0):new t(NaN):e.isZero()?ie(t,n+4,u).times(.5):(t.precision=n+6,t.rounding=1,e=e.asin(),r=ie(t,n+4,u).times(.5),t.precision=n,t.rounding=u,r.minus(e))};H.inverseHyperbolicCosine=H.acosh=function(){var r,e,t=this,i=t.constructor;return t.lte(1)?new i(t.eq(1)?0:NaN):t.isFinite()?(r=i.precision,e=i.rounding,i.precision=r+Math.max(Math.abs(t.e),t.sd())+4,i.rounding=1,dr=!1,t=t.times(t).minus(1).sqrt().plus(t),dr=!0,i.precision=r,i.rounding=e,t.ln()):new i(t)};H.inverseHyperbolicSine=H.asinh=function(){var r,e,t=this,i=t.constructor;return!t.isFinite()||t.isZero()?new i(t):(r=i.precision,e=i.rounding,i.precision=r+2*Math.max(Math.abs(t.e),t.sd())+6,i.rounding=1,dr=!1,t=t.times(t).plus(1).sqrt().plus(t),dr=!0,i.precision=r,i.rounding=e,t.ln())};H.inverseHyperbolicTangent=H.atanh=function(){var r,e,t,i,n=this,u=n.constructor;return n.isFinite()?n.e>=0?new u(n.abs().eq(1)?n.s/0:n.isZero()?n:NaN):(r=u.precision,e=u.rounding,i=n.sd(),Math.max(i,r)<2*-n.e-1?vr(new u(n),r,e,!0):(u.precision=t=i-n.e,n=Tr(n.plus(1),new u(1).minus(n),t+r,1),u.precision=r+4,u.rounding=1,n=n.ln(),u.precision=r,u.rounding=e,n.times(.5))):new u(NaN)};H.inverseSine=H.asin=function(){var r,e,t,i,n=this,u=n.constructor;return n.isZero()?new u(n):(e=n.abs().cmp(1),t=u.precision,i=u.rounding,e!==-1?e===0?(r=ie(u,t+4,i).times(.5),r.s=n.s,r):new u(NaN):(u.precision=t+6,u.rounding=1,n=n.div(new u(1).minus(n.times(n)).sqrt().plus(1)).atan(),u.precision=t,u.rounding=i,n.times(2)))};H.inverseTangent=H.atan=function(){var r,e,t,i,n,u,s,v,l,c=this,o=c.constructor,a=o.precision,f=o.rounding;if(c.isFinite()){if(c.isZero())return new o(c);if(c.abs().eq(1)&&a+4<=Rt)return s=ie(o,a+4,f).times(.25),s.s=c.s,s}else{if(!c.s)return new o(NaN);if(a+4<=Rt)return s=ie(o,a+4,f).times(.5),s.s=c.s,s}for(o.precision=v=a+10,o.rounding=1,t=Math.min(28,v/hr+2|0),r=t;r;--r)c=c.div(c.times(c).plus(1).sqrt().plus(1));for(dr=!1,e=Math.ceil(v/hr),i=1,l=c.times(c),s=new o(c),n=c;r!==-1;)if(n=n.times(l),u=s.minus(n.div(i+=2)),n=n.times(l),s=u.plus(n.div(i+=2)),s.d[e]!==void 0)for(r=e;s.d[r]===u.d[r]&&r--;);return t&&(s=s.times(2<<t-1)),dr=!0,vr(s,o.precision=a,o.rounding=f,!0)};H.isFinite=function(){return!!this.d};H.isInteger=H.isInt=function(){return!!this.d&&Jr(this.e/hr)>this.d.length-2};H.isNaN=function(){return!this.s};H.isNegative=H.isNeg=function(){return this.s<0};H.isPositive=H.isPos=function(){return this.s>0};H.isZero=function(){return!!this.d&&this.d[0]===0};H.lessThan=H.lt=function(r){return this.cmp(r)<0};H.lessThanOrEqualTo=H.lte=function(r){return this.cmp(r)<1};H.logarithm=H.log=function(r){var e,t,i,n,u,s,v,l,c=this,o=c.constructor,a=o.precision,f=o.rounding,h=5;if(r==null)r=new o(10),e=!0;else{if(r=new o(r),t=r.d,r.s<0||!t||!t[0]||r.eq(1))return new o(NaN);e=r.eq(10)}if(t=c.d,c.s<0||!t||!t[0]||c.eq(1))return new o(t&&!t[0]?-1/0:c.s!=1?NaN:t?0:1/0);if(e)if(t.length>1)u=!0;else{for(n=t[0];n%10===0;)n/=10;u=n!==1}if(dr=!1,v=a+h,s=me(c,v),i=e?vt(o,v+10):me(r,v),l=Tr(s,i,v,1),Ve(l.d,n=a,f))do if(v+=10,s=me(c,v),i=e?vt(o,v+10):me(r,v),l=Tr(s,i,v,1),!u){+Zr(l.d).slice(n+1,n+15)+1==1e14&&(l=vr(l,a+1,0));break}while(Ve(l.d,n+=10,f));return dr=!0,vr(l,a,f)};H.minus=H.sub=function(r){var e,t,i,n,u,s,v,l,c,o,a,f,h=this,d=h.constructor;if(r=new d(r),!h.d||!r.d)return!h.s||!r.s?r=new d(NaN):h.d?r.s=-r.s:r=new d(r.d||h.s!==r.s?h:NaN),r;if(h.s!=r.s)return r.s=-r.s,h.plus(r);if(c=h.d,f=r.d,v=d.precision,l=d.rounding,!c[0]||!f[0]){if(f[0])r.s=-r.s;else if(c[0])r=new d(h);else return new d(l===3?-0:0);return dr?vr(r,v,l):r}if(t=Jr(r.e/hr),o=Jr(h.e/hr),c=c.slice(),u=o-t,u){for(a=u<0,a?(e=c,u=-u,s=f.length):(e=f,t=o,s=c.length),i=Math.max(Math.ceil(v/hr),s)+2,u>i&&(u=i,e.length=1),e.reverse(),i=u;i--;)e.push(0);e.reverse()}else{for(i=c.length,s=f.length,a=i<s,a&&(s=i),i=0;i<s;i++)if(c[i]!=f[i]){a=c[i]<f[i];break}u=0}for(a&&(e=c,c=f,f=e,r.s=-r.s),s=c.length,i=f.length-s;i>0;--i)c[s++]=0;for(i=f.length;i>u;){if(c[--i]<f[i]){for(n=i;n&&c[--n]===0;)c[n]=ue-1;--c[n],c[i]+=ue}c[i]-=f[i]}for(;c[--s]===0;)c.pop();for(;c[0]===0;c.shift())--t;return c[0]?(r.d=c,r.e=_t(c,t),dr?vr(r,v,l):r):new d(l===3?-0:0)};H.modulo=H.mod=function(r){var e,t=this,i=t.constructor;return r=new i(r),!t.d||!r.s||r.d&&!r.d[0]?new i(NaN):!r.d||t.d&&!t.d[0]?vr(new i(t),i.precision,i.rounding):(dr=!1,i.modulo==9?(e=Tr(t,r.abs(),0,3,1),e.s*=r.s):e=Tr(t,r,0,i.modulo,1),e=e.times(r),dr=!0,t.minus(e))};H.naturalExponential=H.exp=function(){return Ut(this)};H.naturalLogarithm=H.ln=function(){return me(this)};H.negated=H.neg=function(){var r=new this.constructor(this);return r.s=-r.s,vr(r)};H.plus=H.add=function(r){var e,t,i,n,u,s,v,l,c,o,a=this,f=a.constructor;if(r=new f(r),!a.d||!r.d)return!a.s||!r.s?r=new f(NaN):a.d||(r=new f(r.d||a.s===r.s?a:NaN)),r;if(a.s!=r.s)return r.s=-r.s,a.minus(r);if(c=a.d,o=r.d,v=f.precision,l=f.rounding,!c[0]||!o[0])return o[0]||(r=new f(a)),dr?vr(r,v,l):r;if(u=Jr(a.e/hr),i=Jr(r.e/hr),c=c.slice(),n=u-i,n){for(n<0?(t=c,n=-n,s=o.length):(t=o,i=u,s=c.length),u=Math.ceil(v/hr),s=u>s?u+1:s+1,n>s&&(n=s,t.length=1),t.reverse();n--;)t.push(0);t.reverse()}for(s=c.length,n=o.length,s-n<0&&(n=s,t=o,o=c,c=t),e=0;n;)e=(c[--n]=c[n]+o[n]+e)/ue|0,c[n]%=ue;for(e&&(c.unshift(e),++i),s=c.length;c[--s]==0;)c.pop();return r.d=c,r.e=_t(c,i),dr?vr(r,v,l):r};H.precision=H.sd=function(r){var e,t=this;if(r!==void 0&&r!==!!r&&r!==1&&r!==0)throw Error(ge+r);return t.d?(e=Pi(t.d),r&&t.e+1>e&&(e=t.e+1)):e=NaN,e};H.round=function(){var r=this,e=r.constructor;return vr(new e(r),r.e+1,e.rounding)};H.sine=H.sin=function(){var r,e,t=this,i=t.constructor;return t.isFinite()?t.isZero()?new i(t):(r=i.precision,e=i.rounding,i.precision=r+Math.max(t.e,t.sd())+hr,i.rounding=1,t=ao(i,Zi(i,t)),i.precision=r,i.rounding=e,vr(ce>2?t.neg():t,r,e,!0)):new i(NaN)};H.squareRoot=H.sqrt=function(){var r,e,t,i,n,u,s=this,v=s.d,l=s.e,c=s.s,o=s.constructor;if(c!==1||!v||!v[0])return new o(!c||c<0&&(!v||v[0])?NaN:v?s:1/0);for(dr=!1,c=Math.sqrt(+s),c==0||c==1/0?(e=Zr(v),(e.length+l)%2==0&&(e+="0"),c=Math.sqrt(e),l=Jr((l+1)/2)-(l<0||l%2),c==1/0?e="5e"+l:(e=c.toExponential(),e=e.slice(0,e.indexOf("e")+1)+l),i=new o(e)):i=new o(c.toString()),t=(l=o.precision)+3;;)if(u=i,i=u.plus(Tr(s,u,t+2,1)).times(.5),Zr(u.d).slice(0,t)===(e=Zr(i.d)).slice(0,t))if(e=e.slice(t-3,t+1),e=="9999"||!n&&e=="4999"){if(!n&&(vr(u,l+1,0),u.times(u).eq(s))){i=u;break}t+=4,n=1}else{(!+e||!+e.slice(1)&&e.charAt(0)=="5")&&(vr(i,l+1,1),r=!i.times(i).eq(s));break}return dr=!0,vr(i,l,o.rounding,r)};H.tangent=H.tan=function(){var r,e,t=this,i=t.constructor;return t.isFinite()?t.isZero()?new i(t):(r=i.precision,e=i.rounding,i.precision=r+10,i.rounding=1,t=t.sin(),t.s=1,t=Tr(t,new i(1).minus(t.times(t)).sqrt(),r+10,0),i.precision=r,i.rounding=e,vr(ce==2||ce==4?t.neg():t,r,e,!0)):new i(NaN)};H.times=H.mul=function(r){var e,t,i,n,u,s,v,l,c,o=this,a=o.constructor,f=o.d,h=(r=new a(r)).d;if(r.s*=o.s,!f||!f[0]||!h||!h[0])return new a(!r.s||f&&!f[0]&&!h||h&&!h[0]&&!f?NaN:!f||!h?r.s/0:r.s*0);for(t=Jr(o.e/hr)+Jr(r.e/hr),l=f.length,c=h.length,l<c&&(u=f,f=h,h=u,s=l,l=c,c=s),u=[],s=l+c,i=s;i--;)u.push(0);for(i=c;--i>=0;){for(e=0,n=l+i;n>i;)v=u[n]+h[i]*f[n-i-1]+e,u[n--]=v%ue|0,e=v/ue|0;u[n]=(u[n]+e)%ue|0}for(;!u[--s];)u.pop();return e?++t:u.shift(),r.d=u,r.e=_t(u,t),dr?vr(r,a.precision,a.rounding):r};H.toBinary=function(r,e){return Wt(this,2,r,e)};H.toDecimalPlaces=H.toDP=function(r,e){var t=this,i=t.constructor;return t=new i(t),r===void 0?t:(Wr(r,0,ye),e===void 0?e=i.rounding:Wr(e,0,8),vr(t,r+t.e+1,e))};H.toExponential=function(r,e){var t,i=this,n=i.constructor;return r===void 0?t=se(i,!0):(Wr(r,0,ye),e===void 0?e=n.rounding:Wr(e,0,8),i=vr(new n(i),r+1,e),t=se(i,!0,r+1)),i.isNeg()&&!i.isZero()?"-"+t:t};H.toFixed=function(r,e){var t,i,n=this,u=n.constructor;return r===void 0?t=se(n):(Wr(r,0,ye),e===void 0?e=u.rounding:Wr(e,0,8),i=vr(new u(n),r+n.e+1,e),t=se(i,!1,r+i.e+1)),n.isNeg()&&!n.isZero()?"-"+t:t};H.toFraction=function(r){var e,t,i,n,u,s,v,l,c,o,a,f,h=this,d=h.d,p=h.constructor;if(!d)return new p(h);if(c=t=new p(1),i=l=new p(0),e=new p(i),u=e.e=Pi(d)-h.e-1,s=u%hr,e.d[0]=Rr(10,s<0?hr+s:s),r==null)r=u>0?e:c;else{if(v=new p(r),!v.isInt()||v.lt(c))throw Error(ge+v);r=v.gt(e)?u>0?e:c:v}for(dr=!1,v=new p(Zr(d)),o=p.precision,p.precision=u=d.length*hr*2;a=Tr(v,e,0,1,1),n=t.plus(a.times(i)),n.cmp(r)!=1;)t=i,i=n,n=c,c=l.plus(a.times(n)),l=n,n=e,e=v.minus(a.times(n)),v=n;return n=Tr(r.minus(t),i,0,1,1),l=l.plus(n.times(c)),t=t.plus(n.times(i)),l.s=c.s=h.s,f=Tr(c,i,u,1).minus(h).abs().cmp(Tr(l,t,u,1).minus(h).abs())<1?[c,i]:[l,t],p.precision=o,dr=!0,f};H.toHexadecimal=H.toHex=function(r,e){return Wt(this,16,r,e)};H.toNearest=function(r,e){var t=this,i=t.constructor;if(t=new i(t),r==null){if(!t.d)return t;r=new i(1),e=i.rounding}else{if(r=new i(r),e===void 0?e=i.rounding:Wr(e,0,8),!t.d)return r.s?t:r;if(!r.d)return r.s&&(r.s=t.s),r}return r.d[0]?(dr=!1,t=Tr(t,r,0,e,1).times(r),dr=!0,vr(t)):(r.s=t.s,t=r),t};H.toNumber=function(){return+this};H.toOctal=function(r,e){return Wt(this,8,r,e)};H.toPower=H.pow=function(r){var e,t,i,n,u,s,v=this,l=v.constructor,c=+(r=new l(r));if(!v.d||!r.d||!v.d[0]||!r.d[0])return new l(Rr(+v,c));if(v=new l(v),v.eq(1))return v;if(i=l.precision,u=l.rounding,r.eq(1))return vr(v,i,u);if(e=Jr(r.e/hr),e>=r.d.length-1&&(t=c<0?-c:c)<=eo)return n=Ri(l,v,t,i),r.s<0?new l(1).div(n):vr(n,i,u);if(s=v.s,s<0){if(e<r.d.length-1)return new l(NaN);if(r.d[e]&1||(s=1),v.e==0&&v.d[0]==1&&v.d.length==1)return v.s=s,v}return t=Rr(+v,c),e=t==0||!isFinite(t)?Jr(c*(Math.log("0."+Zr(v.d))/Math.LN10+v.e+1)):new l(t+"").e,e>l.maxE+1||e<l.minE-1?new l(e>0?s/0:0):(dr=!1,l.rounding=v.s=1,t=Math.min(12,(e+"").length),n=Ut(r.times(me(v,i+t)),i),n.d&&(n=vr(n,i+5,1),Ve(n.d,i,u)&&(e=i+10,n=vr(Ut(r.times(me(v,e+t)),e),e+5,1),+Zr(n.d).slice(i+1,i+15)+1==1e14&&(n=vr(n,i+1,0)))),n.s=s,dr=!0,l.rounding=u,vr(n,i,u))};H.toPrecision=function(r,e){var t,i=this,n=i.constructor;return r===void 0?t=se(i,i.e<=n.toExpNeg||i.e>=n.toExpPos):(Wr(r,1,ye),e===void 0?e=n.rounding:Wr(e,0,8),i=vr(new n(i),r,e),t=se(i,r<=i.e||i.e<=n.toExpNeg,r)),i.isNeg()&&!i.isZero()?"-"+t:t};H.toSignificantDigits=H.toSD=function(r,e){var t=this,i=t.constructor;return r===void 0?(r=i.precision,e=i.rounding):(Wr(r,1,ye),e===void 0?e=i.rounding:Wr(e,0,8)),vr(new i(t),r,e)};H.toString=function(){var r=this,e=r.constructor,t=se(r,r.e<=e.toExpNeg||r.e>=e.toExpPos);return r.isNeg()&&!r.isZero()?"-"+t:t};H.truncated=H.trunc=function(){return vr(new this.constructor(this),this.e+1,1)};H.valueOf=H.toJSON=function(){var r=this,e=r.constructor,t=se(r,r.e<=e.toExpNeg||r.e>=e.toExpPos);return r.isNeg()?"-"+t:t};function Zr(r){var e,t,i,n=r.length-1,u="",s=r[0];if(n>0){for(u+=s,e=1;e<n;e++)i=r[e]+"",t=hr-i.length,t&&(u+=pe(t)),u+=i;s=r[e],i=s+"",t=hr-i.length,t&&(u+=pe(t))}else if(s===0)return"0";for(;s%10===0;)s/=10;return u+s}function Wr(r,e,t){if(r!==~~r||r<e||r>t)throw Error(ge+r)}function Ve(r,e,t,i){var n,u,s,v;for(u=r[0];u>=10;u/=10)--e;return--e<0?(e+=hr,n=0):(n=Math.ceil((e+1)/hr),e%=hr),u=Rr(10,hr-e),v=r[n]%u|0,i==null?e<3?(e==0?v=v/100|0:e==1&&(v=v/10|0),s=t<4&&v==99999||t>3&&v==49999||v==5e4||v==0):s=(t<4&&v+1==u||t>3&&v+1==u/2)&&(r[n+1]/u/100|0)==Rr(10,e-2)-1||(v==u/2||v==0)&&(r[n+1]/u/100|0)==0:e<4?(e==0?v=v/1e3|0:e==1?v=v/100|0:e==2&&(v=v/10|0),s=(i||t<4)&&v==9999||!i&&t>3&&v==4999):s=((i||t<4)&&v+1==u||!i&&t>3&&v+1==u/2)&&(r[n+1]/u/1e3|0)==Rr(10,e-3)-1,s}function nt(r,e,t){for(var i,n=[0],u,s=0,v=r.length;s<v;){for(u=n.length;u--;)n[u]*=e;for(n[0]+=qt.indexOf(r.charAt(s++)),i=0;i<n.length;i++)n[i]>t-1&&(n[i+1]===void 0&&(n[i+1]=0),n[i+1]+=n[i]/t|0,n[i]%=t)}return n.reverse()}function no(r,e){var t,i,n;if(e.isZero())return e;i=e.d.length,i<32?(t=Math.ceil(i/3),n=(1/Mt(4,t)).toString()):(t=16,n="2.3283064365386962890625e-10"),r.precision+=t,e=xe(r,1,e.times(n),new r(1));for(var u=t;u--;){var s=e.times(e);e=s.times(s).minus(s).times(8).plus(1)}return r.precision-=t,e}var Tr=function(){function r(i,n,u){var s,v=0,l=i.length;for(i=i.slice();l--;)s=i[l]*n+v,i[l]=s%u|0,v=s/u|0;return v&&i.unshift(v),i}function e(i,n,u,s){var v,l;if(u!=s)l=u>s?1:-1;else for(v=l=0;v<u;v++)if(i[v]!=n[v]){l=i[v]>n[v]?1:-1;break}return l}function t(i,n,u,s){for(var v=0;u--;)i[u]-=v,v=i[u]<n[u]?1:0,i[u]=v*s+i[u]-n[u];for(;!i[0]&&i.length>1;)i.shift()}return function(i,n,u,s,v,l){var c,o,a,f,h,d,p,g,D,E,y,C,A,m,b,F,w,_,M,B,O=i.constructor,z=i.s==n.s?1:-1,I=i.d,N=n.d;if(!I||!I[0]||!N||!N[0])return new O(!i.s||!n.s||(I?N&&I[0]==N[0]:!N)?NaN:I&&I[0]==0||!N?z*0:z/0);for(l?(h=1,o=i.e-n.e):(l=ue,h=hr,o=Jr(i.e/h)-Jr(n.e/h)),M=N.length,w=I.length,D=new O(z),E=D.d=[],a=0;N[a]==(I[a]||0);a++);if(N[a]>(I[a]||0)&&o--,u==null?(m=u=O.precision,s=O.rounding):v?m=u+(i.e-n.e)+1:m=u,m<0)E.push(1),d=!0;else{if(m=m/h+2|0,a=0,M==1){for(f=0,N=N[0],m++;(a<w||f)&&m--;a++)b=f*l+(I[a]||0),E[a]=b/N|0,f=b%N|0;d=f||a<w}else{for(f=l/(N[0]+1)|0,f>1&&(N=r(N,f,l),I=r(I,f,l),M=N.length,w=I.length),F=M,y=I.slice(0,M),C=y.length;C<M;)y[C++]=0;B=N.slice(),B.unshift(0),_=N[0],N[1]>=l/2&&++_;do f=0,c=e(N,y,M,C),c<0?(A=y[0],M!=C&&(A=A*l+(y[1]||0)),f=A/_|0,f>1?(f>=l&&(f=l-1),p=r(N,f,l),g=p.length,C=y.length,c=e(p,y,g,C),c==1&&(f--,t(p,M<g?B:N,g,l))):(f==0&&(c=f=1),p=N.slice()),g=p.length,g<C&&p.unshift(0),t(y,p,C,l),c==-1&&(C=y.length,c=e(N,y,M,C),c<1&&(f++,t(y,M<C?B:N,C,l))),C=y.length):c===0&&(f++,y=[0]),E[a++]=f,c&&y[0]?y[C++]=I[F]||0:(y=[I[F]],C=1);while((F++<w||y[0]!==void 0)&&m--);d=y[0]!==void 0}E[0]||E.shift()}if(h==1)D.e=o,zi=d;else{for(a=1,f=E[0];f>=10;f/=10)a++;D.e=a+o*h-1,vr(D,v?u+D.e+1:u,s,d)}return D}}();function vr(r,e,t,i){var n,u,s,v,l,c,o,a,f,h=r.constructor;r:if(e!=null){if(a=r.d,!a)return r;for(n=1,v=a[0];v>=10;v/=10)n++;if(u=e-n,u<0)u+=hr,s=e,o=a[f=0],l=o/Rr(10,n-s-1)%10|0;else if(f=Math.ceil((u+1)/hr),v=a.length,f>=v)if(i){for(;v++<=f;)a.push(0);o=l=0,n=1,u%=hr,s=u-hr+1}else break r;else{for(o=v=a[f],n=1;v>=10;v/=10)n++;u%=hr,s=u-hr+n,l=s<0?0:o/Rr(10,n-s-1)%10|0}if(i=i||e<0||a[f+1]!==void 0||(s<0?o:o%Rr(10,n-s-1)),c=t<4?(l||i)&&(t==0||t==(r.s<0?3:2)):l>5||l==5&&(t==4||i||t==6&&(u>0?s>0?o/Rr(10,n-s):0:a[f-1])%10&1||t==(r.s<0?8:7)),e<1||!a[0])return a.length=0,c?(e-=r.e+1,a[0]=Rr(10,(hr-e%hr)%hr),r.e=-e||0):a[0]=r.e=0,r;if(u==0?(a.length=f,v=1,f--):(a.length=f+1,v=Rr(10,hr-u),a[f]=s>0?(o/Rr(10,n-s)%Rr(10,s)|0)*v:0),c)for(;;)if(f==0){for(u=1,s=a[0];s>=10;s/=10)u++;for(s=a[0]+=v,v=1;s>=10;s/=10)v++;u!=v&&(r.e++,a[0]==ue&&(a[0]=1));break}else{if(a[f]+=v,a[f]!=ue)break;a[f--]=0,v=1}for(u=a.length;a[--u]===0;)a.pop()}return dr&&(r.e>h.maxE?(r.d=null,r.e=NaN):r.e<h.minE&&(r.e=0,r.d=[0])),r}function se(r,e,t){if(!r.isFinite())return Li(r);var i,n=r.e,u=Zr(r.d),s=u.length;return e?(t&&(i=t-s)>0?u=u.charAt(0)+"."+u.slice(1)+pe(i):s>1&&(u=u.charAt(0)+"."+u.slice(1)),u=u+(r.e<0?"e":"e+")+r.e):n<0?(u="0."+pe(-n-1)+u,t&&(i=t-s)>0&&(u+=pe(i))):n>=s?(u+=pe(n+1-s),t&&(i=t-n-1)>0&&(u=u+"."+pe(i))):((i=n+1)<s&&(u=u.slice(0,i)+"."+u.slice(i)),t&&(i=t-s)>0&&(n+1===s&&(u+="."),u+=pe(i))),u}function _t(r,e){var t=r[0];for(e*=hr;t>=10;t/=10)e++;return e}function vt(r,e,t){if(e>to)throw dr=!0,t&&(r.precision=t),Error(Oi);return vr(new r(ct),e,1,!0)}function ie(r,e,t){if(e>Rt)throw Error(Oi);return vr(new r(lt),e,t,!0)}function Pi(r){var e=r.length-1,t=e*hr+1;if(e=r[e],e){for(;e%10==0;e/=10)t--;for(e=r[0];e>=10;e/=10)t++}return t}function pe(r){for(var e="";r--;)e+="0";return e}function Ri(r,e,t,i){var n,u=new r(1),s=Math.ceil(i/hr+4);for(dr=!1;;){if(t%2&&(u=u.times(e),Dn(u.d,s)&&(n=!0)),t=Jr(t/2),t===0){t=u.d.length-1,n&&u.d[t]===0&&++u.d[t];break}e=e.times(e),Dn(e.d,s)}return dr=!0,u}function mn(r){return r.d[r.d.length-1]&1}function Ui(r,e,t){for(var i,n=new r(e[0]),u=0;++u<e.length;)if(i=new r(e[u]),i.s)n[t](i)&&(n=i);else{n=i;break}return n}function Ut(r,e){var t,i,n,u,s,v,l,c=0,o=0,a=0,f=r.constructor,h=f.rounding,d=f.precision;if(!r.d||!r.d[0]||r.e>17)return new f(r.d?r.d[0]?r.s<0?0:1/0:1:r.s?r.s<0?0:r:NaN);for(e==null?(dr=!1,l=d):l=e,v=new f(.03125);r.e>-2;)r=r.times(v),a+=5;for(i=Math.log(Rr(2,a))/Math.LN10*2+5|0,l+=i,t=u=s=new f(1),f.precision=l;;){if(u=vr(u.times(r),l,1),t=t.times(++o),v=s.plus(Tr(u,t,l,1)),Zr(v.d).slice(0,l)===Zr(s.d).slice(0,l)){for(n=a;n--;)s=vr(s.times(s),l,1);if(e==null)if(c<3&&Ve(s.d,l-i,h,c))f.precision=l+=10,t=u=v=new f(1),o=0,c++;else return vr(s,f.precision=d,h,dr=!0);else return f.precision=d,s}s=v}}function me(r,e){var t,i,n,u,s,v,l,c,o,a,f,h=1,d=10,p=r,g=p.d,D=p.constructor,E=D.rounding,y=D.precision;if(p.s<0||!g||!g[0]||!p.e&&g[0]==1&&g.length==1)return new D(g&&!g[0]?-1/0:p.s!=1?NaN:g?0:p);if(e==null?(dr=!1,o=y):o=e,D.precision=o+=d,t=Zr(g),i=t.charAt(0),Math.abs(u=p.e)<15e14){for(;i<7&&i!=1||i==1&&t.charAt(1)>3;)p=p.times(r),t=Zr(p.d),i=t.charAt(0),h++;u=p.e,i>1?(p=new D("0."+t),u++):p=new D(i+"."+t.slice(1))}else return c=vt(D,o+2,y).times(u+""),p=me(new D(i+"."+t.slice(1)),o-d).plus(c),D.precision=y,e==null?vr(p,y,E,dr=!0):p;for(a=p,l=s=p=Tr(p.minus(1),p.plus(1),o,1),f=vr(p.times(p),o,1),n=3;;){if(s=vr(s.times(f),o,1),c=l.plus(Tr(s,new D(n),o,1)),Zr(c.d).slice(0,o)===Zr(l.d).slice(0,o))if(l=l.times(2),u!==0&&(l=l.plus(vt(D,o+2,y).times(u+""))),l=Tr(l,new D(h),o,1),e==null)if(Ve(l.d,o-d,E,v))D.precision=o+=d,c=s=p=Tr(a.minus(1),a.plus(1),o,1),f=vr(p.times(p),o,1),n=v=1;else return vr(l,D.precision=y,E,dr=!0);else return D.precision=y,l;l=c,n+=2}}function Li(r){return String(r.s*r.s/0)}function Lt(r,e){var t,i,n;for((t=e.indexOf("."))>-1&&(e=e.replace(".","")),(i=e.search(/e/i))>0?(t<0&&(t=i),t+=+e.slice(i+1),e=e.substring(0,i)):t<0&&(t=e.length),i=0;e.charCodeAt(i)===48;i++);for(n=e.length;e.charCodeAt(n-1)===48;--n);if(e=e.slice(i,n),e){if(n-=i,r.e=t=t-i-1,r.d=[],i=(t+1)%hr,t<0&&(i+=hr),i<n){for(i&&r.d.push(+e.slice(0,i)),n-=hr;i<n;)r.d.push(+e.slice(i,i+=hr));e=e.slice(i),i=hr-e.length}else i-=n;for(;i--;)e+="0";r.d.push(+e),dr&&(r.e>r.constructor.maxE?(r.d=null,r.e=NaN):r.e<r.constructor.minE&&(r.e=0,r.d=[0]))}else r.e=0,r.d=[0];return r}function io(r,e){var t,i,n,u,s,v,l,c,o;if(e.indexOf("_")>-1){if(e=e.replace(/(\d)_(?=\d)/g,"$1"),qi.test(e))return Lt(r,e)}else if(e==="Infinity"||e==="NaN")return+e||(r.s=NaN),r.e=NaN,r.d=null,r;if(ju.test(e))t=16,e=e.toLowerCase();else if(ku.test(e))t=2;else if(ro.test(e))t=8;else throw Error(ge+e);for(u=e.search(/p/i),u>0?(l=+e.slice(u+1),e=e.substring(2,u)):e=e.slice(2),u=e.indexOf("."),s=u>=0,i=r.constructor,s&&(e=e.replace(".",""),v=e.length,u=v-u,n=Ri(i,new i(t),u,u*2)),c=nt(e,t,ue),o=c.length-1,u=o;c[u]===0;--u)c.pop();return u<0?new i(r.s*0):(r.e=_t(c,o),r.d=c,dr=!1,s&&(r=Tr(r,n,v*4)),l&&(r=r.times(Math.abs(l)<54?Rr(2,l):Te.pow(2,l))),dr=!0,r)}function ao(r,e){var t,i=e.d.length;if(i<3)return e.isZero()?e:xe(r,2,e,e);t=1.4*Math.sqrt(i),t=t>16?16:t|0,e=e.times(1/Mt(5,t)),e=xe(r,2,e,e);for(var n,u=new r(5),s=new r(16),v=new r(20);t--;)n=e.times(e),e=e.times(u.plus(n.times(s.times(n).minus(v))));return e}function xe(r,e,t,i,n){var u,s,v,l,c=r.precision,o=Math.ceil(c/hr);for(dr=!1,l=t.times(t),v=new r(i);;){if(s=Tr(v.times(l),new r(e++*e++),c,1),v=n?i.plus(s):i.minus(s),i=Tr(s.times(l),new r(e++*e++),c,1),s=v.plus(i),s.d[o]!==void 0){for(u=o;s.d[u]===v.d[u]&&u--;);if(u==-1)break}u=v,v=i,i=s,s=u}return dr=!0,s.d.length=o+1,s}function Mt(r,e){for(var t=r;--e;)t*=r;return t}function Zi(r,e){var t,i=e.s<0,n=ie(r,r.precision,1),u=n.times(.5);if(e=e.abs(),e.lte(u))return ce=i?4:1,e;if(t=e.divToInt(n),t.isZero())ce=i?3:2;else{if(e=e.minus(t.times(n)),e.lte(u))return ce=mn(t)?i?2:3:i?4:1,e;ce=mn(t)?i?1:4:i?3:2}return e.minus(n).abs()}function Wt(r,e,t,i){var n,u,s,v,l,c,o,a,f,h=r.constructor,d=t!==void 0;if(d?(Wr(t,1,ye),i===void 0?i=h.rounding:Wr(i,0,8)):(t=h.precision,i=h.rounding),!r.isFinite())o=Li(r);else{for(o=se(r),s=o.indexOf("."),d?(n=2,e==16?t=t*4-3:e==8&&(t=t*3-2)):n=e,s>=0&&(o=o.replace(".",""),f=new h(1),f.e=o.length-s,f.d=nt(se(f),10,n),f.e=f.d.length),a=nt(o,10,n),u=l=a.length;a[--l]==0;)a.pop();if(!a[0])o=d?"0p+0":"0";else{if(s<0?u--:(r=new h(r),r.d=a,r.e=u,r=Tr(r,f,t,i,0,n),a=r.d,u=r.e,c=zi),s=a[t],v=n/2,c=c||a[t+1]!==void 0,c=i<4?(s!==void 0||c)&&(i===0||i===(r.s<0?3:2)):s>v||s===v&&(i===4||c||i===6&&a[t-1]&1||i===(r.s<0?8:7)),a.length=t,c)for(;++a[--t]>n-1;)a[t]=0,t||(++u,a.unshift(1));for(l=a.length;!a[l-1];--l);for(s=0,o="";s<l;s++)o+=qt.charAt(a[s]);if(d){if(l>1)if(e==16||e==8){for(s=e==16?4:3,--l;l%s;l++)o+="0";for(a=nt(o,n,e),l=a.length;!a[l-1];--l);for(s=1,o="1.";s<l;s++)o+=qt.charAt(a[s])}else o=o.charAt(0)+"."+o.slice(1);o=o+(u<0?"p":"p+")+u}else if(u<0){for(;++u;)o="0"+o;o="0."+o}else if(++u>l)for(u-=l;u--;)o+="0";else u<l&&(o=o.slice(0,u)+"."+o.slice(u))}o=(e==16?"0x":e==2?"0b":e==8?"0o":"")+o}return r.s<0?"-"+o:o}function Dn(r,e){if(r.length>e)return r.length=e,!0}function uo(r){return new this(r).abs()}function oo(r){return new this(r).acos()}function so(r){return new this(r).acosh()}function fo(r,e){return new this(r).plus(e)}function co(r){return new this(r).asin()}function lo(r){return new this(r).asinh()}function vo(r){return new this(r).atan()}function ho(r){return new this(r).atanh()}function po(r,e){r=new this(r),e=new this(e);var t,i=this.precision,n=this.rounding,u=i+4;return!r.s||!e.s?t=new this(NaN):!r.d&&!e.d?(t=ie(this,u,1).times(e.s>0?.25:.75),t.s=r.s):!e.d||r.isZero()?(t=e.s<0?ie(this,i,n):new this(0),t.s=r.s):!r.d||e.isZero()?(t=ie(this,u,1).times(.5),t.s=r.s):e.s<0?(this.precision=u,this.rounding=1,t=this.atan(Tr(r,e,u,1)),e=ie(this,u,1),this.precision=i,this.rounding=n,t=r.s<0?t.minus(e):t.plus(e)):t=this.atan(Tr(r,e,u,1)),t}function mo(r){return new this(r).cbrt()}function Do(r){return vr(r=new this(r),r.e+1,2)}function go(r,e,t){return new this(r).clamp(e,t)}function yo(r){if(!r||typeof r!="object")throw Error(bt+"Object expected");var e,t,i,n=r.defaults===!0,u=["precision",1,ye,"rounding",0,8,"toExpNeg",-Me,0,"toExpPos",0,Me,"maxE",0,Me,"minE",-Me,0,"modulo",0,9];for(e=0;e<u.length;e+=3)if(t=u[e],n&&(this[t]=Pt[t]),(i=r[t])!==void 0)if(Jr(i)===i&&i>=u[e+1]&&i<=u[e+2])this[t]=i;else throw Error(ge+t+": "+i);if(t="crypto",n&&(this[t]=Pt[t]),(i=r[t])!==void 0)if(i===!0||i===!1||i===0||i===1)if(i)if(typeof crypto<"u"&&crypto&&(crypto.getRandomValues||crypto.randomBytes))this[t]=!0;else throw Error(Ii);else this[t]=!1;else throw Error(ge+t+": "+i);return this}function wo(r){return new this(r).cos()}function Ao(r){return new this(r).cosh()}function Vi(r){var e,t,i;function n(u){var s,v,l,c=this;if(!(c instanceof n))return new n(u);if(c.constructor=n,gn(u)){c.s=u.s,dr?!u.d||u.e>n.maxE?(c.e=NaN,c.d=null):u.e<n.minE?(c.e=0,c.d=[0]):(c.e=u.e,c.d=u.d.slice()):(c.e=u.e,c.d=u.d?u.d.slice():u.d);return}if(l=typeof u,l==="number"){if(u===0){c.s=1/u<0?-1:1,c.e=0,c.d=[0];return}if(u<0?(u=-u,c.s=-1):c.s=1,u===~~u&&u<1e7){for(s=0,v=u;v>=10;v/=10)s++;dr?s>n.maxE?(c.e=NaN,c.d=null):s<n.minE?(c.e=0,c.d=[0]):(c.e=s,c.d=[u]):(c.e=s,c.d=[u]);return}else if(u*0!==0){u||(c.s=NaN),c.e=NaN,c.d=null;return}return Lt(c,u.toString())}else if(l!=="string")throw Error(ge+u);return(v=u.charCodeAt(0))===45?(u=u.slice(1),c.s=-1):(v===43&&(u=u.slice(1)),c.s=1),qi.test(u)?Lt(c,u):io(c,u)}if(n.prototype=H,n.ROUND_UP=0,n.ROUND_DOWN=1,n.ROUND_CEIL=2,n.ROUND_FLOOR=3,n.ROUND_HALF_UP=4,n.ROUND_HALF_DOWN=5,n.ROUND_HALF_EVEN=6,n.ROUND_HALF_CEIL=7,n.ROUND_HALF_FLOOR=8,n.EUCLID=9,n.config=n.set=yo,n.clone=Vi,n.isDecimal=gn,n.abs=uo,n.acos=oo,n.acosh=so,n.add=fo,n.asin=co,n.asinh=lo,n.atan=vo,n.atanh=ho,n.atan2=po,n.cbrt=mo,n.ceil=Do,n.clamp=go,n.cos=wo,n.cosh=Ao,n.div=Eo,n.exp=Fo,n.floor=Co,n.hypot=bo,n.ln=_o,n.log=Mo,n.log10=Bo,n.log2=So,n.max=No,n.min=xo,n.mod=To,n.mul=zo,n.pow=Oo,n.random=Io,n.round=$o,n.sign=qo,n.sin=Po,n.sinh=Ro,n.sqrt=Uo,n.sub=Lo,n.sum=Zo,n.tan=Vo,n.tanh=Yo,n.trunc=Jo,r===void 0&&(r={}),r&&r.defaults!==!0)for(i=["precision","rounding","toExpNeg","toExpPos","maxE","minE","modulo","crypto"],e=0;e<i.length;)r.hasOwnProperty(t=i[e++])||(r[t]=this[t]);return n.config(r),n}function Eo(r,e){return new this(r).div(e)}function Fo(r){return new this(r).exp()}function Co(r){return vr(r=new this(r),r.e+1,3)}function bo(){var r,e,t=new this(0);for(dr=!1,r=0;r<arguments.length;)if(e=new this(arguments[r++]),e.d)t.d&&(t=t.plus(e.times(e)));else{if(e.s)return dr=!0,new this(1/0);t=e}return dr=!0,t.sqrt()}function gn(r){return r instanceof Te||r&&r.toStringTag===$i||!1}function _o(r){return new this(r).ln()}function Mo(r,e){return new this(r).log(e)}function So(r){return new this(r).log(2)}function Bo(r){return new this(r).log(10)}function No(){return Ui(this,arguments,"lt")}function xo(){return Ui(this,arguments,"gt")}function To(r,e){return new this(r).mod(e)}function zo(r,e){return new this(r).mul(e)}function Oo(r,e){return new this(r).pow(e)}function Io(r){var e,t,i,n,u=0,s=new this(1),v=[];if(r===void 0?r=this.precision:Wr(r,1,ye),i=Math.ceil(r/hr),this.crypto)if(crypto.getRandomValues)for(e=crypto.getRandomValues(new Uint32Array(i));u<i;)n=e[u],n>=429e7?e[u]=crypto.getRandomValues(new Uint32Array(1))[0]:v[u++]=n%1e7;else if(crypto.randomBytes){for(e=crypto.randomBytes(i*=4);u<i;)n=e[u]+(e[u+1]<<8)+(e[u+2]<<16)+((e[u+3]&127)<<24),n>=214e7?crypto.randomBytes(4).copy(e,u):(v.push(n%1e7),u+=4);u=i/4}else throw Error(Ii);else for(;u<i;)v[u++]=Math.random()*1e7|0;for(i=v[--u],r%=hr,i&&r&&(n=Rr(10,hr-r),v[u]=(i/n|0)*n);v[u]===0;u--)v.pop();if(u<0)t=0,v=[0];else{for(t=-1;v[0]===0;t-=hr)v.shift();for(i=1,n=v[0];n>=10;n/=10)i++;i<hr&&(t-=hr-i)}return s.e=t,s.d=v,s}function $o(r){return vr(r=new this(r),r.e+1,this.rounding)}function qo(r){return r=new this(r),r.d?r.d[0]?r.s:0*r.s:r.s||NaN}function Po(r){return new this(r).sin()}function Ro(r){return new this(r).sinh()}function Uo(r){return new this(r).sqrt()}function Lo(r,e){return new this(r).sub(e)}function Zo(){var r=0,e=arguments,t=new this(e[r]);for(dr=!1;t.s&&++r<e.length;)t=t.plus(e[r]);return dr=!0,vr(t,this.precision,this.rounding)}function Vo(r){return new this(r).tan()}function Yo(r){return new this(r).tanh()}function Jo(r){return vr(r=new this(r),r.e+1,1)}H[Symbol.for("nodejs.util.inspect.custom")]=H.toString;H[Symbol.toStringTag]="Decimal";var Te=H.constructor=Vi(Pt);ct=new Te(ct);lt=new Te(lt);var Go="BigNumber",Qo=["?on","config"],Xo=rr(Go,Qo,r=>{var{on:e,config:t}=r,i=Te.clone({precision:t.precision,modulo:Te.EUCLID});return i.prototype=Object.create(i.prototype),i.prototype.type="BigNumber",i.prototype.isBigNumber=!0,i.prototype.toJSON=function(){return{mathjs:"BigNumber",value:this.toString()}},i.fromJSON=function(n){return new i(n.value)},e&&e("config",function(n,u){n.precision!==u.precision&&i.config({precision:n.precision})}),i},{isClass:!0});function Ko(r){return r&&r.__esModule&&Object.prototype.hasOwnProperty.call(r,"default")?r.default:r}var Yi={exports:{}};/**
 * @license Complex.js v2.1.1 12/05/2020
 *
 * Copyright (c) 2020, Robert Eisele (robert@xarg.org)
 * Dual licensed under the MIT or GPL Version 2 licenses.
 **/(function(r,e){(function(t){var i=Math.cosh||function(a){return Math.abs(a)<1e-9?1-a:(Math.exp(a)+Math.exp(-a))*.5},n=Math.sinh||function(a){return Math.abs(a)<1e-9?a:(Math.exp(a)-Math.exp(-a))*.5},u=function(a){var f=Math.PI/4;if(-f>a||a>f)return Math.cos(a)-1;var h=a*a;return h*(h*(h*(h*(h*(h*(h*(h/20922789888e3-1/87178291200)+1/479001600)-1/3628800)+1/40320)-1/720)+1/24)-1/2)},s=function(a,f){var h=Math.abs(a),d=Math.abs(f);return h<3e3&&d<3e3?Math.sqrt(h*h+d*d):(h<d?(h=d,d=a/f):d=f/a,h*Math.sqrt(1+d*d))},v=function(){throw SyntaxError("Invalid Param")};function l(a,f){var h=Math.abs(a),d=Math.abs(f);return a===0?Math.log(d):f===0?Math.log(h):h<3e3&&d<3e3?Math.log(a*a+f*f)*.5:(a=a/2,f=f/2,.5*Math.log(a*a+f*f)+Math.LN2)}var c=function(a,f){var h={re:0,im:0};if(a==null)h.re=h.im=0;else if(f!==void 0)h.re=a,h.im=f;else switch(typeof a){case"object":if("im"in a&&"re"in a)h.re=a.re,h.im=a.im;else if("abs"in a&&"arg"in a){if(!Number.isFinite(a.abs)&&Number.isFinite(a.arg))return o.INFINITY;h.re=a.abs*Math.cos(a.arg),h.im=a.abs*Math.sin(a.arg)}else if("r"in a&&"phi"in a){if(!Number.isFinite(a.r)&&Number.isFinite(a.phi))return o.INFINITY;h.re=a.r*Math.cos(a.phi),h.im=a.r*Math.sin(a.phi)}else a.length===2?(h.re=a[0],h.im=a[1]):v();break;case"string":h.im=h.re=0;var d=a.match(/\d+\.?\d*e[+-]?\d+|\d+\.?\d*|\.\d+|./g),p=1,g=0;d===null&&v();for(var D=0;D<d.length;D++){var E=d[D];E===" "||E==="	"||E===`
`||(E==="+"?p++:E==="-"?g++:E==="i"||E==="I"?(p+g===0&&v(),d[D+1]!==" "&&!isNaN(d[D+1])?(h.im+=parseFloat((g%2?"-":"")+d[D+1]),D++):h.im+=parseFloat((g%2?"-":"")+"1"),p=g=0):((p+g===0||isNaN(E))&&v(),d[D+1]==="i"||d[D+1]==="I"?(h.im+=parseFloat((g%2?"-":"")+E),D++):h.re+=parseFloat((g%2?"-":"")+E),p=g=0))}p+g>0&&v();break;case"number":h.im=0,h.re=a;break;default:v()}return isNaN(h.re)||isNaN(h.im),h};function o(a,f){if(!(this instanceof o))return new o(a,f);var h=c(a,f);this.re=h.re,this.im=h.im}o.prototype={re:0,im:0,sign:function(){var a=this.abs();return new o(this.re/a,this.im/a)},add:function(a,f){var h=new o(a,f);return this.isInfinite()&&h.isInfinite()?o.NAN:this.isInfinite()||h.isInfinite()?o.INFINITY:new o(this.re+h.re,this.im+h.im)},sub:function(a,f){var h=new o(a,f);return this.isInfinite()&&h.isInfinite()?o.NAN:this.isInfinite()||h.isInfinite()?o.INFINITY:new o(this.re-h.re,this.im-h.im)},mul:function(a,f){var h=new o(a,f);return this.isInfinite()&&h.isZero()||this.isZero()&&h.isInfinite()?o.NAN:this.isInfinite()||h.isInfinite()?o.INFINITY:h.im===0&&this.im===0?new o(this.re*h.re,0):new o(this.re*h.re-this.im*h.im,this.re*h.im+this.im*h.re)},div:function(a,f){var h=new o(a,f);if(this.isZero()&&h.isZero()||this.isInfinite()&&h.isInfinite())return o.NAN;if(this.isInfinite()||h.isZero())return o.INFINITY;if(this.isZero()||h.isInfinite())return o.ZERO;a=this.re,f=this.im;var d=h.re,p=h.im,g,D;return p===0?new o(a/d,f/d):Math.abs(d)<Math.abs(p)?(D=d/p,g=d*D+p,new o((a*D+f)/g,(f*D-a)/g)):(D=p/d,g=p*D+d,new o((a+f*D)/g,(f-a*D)/g))},pow:function(a,f){var h=new o(a,f);if(a=this.re,f=this.im,h.isZero())return o.ONE;if(h.im===0){if(f===0&&a>0)return new o(Math.pow(a,h.re),0);if(a===0)switch((h.re%4+4)%4){case 0:return new o(Math.pow(f,h.re),0);case 1:return new o(0,Math.pow(f,h.re));case 2:return new o(-Math.pow(f,h.re),0);case 3:return new o(0,-Math.pow(f,h.re))}}if(a===0&&f===0&&h.re>0&&h.im>=0)return o.ZERO;var d=Math.atan2(f,a),p=l(a,f);return a=Math.exp(h.re*p-h.im*d),f=h.im*p+h.re*d,new o(a*Math.cos(f),a*Math.sin(f))},sqrt:function(){var a=this.re,f=this.im,h=this.abs(),d,p;if(a>=0){if(f===0)return new o(Math.sqrt(a),0);d=.5*Math.sqrt(2*(h+a))}else d=Math.abs(f)/Math.sqrt(2*(h-a));return a<=0?p=.5*Math.sqrt(2*(h-a)):p=Math.abs(f)/Math.sqrt(2*(h+a)),new o(d,f<0?-p:p)},exp:function(){var a=Math.exp(this.re);return this.im,new o(a*Math.cos(this.im),a*Math.sin(this.im))},expm1:function(){var a=this.re,f=this.im;return new o(Math.expm1(a)*Math.cos(f)+u(f),Math.exp(a)*Math.sin(f))},log:function(){var a=this.re,f=this.im;return new o(l(a,f),Math.atan2(f,a))},abs:function(){return s(this.re,this.im)},arg:function(){return Math.atan2(this.im,this.re)},sin:function(){var a=this.re,f=this.im;return new o(Math.sin(a)*i(f),Math.cos(a)*n(f))},cos:function(){var a=this.re,f=this.im;return new o(Math.cos(a)*i(f),-Math.sin(a)*n(f))},tan:function(){var a=2*this.re,f=2*this.im,h=Math.cos(a)+i(f);return new o(Math.sin(a)/h,n(f)/h)},cot:function(){var a=2*this.re,f=2*this.im,h=Math.cos(a)-i(f);return new o(-Math.sin(a)/h,n(f)/h)},sec:function(){var a=this.re,f=this.im,h=.5*i(2*f)+.5*Math.cos(2*a);return new o(Math.cos(a)*i(f)/h,Math.sin(a)*n(f)/h)},csc:function(){var a=this.re,f=this.im,h=.5*i(2*f)-.5*Math.cos(2*a);return new o(Math.sin(a)*i(f)/h,-Math.cos(a)*n(f)/h)},asin:function(){var a=this.re,f=this.im,h=new o(f*f-a*a+1,-2*a*f).sqrt(),d=new o(h.re-f,h.im+a).log();return new o(d.im,-d.re)},acos:function(){var a=this.re,f=this.im,h=new o(f*f-a*a+1,-2*a*f).sqrt(),d=new o(h.re-f,h.im+a).log();return new o(Math.PI/2-d.im,d.re)},atan:function(){var a=this.re,f=this.im;if(a===0){if(f===1)return new o(0,1/0);if(f===-1)return new o(0,-1/0)}var h=a*a+(1-f)*(1-f),d=new o((1-f*f-a*a)/h,-2*a/h).log();return new o(-.5*d.im,.5*d.re)},acot:function(){var a=this.re,f=this.im;if(f===0)return new o(Math.atan2(1,a),0);var h=a*a+f*f;return h!==0?new o(a/h,-f/h).atan():new o(a!==0?a/0:0,f!==0?-f/0:0).atan()},asec:function(){var a=this.re,f=this.im;if(a===0&&f===0)return new o(0,1/0);var h=a*a+f*f;return h!==0?new o(a/h,-f/h).acos():new o(a!==0?a/0:0,f!==0?-f/0:0).acos()},acsc:function(){var a=this.re,f=this.im;if(a===0&&f===0)return new o(Math.PI/2,1/0);var h=a*a+f*f;return h!==0?new o(a/h,-f/h).asin():new o(a!==0?a/0:0,f!==0?-f/0:0).asin()},sinh:function(){var a=this.re,f=this.im;return new o(n(a)*Math.cos(f),i(a)*Math.sin(f))},cosh:function(){var a=this.re,f=this.im;return new o(i(a)*Math.cos(f),n(a)*Math.sin(f))},tanh:function(){var a=2*this.re,f=2*this.im,h=i(a)+Math.cos(f);return new o(n(a)/h,Math.sin(f)/h)},coth:function(){var a=2*this.re,f=2*this.im,h=i(a)-Math.cos(f);return new o(n(a)/h,-Math.sin(f)/h)},csch:function(){var a=this.re,f=this.im,h=Math.cos(2*f)-i(2*a);return new o(-2*n(a)*Math.cos(f)/h,2*i(a)*Math.sin(f)/h)},sech:function(){var a=this.re,f=this.im,h=Math.cos(2*f)+i(2*a);return new o(2*i(a)*Math.cos(f)/h,-2*n(a)*Math.sin(f)/h)},asinh:function(){var a=this.im;this.im=-this.re,this.re=a;var f=this.asin();return this.re=-this.im,this.im=a,a=f.re,f.re=-f.im,f.im=a,f},acosh:function(){var a=this.acos();if(a.im<=0){var f=a.re;a.re=-a.im,a.im=f}else{var f=a.im;a.im=-a.re,a.re=f}return a},atanh:function(){var a=this.re,f=this.im,h=a>1&&f===0,d=1-a,p=1+a,g=d*d+f*f,D=g!==0?new o((p*d-f*f)/g,(f*d+p*f)/g):new o(a!==-1?a/0:0,f!==0?f/0:0),E=D.re;return D.re=l(D.re,D.im)/2,D.im=Math.atan2(D.im,E)/2,h&&(D.im=-D.im),D},acoth:function(){var a=this.re,f=this.im;if(a===0&&f===0)return new o(0,Math.PI/2);var h=a*a+f*f;return h!==0?new o(a/h,-f/h).atanh():new o(a!==0?a/0:0,f!==0?-f/0:0).atanh()},acsch:function(){var a=this.re,f=this.im;if(f===0)return new o(a!==0?Math.log(a+Math.sqrt(a*a+1)):1/0,0);var h=a*a+f*f;return h!==0?new o(a/h,-f/h).asinh():new o(a!==0?a/0:0,f!==0?-f/0:0).asinh()},asech:function(){var a=this.re,f=this.im;if(this.isZero())return o.INFINITY;var h=a*a+f*f;return h!==0?new o(a/h,-f/h).acosh():new o(a!==0?a/0:0,f!==0?-f/0:0).acosh()},inverse:function(){if(this.isZero())return o.INFINITY;if(this.isInfinite())return o.ZERO;var a=this.re,f=this.im,h=a*a+f*f;return new o(a/h,-f/h)},conjugate:function(){return new o(this.re,-this.im)},neg:function(){return new o(-this.re,-this.im)},ceil:function(a){return a=Math.pow(10,a||0),new o(Math.ceil(this.re*a)/a,Math.ceil(this.im*a)/a)},floor:function(a){return a=Math.pow(10,a||0),new o(Math.floor(this.re*a)/a,Math.floor(this.im*a)/a)},round:function(a){return a=Math.pow(10,a||0),new o(Math.round(this.re*a)/a,Math.round(this.im*a)/a)},equals:function(a,f){var h=new o(a,f);return Math.abs(h.re-this.re)<=o.EPSILON&&Math.abs(h.im-this.im)<=o.EPSILON},clone:function(){return new o(this.re,this.im)},toString:function(){var a=this.re,f=this.im,h="";return this.isNaN()?"NaN":this.isInfinite()?"Infinity":(Math.abs(a)<o.EPSILON&&(a=0),Math.abs(f)<o.EPSILON&&(f=0),f===0?h+a:(a!==0?(h+=a,h+=" ",f<0?(f=-f,h+="-"):h+="+",h+=" "):f<0&&(f=-f,h+="-"),f!==1&&(h+=f),h+"i"))},toVector:function(){return[this.re,this.im]},valueOf:function(){return this.im===0?this.re:null},isNaN:function(){return isNaN(this.re)||isNaN(this.im)},isZero:function(){return this.im===0&&this.re===0},isFinite:function(){return isFinite(this.re)&&isFinite(this.im)},isInfinite:function(){return!(this.isNaN()||this.isFinite())}},o.ZERO=new o(0,0),o.ONE=new o(1,0),o.I=new o(0,1),o.PI=new o(Math.PI,0),o.E=new o(Math.E,0),o.INFINITY=new o(1/0,1/0),o.NAN=new o(NaN,NaN),o.EPSILON=1e-15,Object.defineProperty(o,"__esModule",{value:!0}),o.default=o,o.Complex=o,r.exports=o})()})(Yi);var Wo=Yi.exports;const Lr=Ko(Wo);var Ho="Complex",ko=[],jo=rr(Ho,ko,()=>(Object.defineProperty(Lr,"name",{value:"Complex"}),Lr.prototype.constructor=Lr,Lr.prototype.type="Complex",Lr.prototype.isComplex=!0,Lr.prototype.toJSON=function(){return{mathjs:"Complex",re:this.re,im:this.im}},Lr.prototype.toPolar=function(){return{r:this.abs(),phi:this.arg()}},Lr.prototype.format=function(r){var e="",t=this.im,i=this.re,n=$t(this.re,r),u=$t(this.im,r),s=Nr(r)?r:r?r.precision:null;if(s!==null){var v=Math.pow(10,-s);Math.abs(i/t)<v&&(i=0),Math.abs(t/i)<v&&(t=0)}return t===0?e=n:i===0?t===1?e="i":t===-1?e="-i":e=u+"i":t<0?t===-1?e=n+" - i":e=n+" - "+u.substring(1)+"i":t===1?e=n+" + i":e=n+" + "+u+"i",e},Lr.fromPolar=function(r){switch(arguments.length){case 1:{var e=arguments[0];if(typeof e=="object")return Lr(e);throw new TypeError("Input has to be an object with r and phi keys.")}case 2:{var t=arguments[0],i=arguments[1];if(Nr(t)){if(bi(i)&&i.hasBase("ANGLE")&&(i=i.toNumber("rad")),Nr(i))return new Lr({r:t,phi:i});throw new TypeError("Phi is not a number nor an angle unit.")}else throw new TypeError("Radius r is not a number.")}default:throw new SyntaxError("Wrong number of arguments in function fromPolar")}},Lr.prototype.valueOf=Lr.prototype.toString,Lr.fromJSON=function(r){return new Lr(r)},Lr.compare=function(r,e){return r.re>e.re?1:r.re<e.re?-1:r.im>e.im?1:r.im<e.im?-1:0},Lr),{isClass:!0});/**
 * @license Fraction.js v4.3.7 31/08/2023
 * https://www.xarg.org/2014/03/rational-numbers-in-javascript/
 *
 * Copyright (c) 2023, Robert Eisele (robert@raw.org)
 * Dual licensed under the MIT or GPL Version 2 licenses.
 **/var rs=2e3,sr={s:1,n:0,d:1};function fe(r,e){if(isNaN(r=parseInt(r,10)))throw it();return r*e}function $r(r,e){if(e===0)throw Ht();var t=Object.create(Yr.prototype);t.s=r<0?-1:1,r=r<0?-r:r;var i=Se(r,e);return t.n=r/i,t.d=e/i,t}function yn(r){for(var e={},t=r,i=2,n=4;n<=t;){for(;t%i===0;)t/=i,e[i]=(e[i]||0)+1;n+=1+2*i++}return t!==r?t>1&&(e[t]=(e[t]||0)+1):e[r]=(e[r]||0)+1,e}var kr=function(r,e){var t=0,i=1,n=1,u=0,s=0,v=0,l=1,c=1,o=0,a=1,f=1,h=1,d=1e7,p;if(r!=null)if(e!==void 0){if(t=r,i=e,n=t*i,t%1!==0||i%1!==0)throw is()}else switch(typeof r){case"object":{if("d"in r&&"n"in r)t=r.n,i=r.d,"s"in r&&(t*=r.s);else if(0 in r)t=r[0],1 in r&&(i=r[1]);else throw it();n=t*i;break}case"number":{if(r<0&&(n=r,r=-r),r%1===0)t=r;else if(r>0){for(r>=1&&(c=Math.pow(10,Math.floor(1+Math.log(r)/Math.LN10)),r/=c);a<=d&&h<=d;)if(p=(o+f)/(a+h),r===p){a+h<=d?(t=o+f,i=a+h):h>a?(t=f,i=h):(t=o,i=a);break}else r>p?(o+=f,a+=h):(f+=o,h+=a),a>d?(t=f,i=h):(t=o,i=a);t*=c}else(isNaN(r)||isNaN(e))&&(i=t=NaN);break}case"string":{if(a=r.match(/\d+|./g),a===null)throw it();if(a[o]==="-"?(n=-1,o++):a[o]==="+"&&o++,a.length===o+1?s=fe(a[o++],n):a[o+1]==="."||a[o]==="."?(a[o]!=="."&&(u=fe(a[o++],n)),o++,(o+1===a.length||a[o+1]==="("&&a[o+3]===")"||a[o+1]==="'"&&a[o+3]==="'")&&(s=fe(a[o],n),l=Math.pow(10,a[o].length),o++),(a[o]==="("&&a[o+2]===")"||a[o]==="'"&&a[o+2]==="'")&&(v=fe(a[o+1],n),c=Math.pow(10,a[o+1].length)-1,o+=3)):a[o+1]==="/"||a[o+1]===":"?(s=fe(a[o],n),l=fe(a[o+2],1),o+=3):a[o+3]==="/"&&a[o+1]===" "&&(u=fe(a[o],n),s=fe(a[o+2],n),l=fe(a[o+4],1),o+=5),a.length<=o){i=l*c,n=t=v+i*u+c*s;break}}default:throw it()}if(i===0)throw Ht();sr.s=n<0?-1:1,sr.n=Math.abs(t),sr.d=Math.abs(i)};function es(r,e,t){for(var i=1;e>0;r=r*r%t,e>>=1)e&1&&(i=i*r%t);return i}function ts(r,e){for(;e%2===0;e/=2);for(;e%5===0;e/=5);if(e===1)return 0;for(var t=10%e,i=1;t!==1;i++)if(t=t*10%e,i>rs)return 0;return i}function ns(r,e,t){for(var i=1,n=es(10,t,e),u=0;u<300;u++){if(i===n)return u;i=i*10%e,n=n*10%e}return 0}function Se(r,e){if(!r)return e;if(!e)return r;for(;;){if(r%=e,!r)return e;if(e%=r,!e)return r}}function Yr(r,e){if(kr(r,e),this instanceof Yr)r=Se(sr.d,sr.n),this.s=sr.s,this.n=sr.n/r,this.d=sr.d/r;else return $r(sr.s*sr.n,sr.d)}var Ht=function(){return new Error("Division by Zero")},it=function(){return new Error("Invalid argument")},is=function(){return new Error("Parameters must be integer")};Yr.prototype={s:1,n:0,d:1,abs:function(){return $r(this.n,this.d)},neg:function(){return $r(-this.s*this.n,this.d)},add:function(r,e){return kr(r,e),$r(this.s*this.n*sr.d+sr.s*this.d*sr.n,this.d*sr.d)},sub:function(r,e){return kr(r,e),$r(this.s*this.n*sr.d-sr.s*this.d*sr.n,this.d*sr.d)},mul:function(r,e){return kr(r,e),$r(this.s*sr.s*this.n*sr.n,this.d*sr.d)},div:function(r,e){return kr(r,e),$r(this.s*sr.s*this.n*sr.d,this.d*sr.n)},clone:function(){return $r(this.s*this.n,this.d)},mod:function(r,e){if(isNaN(this.n)||isNaN(this.d))return new Yr(NaN);if(r===void 0)return $r(this.s*this.n%this.d,1);if(kr(r,e),sr.n===0&&this.d===0)throw Ht();return $r(this.s*(sr.d*this.n)%(sr.n*this.d),sr.d*this.d)},gcd:function(r,e){return kr(r,e),$r(Se(sr.n,this.n)*Se(sr.d,this.d),sr.d*this.d)},lcm:function(r,e){return kr(r,e),sr.n===0&&this.n===0?$r(0,1):$r(sr.n*this.n,Se(sr.n,this.n)*Se(sr.d,this.d))},ceil:function(r){return r=Math.pow(10,r||0),isNaN(this.n)||isNaN(this.d)?new Yr(NaN):$r(Math.ceil(r*this.s*this.n/this.d),r)},floor:function(r){return r=Math.pow(10,r||0),isNaN(this.n)||isNaN(this.d)?new Yr(NaN):$r(Math.floor(r*this.s*this.n/this.d),r)},round:function(r){return r=Math.pow(10,r||0),isNaN(this.n)||isNaN(this.d)?new Yr(NaN):$r(Math.round(r*this.s*this.n/this.d),r)},roundTo:function(r,e){return kr(r,e),$r(this.s*Math.round(this.n*sr.d/(this.d*sr.n))*sr.n,sr.d)},inverse:function(){return $r(this.s*this.d,this.n)},pow:function(r,e){if(kr(r,e),sr.d===1)return sr.s<0?$r(Math.pow(this.s*this.d,sr.n),Math.pow(this.n,sr.n)):$r(Math.pow(this.s*this.n,sr.n),Math.pow(this.d,sr.n));if(this.s<0)return null;var t=yn(this.n),i=yn(this.d),n=1,u=1;for(var s in t)if(s!=="1"){if(s==="0"){n=0;break}if(t[s]*=sr.n,t[s]%sr.d===0)t[s]/=sr.d;else return null;n*=Math.pow(s,t[s])}for(var s in i)if(s!=="1"){if(i[s]*=sr.n,i[s]%sr.d===0)i[s]/=sr.d;else return null;u*=Math.pow(s,i[s])}return sr.s<0?$r(u,n):$r(n,u)},equals:function(r,e){return kr(r,e),this.s*this.n*sr.d===sr.s*sr.n*this.d},compare:function(r,e){kr(r,e);var t=this.s*this.n*sr.d-sr.s*sr.n*this.d;return(0<t)-(t<0)},simplify:function(r){if(isNaN(this.n)||isNaN(this.d))return this;r=r||.001;for(var e=this.abs(),t=e.toContinued(),i=1;i<t.length;i++){for(var n=$r(t[i-1],1),u=i-2;u>=0;u--)n=n.inverse().add(t[u]);if(Math.abs(n.sub(e).valueOf())<r)return n.mul(this.s)}return this},divisible:function(r,e){return kr(r,e),!(!(sr.n*this.d)||this.n*sr.d%(sr.n*this.d))},valueOf:function(){return this.s*this.n/this.d},toFraction:function(r){var e,t="",i=this.n,n=this.d;return this.s<0&&(t+="-"),n===1?t+=i:(r&&(e=Math.floor(i/n))>0&&(t+=e,t+=" ",i%=n),t+=i,t+="/",t+=n),t},toLatex:function(r){var e,t="",i=this.n,n=this.d;return this.s<0&&(t+="-"),n===1?t+=i:(r&&(e=Math.floor(i/n))>0&&(t+=e,i%=n),t+="\\frac{",t+=i,t+="}{",t+=n,t+="}"),t},toContinued:function(){var r,e=this.n,t=this.d,i=[];if(isNaN(e)||isNaN(t))return i;do i.push(Math.floor(e/t)),r=e%t,e=t,t=r;while(e!==1);return i},toString:function(r){var e=this.n,t=this.d;if(isNaN(e)||isNaN(t))return"NaN";r=r||15;var i=ts(e,t),n=ns(e,t,i),u=this.s<0?"-":"";if(u+=e/t|0,e%=t,e*=10,e&&(u+="."),i){for(var s=n;s--;)u+=e/t|0,e%=t,e*=10;u+="(";for(var s=i;s--;)u+=e/t|0,e%=t,e*=10;u+=")"}else for(var s=r;e&&s--;)u+=e/t|0,e%=t,e*=10;return u}};var as="Fraction",us=[],os=rr(as,us,()=>(Object.defineProperty(Yr,"name",{value:"Fraction"}),Yr.prototype.constructor=Yr,Yr.prototype.type="Fraction",Yr.prototype.isFraction=!0,Yr.prototype.toJSON=function(){return{mathjs:"Fraction",n:this.s*this.n,d:this.d}},Yr.fromJSON=function(r){return new Yr(r)},Yr),{isClass:!0}),ss="Matrix",fs=[],cs=rr(ss,fs,()=>{function r(){if(!(this instanceof r))throw new SyntaxError("Constructor must be called with the new operator")}return r.prototype.type="Matrix",r.prototype.isMatrix=!0,r.prototype.storage=function(){throw new Error("Cannot invoke storage on a Matrix interface")},r.prototype.datatype=function(){throw new Error("Cannot invoke datatype on a Matrix interface")},r.prototype.create=function(e,t){throw new Error("Cannot invoke create on a Matrix interface")},r.prototype.subset=function(e,t,i){throw new Error("Cannot invoke subset on a Matrix interface")},r.prototype.get=function(e){throw new Error("Cannot invoke get on a Matrix interface")},r.prototype.set=function(e,t,i){throw new Error("Cannot invoke set on a Matrix interface")},r.prototype.resize=function(e,t){throw new Error("Cannot invoke resize on a Matrix interface")},r.prototype.reshape=function(e,t){throw new Error("Cannot invoke reshape on a Matrix interface")},r.prototype.clone=function(){throw new Error("Cannot invoke clone on a Matrix interface")},r.prototype.size=function(){throw new Error("Cannot invoke size on a Matrix interface")},r.prototype.map=function(e,t){throw new Error("Cannot invoke map on a Matrix interface")},r.prototype.forEach=function(e){throw new Error("Cannot invoke forEach on a Matrix interface")},r.prototype[Symbol.iterator]=function(){throw new Error("Cannot iterate a Matrix interface")},r.prototype.toArray=function(){throw new Error("Cannot invoke toArray on a Matrix interface")},r.prototype.valueOf=function(){throw new Error("Cannot invoke valueOf on a Matrix interface")},r.prototype.format=function(e){throw new Error("Cannot invoke format on a Matrix interface")},r.prototype.toString=function(){throw new Error("Cannot invoke toString on a Matrix interface")},r},{isClass:!0});function It(r,e,t){var i=r.constructor,n=new i(2),u="";if(t){if(t<1)throw new Error("size must be in greater than 0");if(!xr(t))throw new Error("size must be an integer");if(r.greaterThan(n.pow(t-1).sub(1))||r.lessThan(n.pow(t-1).mul(-1)))throw new Error("Value must be in range [-2^".concat(t-1,", 2^").concat(t-1,"-1]"));if(!r.isInteger())throw new Error("Value must be an integer");r.lessThan(0)&&(r=r.add(n.pow(t))),u="i".concat(t)}switch(e){case 2:return"".concat(r.toBinary()).concat(u);case 8:return"".concat(r.toOctal()).concat(u);case 16:return"".concat(r.toHexadecimal()).concat(u);default:throw new Error("Base ".concat(e," not supported "))}}function ls(r,e){if(typeof e=="function")return e(r);if(!r.isFinite())return r.isNaN()?"NaN":r.gt(0)?"Infinity":"-Infinity";var{notation:t,precision:i,wordSize:n}=Ni(e);switch(t){case"fixed":return hs(r,i);case"exponential":return wn(r,i);case"engineering":return vs(r,i);case"bin":return It(r,2,n);case"oct":return It(r,8,n);case"hex":return It(r,16,n);case"auto":{var u=An(e==null?void 0:e.lowerExp,-3),s=An(e==null?void 0:e.upperExp,5);if(r.isZero())return"0";var v,l=r.toSignificantDigits(i),c=l.e;return c>=u&&c<s?v=l.toFixed():v=wn(r,i),v.replace(/((\.\d*?)(0+))($|e)/,function(){var o=arguments[2],a=arguments[4];return o!=="."?o+a:a})}default:throw new Error('Unknown notation "'+t+'". Choose "auto", "exponential", "fixed", "bin", "oct", or "hex.')}}function vs(r,e){var t=r.e,i=t%3===0?t:t<0?t-3-t%3:t-t%3,n=r.mul(Math.pow(10,-i)),u=n.toPrecision(e);if(u.includes("e")){var s=r.constructor;u=new s(u).toFixed()}return u+"e"+(t>=0?"+":"")+i.toString()}function wn(r,e){return e!==void 0?r.toExponential(e-1):r.toExponential()}function hs(r,e){return r.toFixed(e)}function An(r,e){return Nr(r)?r:Ir(r)?r.toNumber():e}function Or(r,e){var t=ps(r,e);return e&&typeof e=="object"&&"truncate"in e&&t.length>e.truncate?t.substring(0,e.truncate-3)+"...":t}function ps(r,e){if(typeof r=="number")return $t(r,e);if(Ir(r))return ls(r,e);if(ds(r))return!e||e.fraction!=="decimal"?r.s*r.n+"/"+r.d:r.toString();if(Array.isArray(r))return Ji(r,e);if(re(r))return En(r);if(typeof r=="function")return r.syntax?String(r.syntax):"function";if(r&&typeof r=="object"){if(typeof r.format=="function")return r.format(e);if(r&&r.toString(e)!=={}.toString())return r.toString(e);var t=Object.keys(r).map(i=>En(i)+": "+Or(r[i],e));return"{"+t.join(", ")+"}"}return String(r)}function En(r){for(var e=String(r),t="",i=0;i<e.length;){var n=e.charAt(i);t+=n in Fn?Fn[n]:n,i++}return'"'+t+'"'}var Fn={'"':'\\"',"\\":"\\\\","\b":"\\b","\f":"\\f","\n":"\\n","\r":"\\r","	":"\\t"};function Ji(r,e){if(Array.isArray(r)){for(var t="[",i=r.length,n=0;n<i;n++)n!==0&&(t+=", "),t+=Ji(r[n],e);return t+="]",t}else return Or(r,e)}function ds(r){return r&&typeof r=="object"&&typeof r.s=="number"&&typeof r.n=="number"&&typeof r.d=="number"||!1}function wr(r,e,t){if(!(this instanceof wr))throw new SyntaxError("Constructor must be called with the new operator");this.actual=r,this.expected=e,this.relation=t,this.message="Dimension mismatch ("+(Array.isArray(r)?"["+r.join(", ")+"]":r)+" "+(this.relation||"!=")+" "+(Array.isArray(e)?"["+e.join(", ")+"]":e)+")",this.stack=new Error().stack}wr.prototype=new RangeError;wr.prototype.constructor=RangeError;wr.prototype.name="DimensionError";wr.prototype.isDimensionError=!0;function Ae(r,e,t){if(!(this instanceof Ae))throw new SyntaxError("Constructor must be called with the new operator");this.index=r,arguments.length<3?(this.min=0,this.max=e):(this.min=e,this.max=t),this.min!==void 0&&this.index<this.min?this.message="Index out of range ("+this.index+" < "+this.min+")":this.max!==void 0&&this.index>=this.max?this.message="Index out of range ("+this.index+" > "+(this.max-1)+")":this.message="Index out of range ("+this.index+")",this.stack=new Error().stack}Ae.prototype=new RangeError;Ae.prototype.constructor=RangeError;Ae.prototype.name="IndexError";Ae.prototype.isIndexError=!0;function Mr(r){for(var e=[];Array.isArray(r);)e.push(r.length),r=r[0];return e}function Gi(r,e,t){var i,n=r.length;if(n!==e[t])throw new wr(n,e[t]);if(t<e.length-1){var u=t+1;for(i=0;i<n;i++){var s=r[i];if(!Array.isArray(s))throw new wr(e.length-1,e.length,"<");Gi(r[i],e,u)}}else for(i=0;i<n;i++)if(Array.isArray(r[i]))throw new wr(e.length+1,e.length,">")}function Cn(r,e){var t=e.length===0;if(t){if(Array.isArray(r))throw new wr(r.length,0)}else Gi(r,e,0)}function ht(r,e){var t=r.isMatrix?r._size:Mr(r),i=e._sourceSize;i.forEach((n,u)=>{if(n!==null&&n!==t[u])throw new wr(n,t[u])})}function Br(r,e){if(r!==void 0){if(!Nr(r)||!xr(r))throw new TypeError("Index must be an integer (value: "+r+")");if(r<0||typeof e=="number"&&r>=e)throw new Ae(r,e)}}function ze(r){for(var e=0;e<r._dimensions.length;++e){var t=r._dimensions[e];if(t._data&&_r(t._data)){if(t._size[0]===0)return!0}else if(t.isRange){if(t.start===t.end)return!0}else if(re(t)&&t.length===0)return!0}return!1}function pt(r,e,t){if(!Array.isArray(e))throw new TypeError("Array expected");if(e.length===0)throw new Error("Resizing to scalar is not supported");e.forEach(function(n){if(!Nr(n)||!xr(n)||n<0)throw new TypeError("Invalid size, must contain positive integers (size: "+Or(e)+")")}),(Nr(r)||Ir(r))&&(r=[r]);var i=t!==void 0?t:0;return Zt(r,e,0,i),r}function Zt(r,e,t,i){var n,u,s=r.length,v=e[t],l=Math.min(s,v);if(r.length=v,t<e.length-1){var c=t+1;for(n=0;n<l;n++)u=r[n],Array.isArray(u)||(u=[u],r[n]=u),Zt(u,e,c,i);for(n=l;n<v;n++)u=[],r[n]=u,Zt(u,e,c,i)}else{for(n=0;n<l;n++)for(;Array.isArray(r[n]);)r[n]=r[n][0];for(n=l;n<v;n++)r[n]=i}}function kt(r,e){var t=Vt(r),i=t.length;if(!Array.isArray(r)||!Array.isArray(e))throw new TypeError("Array expected");if(e.length===0)throw new wr(0,i,"!=");e=jt(e,i);var n=Qi(e);if(i!==n)throw new wr(n,i,"!=");try{return ms(t,e)}catch(u){throw u instanceof wr?new wr(n,i,"!="):u}}function jt(r,e){var t=Qi(r),i=r.slice(),n=-1,u=r.indexOf(n),s=r.indexOf(n,u+1)>=0;if(s)throw new Error("More than one wildcard in sizes");var v=u>=0,l=e%t===0;if(v)if(l)i[u]=-e/t;else throw new Error("Could not replace wildcard, since "+e+" is no multiple of "+-t);return i}function Qi(r){return r.reduce((e,t)=>e*t,1)}function ms(r,e){for(var t=r,i,n=e.length-1;n>0;n--){var u=e[n];i=[];for(var s=t.length/u,v=0;v<s;v++)i.push(t.slice(v*u,(v+1)*u));t=i}return t}function Xi(r,e,t,i){var n=i||Mr(r);if(t)for(var u=0;u<t;u++)r=[r],n.unshift(1);for(r=Ki(r,e,0);n.length<e;)n.push(1);return r}function Ki(r,e,t){var i,n;if(Array.isArray(r)){var u=t+1;for(i=0,n=r.length;i<n;i++)r[i]=Ki(r[i],e,u)}else for(var s=t;s<e;s++)r=[r];return r}function Vt(r){if(!Array.isArray(r))return r;var e=[];return r.forEach(function t(i){Array.isArray(i)?i.forEach(t):e.push(i)}),e}function St(r,e){for(var t,i=0,n=0;n<r.length;n++){var u=r[n],s=Array.isArray(u);if(n===0&&s&&(i=u.length),s&&u.length!==i)return;var v=s?St(u,e):e(u);if(t===void 0)t=v;else if(t!==v)return"mixed"}return t}function Wi(r,e,t,i){if(i<t){if(r.length!==e.length)throw new wr(r.length,e.length);for(var n=[],u=0;u<r.length;u++)n[u]=Wi(r[u],e[u],t,i+1);return n}else return r.concat(e)}function Hi(){var r=Array.prototype.slice.call(arguments,0,-1),e=Array.prototype.slice.call(arguments,-1);if(r.length===1)return r[0];if(r.length>1)return r.slice(1).reduce(function(t,i){return Wi(t,i,e,0)},r[0]);throw new Error("Wrong number of arguments in function concat")}function ki(){for(var r=arguments.length,e=new Array(r),t=0;t<r;t++)e[t]=arguments[t];for(var i=e.map(f=>f.length),n=Math.max(...i),u=new Array(n).fill(null),s=0;s<e.length;s++)for(var v=e[s],l=i[s],c=0;c<l;c++){var o=n-l+c;v[c]>u[o]&&(u[o]=v[c])}for(var a=0;a<e.length;a++)ji(e[a],u);return u}function ji(r,e){for(var t=e.length,i=r.length,n=0;n<i;n++){var u=t-i+n;if(r[n]<e[u]&&r[n]>1||r[n]>e[u])throw new Error("shape missmatch: missmatch is found in arg with shape (".concat(r,") not possible to broadcast dimension ").concat(i," with size ").concat(r[n]," to size ").concat(e[u]))}}function Yt(r,e){var t=Mr(r);if(De(t,e))return r;ji(t,e);var i=ki(t,e),n=i.length,u=[...Array(n-t.length).fill(1),...t],s=gs(r);t.length<n&&(s=kt(s,u),t=Mr(s));for(var v=0;v<n;v++)t[v]<i[v]&&(s=Ds(s,i[v],v),t=Mr(s));return s}function Ds(r,e,t){return Hi(...Array(e).fill(r),t)}function ra(r,e){if(!Array.isArray(r))throw new Error("Array expected");var t=Mr(r);if(e.length!==t.length)throw new wr(e.length,t.length);for(var i=0;i<e.length;i++)Br(e[i],t[i]);return e.reduce((n,u)=>n[u],r)}function gs(r){return Ne([],r)}function dt(r,e,t){if(ft.isTypedFunction(r)){var i=(e.isMatrix?e.size():Mr(e)).map(()=>0),n=e.isMatrix?e.get(i):ra(e,i),u=Object.keys(r.signatures).length===1,s=ys(r,n,i,e),v=u?Object.values(r.signatures)[0]:r;return s>=1&&s<=3?function(){for(var l=arguments.length,c=new Array(l),o=0;o<l;o++)c[o]=arguments[o];return bn(v,c.slice(0,s),t,r.name)}:function(){for(var l=arguments.length,c=new Array(l),o=0;o<l;o++)c[o]=arguments[o];return bn(v,c,t,r.name)}}return r}function ys(r,e,t,i){for(var n=[e,t,i],u=3;u>0;u--){var s=n.slice(0,u);if(ft.resolve(r,s)!==null)return u}}function bn(r,e,t,i){try{return r(...e)}catch(n){ws(n,e,t,i)}}function ws(r,e,t,i){var n;if(r instanceof TypeError&&((n=r.data)===null||n===void 0?void 0:n.category)==="wrongType"){var u=[];throw u.push("value: ".concat(ae(e[0]))),e.length>=2&&u.push("index: ".concat(ae(e[1]))),e.length>=3&&u.push("array: ".concat(ae(e[2]))),new TypeError("Function ".concat(t," cannot apply callback arguments ")+"".concat(i,"(").concat(u.join(", "),") at index ").concat(JSON.stringify(e[1])))}else throw new TypeError("Function ".concat(t," cannot apply callback arguments ")+"to function ".concat(i,": ").concat(r.message))}var As="DenseMatrix",Es=["Matrix"],Fs=rr(As,Es,r=>{var{Matrix:e}=r;function t(o,a){if(!(this instanceof t))throw new SyntaxError("Constructor must be called with the new operator");if(a&&!re(a))throw new Error("Invalid datatype: "+a);if(Sr(o))o.type==="DenseMatrix"?(this._data=Er(o._data),this._size=Er(o._size),this._datatype=a||o._datatype):(this._data=o.toArray(),this._size=o.size(),this._datatype=a||o._datatype);else if(o&&_r(o.data)&&_r(o.size))this._data=o.data,this._size=o.size,Cn(this._data,this._size),this._datatype=a||o.datatype;else if(_r(o))this._data=c(o),this._size=Mr(this._data),Cn(this._data,this._size),this._datatype=a;else{if(o)throw new TypeError("Unsupported type of data ("+ae(o)+")");this._data=[],this._size=[0],this._datatype=a}}t.prototype=new e,t.prototype.createDenseMatrix=function(o,a){return new t(o,a)},Object.defineProperty(t,"name",{value:"DenseMatrix"}),t.prototype.constructor=t,t.prototype.type="DenseMatrix",t.prototype.isDenseMatrix=!0,t.prototype.getDataType=function(){return St(this._data,ae)},t.prototype.storage=function(){return"dense"},t.prototype.datatype=function(){return this._datatype},t.prototype.create=function(o,a){return new t(o,a)},t.prototype.subset=function(o,a,f){switch(arguments.length){case 1:return i(this,o);case 2:case 3:return u(this,o,a,f);default:throw new SyntaxError("Wrong number of arguments")}},t.prototype.get=function(o){return ra(this._data,o)},t.prototype.set=function(o,a,f){if(!_r(o))throw new TypeError("Array expected");if(o.length<this._size.length)throw new wr(o.length,this._size.length,"<");var h,d,p,g=o.map(function(E){return E+1});l(this,g,f);var D=this._data;for(h=0,d=o.length-1;h<d;h++)p=o[h],Br(p,D.length),D=D[p];return p=o[o.length-1],Br(p,D.length),D[p]=a,this};function i(o,a){if(!Et(a))throw new TypeError("Invalid index");var f=a.isScalar();if(f)return o.get(a.min());var h=a.size();if(h.length!==o._size.length)throw new wr(h.length,o._size.length);for(var d=a.min(),p=a.max(),g=0,D=o._size.length;g<D;g++)Br(d[g],o._size[g]),Br(p[g],o._size[g]);return new t(n(o._data,a,h.length,0),o._datatype)}function n(o,a,f,h){var d=h===f-1,p=a.dimension(h);return d?p.map(function(g){return Br(g,o.length),o[g]}).valueOf():p.map(function(g){Br(g,o.length);var D=o[g];return n(D,a,f,h+1)}).valueOf()}function u(o,a,f,h){if(!a||a.isIndex!==!0)throw new TypeError("Invalid index");var d=a.size(),p=a.isScalar(),g;if(Sr(f)?(g=f.size(),f=f.valueOf()):g=Mr(f),p){if(g.length!==0)throw new TypeError("Scalar expected");o.set(a.min(),f,h)}else{if(!De(g,d))try{g.length===0?f=Yt([f],d):f=Yt(f,d),g=Mr(f)}catch{}if(d.length<o._size.length)throw new wr(d.length,o._size.length,"<");if(g.length<d.length){for(var D=0,E=0;d[D]===1&&g[D]===1;)D++;for(;d[D]===1;)E++,D++;f=Xi(f,d.length,E,g)}if(!De(d,g))throw new wr(d,g,">");var y=a.max().map(function(m){return m+1});l(o,y,h);var C=d.length,A=0;s(o._data,a,f,C,A)}return o}function s(o,a,f,h,d){var p=d===h-1,g=a.dimension(d);p?g.forEach(function(D,E){Br(D),o[D]=f[E[0]]}):g.forEach(function(D,E){Br(D),s(o[D],a,f[E[0]],h,d+1)})}t.prototype.resize=function(o,a,f){if(!st(o))throw new TypeError("Array or Matrix expected");var h=o.valueOf().map(p=>Array.isArray(p)&&p.length===1?p[0]:p),d=f?this.clone():this;return v(d,h,a)};function v(o,a,f){if(a.length===0){for(var h=o._data;_r(h);)h=h[0];return h}return o._size=a.slice(0),o._data=pt(o._data,o._size,f),o}t.prototype.reshape=function(o,a){var f=a?this.clone():this;f._data=kt(f._data,o);var h=f._size.reduce((d,p)=>d*p);return f._size=jt(o,h),f};function l(o,a,f){for(var h=o._size.slice(0),d=!1;h.length<a.length;)h.push(0),d=!0;for(var p=0,g=a.length;p<g;p++)a[p]>h[p]&&(h[p]=a[p],d=!0);d&&v(o,h,f)}t.prototype.clone=function(){var o=new t({data:Er(this._data),size:Er(this._size),datatype:this._datatype});return o},t.prototype.size=function(){return this._size.slice(0)},t.prototype._forEach=function(o){var a=this,f=a.size();if(f.length===1){for(var h=0;h<f[0];h++)o(a._data,h,[h]);return}var d=Array(f.length).fill(0),p=Array(f.length-1),g=p.length-1;p[0]=a._data[0];for(var D=0;D<g;D++)p[D+1]=p[D][0];for(d[g]=-1;;){var E=void 0;for(E=g;E>=0;E--){if(d[E]++,d[E]===f[E]){d[E]=0;continue}p[E]=E===0?a._data[d[E]]:p[E-1][d[E]];for(var y=E;y<g;y++)p[y+1]=p[y][0];for(var C=0;C<f[p.length];C++)d[p.length]=C,o(p[g],C,d.slice(0));break}if(E===-1)break}},t.prototype.map=function(o){var a=this,f=new t(a),h=dt(o,a._data,"map");return f._forEach(function(d,p,g){d[p]=h(d[p],g,a)}),f},t.prototype.forEach=function(o){var a=this,f=dt(o,a._data,"map");a._forEach(function(h,d,p){f(h[d],p,a)})},t.prototype[Symbol.iterator]=function*(){var o=function*(f,h){if(_r(f))for(var d=0;d<f.length;d++)yield*o(f[d],h.concat(d));else yield{value:f,index:h}};yield*o(this._data,[])},t.prototype.rows=function(){var o=[],a=this.size();if(a.length!==2)throw new TypeError("Rows can only be returned for a 2D matrix.");var f=this._data;for(var h of f)o.push(new t([h],this._datatype));return o},t.prototype.columns=function(){var o=this,a=[],f=this.size();if(f.length!==2)throw new TypeError("Rows can only be returned for a 2D matrix.");for(var h=this._data,d=function(D){var E=h.map(y=>[y[D]]);a.push(new t(E,o._datatype))},p=0;p<f[1];p++)d(p);return a},t.prototype.toArray=function(){return Er(this._data)},t.prototype.valueOf=function(){return this._data},t.prototype.format=function(o){return Or(this._data,o)},t.prototype.toString=function(){return Or(this._data)},t.prototype.toJSON=function(){return{mathjs:"DenseMatrix",data:this._data,size:this._size,datatype:this._datatype}},t.prototype.diagonal=function(o){if(o){if(Ir(o)&&(o=o.toNumber()),!Nr(o)||!xr(o))throw new TypeError("The parameter k must be an integer number")}else o=0;for(var a=o>0?o:0,f=o<0?-o:0,h=this._size[0],d=this._size[1],p=Math.min(h-f,d-a),g=[],D=0;D<p;D++)g[D]=this._data[D+f][D+a];return new t({data:g,size:[p],datatype:this._datatype})},t.diagonal=function(o,a,f,h){if(!_r(o))throw new TypeError("Array expected, size parameter");if(o.length!==2)throw new Error("Only two dimensions matrix are supported");if(o=o.map(function(b){if(Ir(b)&&(b=b.toNumber()),!Nr(b)||!xr(b)||b<1)throw new Error("Size values must be positive integers");return b}),f){if(Ir(f)&&(f=f.toNumber()),!Nr(f)||!xr(f))throw new TypeError("The parameter k must be an integer number")}else f=0;var d=f>0?f:0,p=f<0?-f:0,g=o[0],D=o[1],E=Math.min(g-p,D-d),y;if(_r(a)){if(a.length!==E)throw new Error("Invalid value array length");y=function(F){return a[F]}}else if(Sr(a)){var C=a.size();if(C.length!==1||C[0]!==E)throw new Error("Invalid matrix length");y=function(F){return a.get([F])}}else y=function(){return a};h||(h=Ir(y(0))?y(0).mul(0):0);var A=[];if(o.length>0){A=pt(A,o,h);for(var m=0;m<E;m++)A[m+p][m+d]=y(m)}return new t({data:A,size:[g,D]})},t.fromJSON=function(o){return new t(o)},t.prototype.swapRows=function(o,a){if(!Nr(o)||!xr(o)||!Nr(a)||!xr(a))throw new Error("Row index must be positive integers");if(this._size.length!==2)throw new Error("Only two dimensional matrix is supported");return Br(o,this._size[0]),Br(a,this._size[0]),t._swapRows(o,a,this._data),this},t._swapRows=function(o,a,f){var h=f[o];f[o]=f[a],f[a]=h};function c(o){return Sr(o)?c(o.valueOf()):_r(o)?o.map(c):o}return t},{isClass:!0});function Hr(r,e,t){return r&&typeof r.map=="function"?r.map(function(i){return Hr(i,e)}):e(r)}var _n="isInteger",Cs=["typed"],bs=rr(_n,Cs,r=>{var{typed:e}=r;return e(_n,{number:xr,BigNumber:function(i){return i.isInt()},bigint:function(i){return!0},Fraction:function(i){return i.d===1&&isFinite(i.n)},"Array | Matrix":e.referToSelf(t=>i=>Hr(i,t))})}),rn="number",Bt="number, number";function ea(r){return Math.abs(r)}ea.signature=rn;function ta(r,e){return r+e}ta.signature=Bt;function na(r,e){return r-e}na.signature=Bt;function ia(r,e){return r*e}ia.signature=Bt;function aa(r){return-r}aa.signature=rn;function Jt(r){return Yu(r)}Jt.signature=rn;function ua(r,e){return r*r<1&&e===1/0||r*r>1&&e===-1/0?0:Math.pow(r,e)}ua.signature=Bt;var _s="number";function oa(r){return r>0}oa.signature=_s;function Oe(r,e){var t=arguments.length>2&&arguments[2]!==void 0?arguments[2]:1e-9,i=arguments.length>3&&arguments[3]!==void 0?arguments[3]:0;if(t<=0)throw new Error("Relative tolerance must be greater than 0");if(i<0)throw new Error("Absolute tolerance must be at least 0");return r.isNaN()||e.isNaN()?!1:!r.isFinite()||!e.isFinite()?r.eq(e):r.eq(e)?!0:r.minus(e).abs().lte(r.constructor.max(r.constructor.max(r.abs(),e.abs()).mul(t),i))}var Mn="isPositive",Ms=["typed","config"],Ss=rr(Mn,Ms,r=>{var{typed:e,config:t}=r;return e(Mn,{number:i=>le(i,0,t.relTol,t.absTol)?!1:oa(i),BigNumber:i=>Oe(i,new i.constructor(0),t.relTol,t.absTol)?!1:!i.isNeg()&&!i.isZero()&&!i.isNaN(),bigint:i=>i>0n,Fraction:i=>i.s>0&&i.n>0,Unit:e.referToSelf(i=>n=>e.find(i,n.valueType())(n.value)),"Array | Matrix":e.referToSelf(i=>n=>Hr(n,i))})}),Sn="isZero",Bs=["typed","equalScalar"],Ns=rr(Sn,Bs,r=>{var{typed:e,equalScalar:t}=r;return e(Sn,{"number | BigNumber | Complex | Fraction":i=>t(i,0),bigint:i=>i===0n,Unit:e.referToSelf(i=>n=>e.find(i,n.valueType())(n.value)),"Array | Matrix":e.referToSelf(i=>n=>Hr(n,i))})});function xs(r,e,t,i){return le(r.re,e.re,t,i)&&le(r.im,e.im,t,i)}var Ye=rr("compareUnits",["typed"],r=>{var{typed:e}=r;return{"Unit, Unit":e.referToSelf(t=>(i,n)=>{if(!i.equalBase(n))throw new Error("Cannot compare units with different base");return e.find(t,[i.valueType(),n.valueType()])(i.value,n.value)})}}),mt="equalScalar",Ts=["typed","config"],zs=rr(mt,Ts,r=>{var{typed:e,config:t}=r,i=Ye({typed:e});return e(mt,{"boolean, boolean":function(u,s){return u===s},"number, number":function(u,s){return le(u,s,t.relTol,t.absTol)},"BigNumber, BigNumber":function(u,s){return u.eq(s)||Oe(u,s,t.relTol,t.absTol)},"bigint, bigint":function(u,s){return u===s},"Fraction, Fraction":function(u,s){return u.equals(s)},"Complex, Complex":function(u,s){return xs(u,s,t.relTol,t.absTol)}},i)});rr(mt,["typed","config"],r=>{var{typed:e,config:t}=r;return e(mt,{"number, number":function(n,u){return le(n,u,t.relTol,t.absTol)}})});var Os="SparseMatrix",Is=["typed","equalScalar","Matrix"],$s=rr(Os,Is,r=>{var{typed:e,equalScalar:t,Matrix:i}=r;function n(p,g){if(!(this instanceof n))throw new SyntaxError("Constructor must be called with the new operator");if(g&&!re(g))throw new Error("Invalid datatype: "+g);if(Sr(p))u(this,p,g);else if(p&&_r(p.index)&&_r(p.ptr)&&_r(p.size))this._values=p.values,this._index=p.index,this._ptr=p.ptr,this._size=p.size,this._datatype=g||p.datatype;else if(_r(p))s(this,p,g);else{if(p)throw new TypeError("Unsupported type of data ("+ae(p)+")");this._values=[],this._index=[],this._ptr=[0],this._size=[0,0],this._datatype=g}}function u(p,g,D){g.type==="SparseMatrix"?(p._values=g._values?Er(g._values):void 0,p._index=Er(g._index),p._ptr=Er(g._ptr),p._size=Er(g._size),p._datatype=D||g._datatype):s(p,g.valueOf(),D||g._datatype)}function s(p,g,D){p._values=[],p._index=[],p._ptr=[],p._datatype=D;var E=g.length,y=0,C=t,A=0;if(re(D)&&(C=e.find(t,[D,D])||t,A=e.convert(0,D)),E>0){var m=0;do{p._ptr.push(p._index.length);for(var b=0;b<E;b++){var F=g[b];if(_r(F)){if(m===0&&y<F.length&&(y=F.length),m<F.length){var w=F[m];C(w,A)||(p._values.push(w),p._index.push(b))}}else m===0&&y<1&&(y=1),C(F,A)||(p._values.push(F),p._index.push(b))}m++}while(m<y)}p._ptr.push(p._index.length),p._size=[E,y]}n.prototype=new i,n.prototype.createSparseMatrix=function(p,g){return new n(p,g)},Object.defineProperty(n,"name",{value:"SparseMatrix"}),n.prototype.constructor=n,n.prototype.type="SparseMatrix",n.prototype.isSparseMatrix=!0,n.prototype.getDataType=function(){return St(this._values,ae)},n.prototype.storage=function(){return"sparse"},n.prototype.datatype=function(){return this._datatype},n.prototype.create=function(p,g){return new n(p,g)},n.prototype.density=function(){var p=this._size[0],g=this._size[1];return p!==0&&g!==0?this._index.length/(p*g):0},n.prototype.subset=function(p,g,D){if(!this._values)throw new Error("Cannot invoke subset on a Pattern only matrix");switch(arguments.length){case 1:return v(this,p);case 2:case 3:return l(this,p,g,D);default:throw new SyntaxError("Wrong number of arguments")}};function v(p,g){if(!Et(g))throw new TypeError("Invalid index");var D=g.isScalar();if(D)return p.get(g.min());var E=g.size();if(E.length!==p._size.length)throw new wr(E.length,p._size.length);var y,C,A,m,b=g.min(),F=g.max();for(y=0,C=p._size.length;y<C;y++)Br(b[y],p._size[y]),Br(F[y],p._size[y]);var w=p._values,_=p._index,M=p._ptr,B=g.dimension(0),O=g.dimension(1),z=[],I=[];B.forEach(function(T,Z){I[T]=Z[0],z[T]=!0});var N=w?[]:void 0,Y=[],q=[];return O.forEach(function(T){for(q.push(Y.length),A=M[T],m=M[T+1];A<m;A++)y=_[A],z[y]===!0&&(Y.push(I[y]),N&&N.push(w[A]))}),q.push(Y.length),new n({values:N,index:Y,ptr:q,size:E,datatype:p._datatype})}function l(p,g,D,E){if(!g||g.isIndex!==!0)throw new TypeError("Invalid index");var y=g.size(),C=g.isScalar(),A;if(Sr(D)?(A=D.size(),D=D.toArray()):A=Mr(D),C){if(A.length!==0)throw new TypeError("Scalar expected");p.set(g.min(),D,E)}else{if(y.length!==1&&y.length!==2)throw new wr(y.length,p._size.length,"<");if(A.length<y.length){for(var m=0,b=0;y[m]===1&&A[m]===1;)m++;for(;y[m]===1;)b++,m++;D=Xi(D,y.length,b,A)}if(!De(y,A))throw new wr(y,A,">");if(y.length===1){var F=g.dimension(0);F.forEach(function(M,B){Br(M),p.set([M,0],D[B[0]],E)})}else{var w=g.dimension(0),_=g.dimension(1);w.forEach(function(M,B){Br(M),_.forEach(function(O,z){Br(O),p.set([M,O],D[B[0]][z[0]],E)})})}}return p}n.prototype.get=function(p){if(!_r(p))throw new TypeError("Array expected");if(p.length!==this._size.length)throw new wr(p.length,this._size.length);if(!this._values)throw new Error("Cannot invoke get on a Pattern only matrix");var g=p[0],D=p[1];Br(g,this._size[0]),Br(D,this._size[1]);var E=c(g,this._ptr[D],this._ptr[D+1],this._index);return E<this._ptr[D+1]&&this._index[E]===g?this._values[E]:0},n.prototype.set=function(p,g,D){if(!_r(p))throw new TypeError("Array expected");if(p.length!==this._size.length)throw new wr(p.length,this._size.length);if(!this._values)throw new Error("Cannot invoke set on a Pattern only matrix");var E=p[0],y=p[1],C=this._size[0],A=this._size[1],m=t,b=0;re(this._datatype)&&(m=e.find(t,[this._datatype,this._datatype])||t,b=e.convert(0,this._datatype)),(E>C-1||y>A-1)&&(f(this,Math.max(E+1,C),Math.max(y+1,A),D),C=this._size[0],A=this._size[1]),Br(E,C),Br(y,A);var F=c(E,this._ptr[y],this._ptr[y+1],this._index);return F<this._ptr[y+1]&&this._index[F]===E?m(g,b)?o(F,y,this._values,this._index,this._ptr):this._values[F]=g:m(g,b)||a(F,E,y,g,this._values,this._index,this._ptr),this};function c(p,g,D,E){if(D-g===0)return D;for(var y=g;y<D;y++)if(E[y]===p)return y;return g}function o(p,g,D,E,y){D.splice(p,1),E.splice(p,1);for(var C=g+1;C<y.length;C++)y[C]--}function a(p,g,D,E,y,C,A){y.splice(p,0,E),C.splice(p,0,g);for(var m=D+1;m<A.length;m++)A[m]++}n.prototype.resize=function(p,g,D){if(!st(p))throw new TypeError("Array or Matrix expected");var E=p.valueOf().map(C=>Array.isArray(C)&&C.length===1?C[0]:C);if(E.length!==2)throw new Error("Only two dimensions matrix are supported");E.forEach(function(C){if(!Nr(C)||!xr(C)||C<0)throw new TypeError("Invalid size, must contain positive integers (size: "+Or(E)+")")});var y=D?this.clone():this;return f(y,E[0],E[1],g)};function f(p,g,D,E){var y=E||0,C=t,A=0;re(p._datatype)&&(C=e.find(t,[p._datatype,p._datatype])||t,A=e.convert(0,p._datatype),y=e.convert(y,p._datatype));var m=!C(y,A),b=p._size[0],F=p._size[1],w,_,M;if(D>F){for(_=F;_<D;_++)if(p._ptr[_]=p._values.length,m)for(w=0;w<b;w++)p._values.push(y),p._index.push(w);p._ptr[D]=p._values.length}else D<F&&(p._ptr.splice(D+1,F-D),p._values.splice(p._ptr[D],p._values.length),p._index.splice(p._ptr[D],p._index.length));if(F=D,g>b){if(m){var B=0;for(_=0;_<F;_++){p._ptr[_]=p._ptr[_]+B,M=p._ptr[_+1]+B;var O=0;for(w=b;w<g;w++,O++)p._values.splice(M+O,0,y),p._index.splice(M+O,0,w),B++}p._ptr[F]=p._values.length}}else if(g<b){var z=0;for(_=0;_<F;_++){p._ptr[_]=p._ptr[_]-z;var I=p._ptr[_],N=p._ptr[_+1]-z;for(M=I;M<N;M++)w=p._index[M],w>g-1&&(p._values.splice(M,1),p._index.splice(M,1),z++)}p._ptr[_]=p._values.length}return p._size[0]=g,p._size[1]=D,p}n.prototype.reshape=function(p,g){if(!_r(p))throw new TypeError("Array expected");if(p.length!==2)throw new Error("Sparse matrices can only be reshaped in two dimensions");p.forEach(function(T){if(!Nr(T)||!xr(T)||T<=-2||T===0)throw new TypeError("Invalid size, must contain positive integers or -1 (size: "+Or(p)+")")});var D=this._size[0]*this._size[1];p=jt(p,D);var E=p[0]*p[1];if(D!==E)throw new Error("Reshaping sparse matrix will result in the wrong number of elements");var y=g?this.clone():this;if(this._size[0]===p[0]&&this._size[1]===p[1])return y;for(var C=[],A=0;A<y._ptr.length;A++)for(var m=0;m<y._ptr[A+1]-y._ptr[A];m++)C.push(A);for(var b=y._values.slice(),F=y._index.slice(),w=0;w<y._index.length;w++){var _=F[w],M=C[w],B=_*y._size[1]+M;C[w]=B%p[1],F[w]=Math.floor(B/p[1])}y._values.length=0,y._index.length=0,y._ptr.length=p[1]+1,y._size=p.slice();for(var O=0;O<y._ptr.length;O++)y._ptr[O]=0;for(var z=0;z<b.length;z++){var I=F[z],N=C[z],Y=b[z],q=c(I,y._ptr[N],y._ptr[N+1],y._index);a(q,I,N,Y,y._values,y._index,y._ptr)}return y},n.prototype.clone=function(){var p=new n({values:this._values?Er(this._values):void 0,index:Er(this._index),ptr:Er(this._ptr),size:Er(this._size),datatype:this._datatype});return p},n.prototype.size=function(){return this._size.slice(0)},n.prototype.map=function(p,g){if(!this._values)throw new Error("Cannot invoke map on a Pattern only matrix");var D=this,E=this._size[0],y=this._size[1],C=dt(p,D,"map"),A=function(b,F,w){return C(b,[F,w],D)};return h(this,0,E-1,0,y-1,A,g)};function h(p,g,D,E,y,C,A){var m=[],b=[],F=[],w=t,_=0;re(p._datatype)&&(w=e.find(t,[p._datatype,p._datatype])||t,_=e.convert(0,p._datatype));for(var M=function(U,V,nr){var k=C(U,V,nr);w(k,_)||(m.push(k),b.push(V))},B=E;B<=y;B++){F.push(m.length);var O=p._ptr[B],z=p._ptr[B+1];if(A)for(var I=O;I<z;I++){var N=p._index[I];N>=g&&N<=D&&M(p._values[I],N-g,B-E)}else{for(var Y={},q=O;q<z;q++){var T=p._index[q];Y[T]=p._values[q]}for(var Z=g;Z<=D;Z++){var W=Z in Y?Y[Z]:0;M(W,Z-g,B-E)}}}return F.push(m.length),new n({values:m,index:b,ptr:F,size:[D-g+1,y-E+1]})}n.prototype.forEach=function(p,g){if(!this._values)throw new Error("Cannot invoke forEach on a Pattern only matrix");for(var D=this,E=this._size[0],y=this._size[1],C=dt(p,D,"forEach"),A=0;A<y;A++){var m=this._ptr[A],b=this._ptr[A+1];if(g)for(var F=m;F<b;F++){var w=this._index[F];C(this._values[F],[w,A],D)}else{for(var _={},M=m;M<b;M++){var B=this._index[M];_[B]=this._values[M]}for(var O=0;O<E;O++){var z=O in _?_[O]:0;C(z,[O,A],D)}}}},n.prototype[Symbol.iterator]=function*(){if(!this._values)throw new Error("Cannot iterate a Pattern only matrix");for(var p=this._size[1],g=0;g<p;g++)for(var D=this._ptr[g],E=this._ptr[g+1],y=D;y<E;y++){var C=this._index[y];yield{value:this._values[y],index:[C,g]}}},n.prototype.toArray=function(){return d(this._values,this._index,this._ptr,this._size,!0)},n.prototype.valueOf=function(){return d(this._values,this._index,this._ptr,this._size,!1)};function d(p,g,D,E,y){var C=E[0],A=E[1],m=[],b,F;for(b=0;b<C;b++)for(m[b]=[],F=0;F<A;F++)m[b][F]=0;for(F=0;F<A;F++)for(var w=D[F],_=D[F+1],M=w;M<_;M++)b=g[M],m[b][F]=p?y?Er(p[M]):p[M]:1;return m}return n.prototype.format=function(p){for(var g=this._size[0],D=this._size[1],E=this.density(),y="Sparse Matrix ["+Or(g,p)+" x "+Or(D,p)+"] density: "+Or(E,p)+`
`,C=0;C<D;C++)for(var A=this._ptr[C],m=this._ptr[C+1],b=A;b<m;b++){var F=this._index[b];y+=`
    (`+Or(F,p)+", "+Or(C,p)+") ==> "+(this._values?Or(this._values[b],p):"X")}return y},n.prototype.toString=function(){return Or(this.toArray())},n.prototype.toJSON=function(){return{mathjs:"SparseMatrix",values:this._values,index:this._index,ptr:this._ptr,size:this._size,datatype:this._datatype}},n.prototype.diagonal=function(p){if(p){if(Ir(p)&&(p=p.toNumber()),!Nr(p)||!xr(p))throw new TypeError("The parameter k must be an integer number")}else p=0;var g=p>0?p:0,D=p<0?-p:0,E=this._size[0],y=this._size[1],C=Math.min(E-D,y-g),A=[],m=[],b=[];b[0]=0;for(var F=g;F<y&&A.length<C;F++)for(var w=this._ptr[F],_=this._ptr[F+1],M=w;M<_;M++){var B=this._index[M];if(B===F-g+D){A.push(this._values[M]),m[A.length-1]=B-D;break}}return b.push(A.length),new n({values:A,index:m,ptr:b,size:[C,1]})},n.fromJSON=function(p){return new n(p)},n.diagonal=function(p,g,D,E,y){if(!_r(p))throw new TypeError("Array expected, size parameter");if(p.length!==2)throw new Error("Only two dimensions matrix are supported");if(p=p.map(function(T){if(Ir(T)&&(T=T.toNumber()),!Nr(T)||!xr(T)||T<1)throw new Error("Size values must be positive integers");return T}),D){if(Ir(D)&&(D=D.toNumber()),!Nr(D)||!xr(D))throw new TypeError("The parameter k must be an integer number")}else D=0;var C=t,A=0;re(y)&&(C=e.find(t,[y,y])||t,A=e.convert(0,y));var m=D>0?D:0,b=D<0?-D:0,F=p[0],w=p[1],_=Math.min(F-b,w-m),M;if(_r(g)){if(g.length!==_)throw new Error("Invalid value array length");M=function(Z){return g[Z]}}else if(Sr(g)){var B=g.size();if(B.length!==1||B[0]!==_)throw new Error("Invalid matrix length");M=function(Z){return g.get([Z])}}else M=function(){return g};for(var O=[],z=[],I=[],N=0;N<w;N++){I.push(O.length);var Y=N-m;if(Y>=0&&Y<_){var q=M(Y);C(q,A)||(z.push(Y+b),O.push(q))}}return I.push(O.length),new n({values:O,index:z,ptr:I,size:[F,w]})},n.prototype.swapRows=function(p,g){if(!Nr(p)||!xr(p)||!Nr(g)||!xr(g))throw new Error("Row index must be positive integers");if(this._size.length!==2)throw new Error("Only two dimensional matrix is supported");return Br(p,this._size[0]),Br(g,this._size[0]),n._swapRows(p,g,this._size[1],this._values,this._index,this._ptr),this},n._forEachRow=function(p,g,D,E,y){for(var C=E[p],A=E[p+1],m=C;m<A;m++)y(D[m],g[m])},n._swapRows=function(p,g,D,E,y,C){for(var A=0;A<D;A++){var m=C[A],b=C[A+1],F=c(p,m,b,y),w=c(g,m,b,y);if(F<b&&w<b&&y[F]===p&&y[w]===g){if(E){var _=E[F];E[F]=E[w],E[w]=_}continue}if(F<b&&y[F]===p&&(w>=b||y[w]!==g)){var M=E?E[F]:void 0;y.splice(w,0,g),E&&E.splice(w,0,M),y.splice(w<=F?F+1:F,1),E&&E.splice(w<=F?F+1:F,1);continue}if(w<b&&y[w]===g&&(F>=b||y[F]!==p)){var B=E?E[w]:void 0;y.splice(F,0,p),E&&E.splice(F,0,B),y.splice(F<=w?w+1:w,1),E&&E.splice(F<=w?w+1:w,1)}}},n},{isClass:!0}),qs="number",Ps=["typed"];function Rs(r){var e=r.match(/(0[box])([0-9a-fA-F]*)\.([0-9a-fA-F]*)/);if(e){var t={"0b":2,"0o":8,"0x":16}[e[1]],i=e[2],n=e[3];return{input:r,radix:t,integerPart:i,fractionalPart:n}}else return null}function Us(r){for(var e=parseInt(r.integerPart,r.radix),t=0,i=0;i<r.fractionalPart.length;i++){var n=parseInt(r.fractionalPart[i],r.radix);t+=n/Math.pow(r.radix,i+1)}var u=e+t;if(isNaN(u))throw new SyntaxError('String "'+r.input+'" is not a valid number');return u}var Ls=rr(qs,Ps,r=>{var{typed:e}=r,t=e("number",{"":function(){return 0},number:function(n){return n},string:function(n){if(n==="NaN")return NaN;var u=Rs(n);if(u)return Us(u);var s=0,v=n.match(/(0[box][0-9a-fA-F]*)i([0-9]*)/);v&&(s=Number(v[2]),n=v[1]);var l=Number(n);if(isNaN(l))throw new SyntaxError('String "'+n+'" is not a valid number');if(v){if(l>2**s-1)throw new SyntaxError('String "'.concat(n,'" is out of range'));l>=2**(s-1)&&(l=l-2**s)}return l},BigNumber:function(n){return n.toNumber()},bigint:function(n){return Number(n)},Fraction:function(n){return n.valueOf()},Unit:e.referToSelf(i=>n=>{var u=n.clone();return u.value=i(n.value),u}),null:function(n){return 0},"Unit, string | Unit":function(n,u){return n.toNumber(u)},"Array | Matrix":e.referToSelf(i=>n=>Hr(n,i))});return t.fromJSON=function(i){return parseFloat(i.value)},t}),Zs="bignumber",Vs=["typed","BigNumber"],Ys=rr(Zs,Vs,r=>{var{typed:e,BigNumber:t}=r;return e("bignumber",{"":function(){return new t(0)},number:function(n){return new t(n+"")},string:function(n){var u=n.match(/(0[box][0-9a-fA-F]*)i([0-9]*)/);if(u){var s=u[2],v=t(u[1]),l=new t(2).pow(Number(s));if(v.gt(l.sub(1)))throw new SyntaxError('String "'.concat(n,'" is out of range'));var c=new t(2).pow(Number(s)-1);return v.gte(c)?v.sub(l):v}return new t(n)},BigNumber:function(n){return n},bigint:function(n){return new t(n.toString())},Unit:e.referToSelf(i=>n=>{var u=n.clone();return u.value=i(n.value),u}),Fraction:function(n){return new t(n.n).div(n.d).times(n.s)},null:function(n){return new t(0)},"Array | Matrix":e.referToSelf(i=>n=>Hr(n,i))})}),Js="complex",Gs=["typed","Complex"],Qs=rr(Js,Gs,r=>{var{typed:e,Complex:t}=r;return e("complex",{"":function(){return t.ZERO},number:function(n){return new t(n,0)},"number, number":function(n,u){return new t(n,u)},"BigNumber, BigNumber":function(n,u){return new t(n.toNumber(),u.toNumber())},Fraction:function(n){return new t(n.valueOf(),0)},Complex:function(n){return n.clone()},string:function(n){return t(n)},null:function(n){return t(0)},Object:function(n){if("re"in n&&"im"in n)return new t(n.re,n.im);if("r"in n&&"phi"in n||"abs"in n&&"arg"in n)return new t(n);throw new Error("Expected object with properties (re and im) or (r and phi) or (abs and arg)")},"Array | Matrix":e.referToSelf(i=>n=>Hr(n,i))})}),Xs="fraction",Ks=["typed","Fraction"],Ws=rr(Xs,Ks,r=>{var{typed:e,Fraction:t}=r;return e("fraction",{number:function(n){if(!isFinite(n)||isNaN(n))throw new Error(n+" cannot be represented as a fraction");return new t(n)},string:function(n){return new t(n)},"number, number":function(n,u){return new t(n,u)},null:function(n){return new t(0)},BigNumber:function(n){return new t(n.toString())},bigint:function(n){return new t(n.toString())},Fraction:function(n){return n},Unit:e.referToSelf(i=>n=>{var u=n.clone();return u.value=i(n.value),u}),Object:function(n){return new t(n)},"Array | Matrix":e.referToSelf(i=>n=>Hr(n,i))})}),Bn="matrix",Hs=["typed","Matrix","DenseMatrix","SparseMatrix"],ks=rr(Bn,Hs,r=>{var{typed:e,Matrix:t,DenseMatrix:i,SparseMatrix:n}=r;return e(Bn,{"":function(){return u([])},string:function(v){return u([],v)},"string, string":function(v,l){return u([],v,l)},Array:function(v){return u(v)},Matrix:function(v){return u(v,v.storage())},"Array | Matrix, string":u,"Array | Matrix, string, string":u});function u(s,v,l){if(v==="dense"||v==="default"||v===void 0)return new i(s,l);if(v==="sparse")return new n(s,l);throw new TypeError("Unknown matrix type "+JSON.stringify(v)+".")}}),Nn="matrixFromColumns",js=["typed","matrix","flatten","size"],rf=rr(Nn,js,r=>{var{typed:e,matrix:t,flatten:i,size:n}=r;return e(Nn,{"...Array":function(l){return u(l)},"...Matrix":function(l){return t(u(l.map(c=>c.toArray())))}});function u(v){if(v.length===0)throw new TypeError("At least one column is needed to construct a matrix.");for(var l=s(v[0]),c=[],o=0;o<l;o++)c[o]=[];for(var a of v){var f=s(a);if(f!==l)throw new TypeError("The vectors had different length: "+(l|0)+"  "+(f|0));for(var h=i(a),d=0;d<l;d++)c[d].push(h[d])}return c}function s(v){var l=n(v);if(l.length===1)return l[0];if(l.length===2){if(l[0]===1)return l[1];if(l[1]===1)return l[0];throw new TypeError("At least one of the arguments is not a vector.")}else throw new TypeError("Only one- or two-dimensional vectors are supported.")}}),xn="unaryMinus",ef=["typed"],tf=rr(xn,ef,r=>{var{typed:e}=r;return e(xn,{number:aa,"Complex | BigNumber | Fraction":t=>t.neg(),bigint:t=>-t,Unit:e.referToSelf(t=>i=>{var n=i.clone();return n.value=e.find(t,n.valueType())(i.value),n}),"Array | Matrix":e.referToSelf(t=>i=>Hr(i,t))})}),Tn="abs",nf=["typed"],af=rr(Tn,nf,r=>{var{typed:e}=r;return e(Tn,{number:ea,"Complex | BigNumber | Fraction | Unit":t=>t.abs(),bigint:t=>t<0n?-t:t,"Array | Matrix":e.referToSelf(t=>i=>Hr(i,t))})}),zn="addScalar",uf=["typed"],of=rr(zn,uf,r=>{var{typed:e}=r;return e(zn,{"number, number":ta,"Complex, Complex":function(i,n){return i.add(n)},"BigNumber, BigNumber":function(i,n){return i.plus(n)},"bigint, bigint":function(i,n){return i+n},"Fraction, Fraction":function(i,n){return i.add(n)},"Unit, Unit":e.referToSelf(t=>(i,n)=>{if(i.value===null||i.value===void 0)throw new Error("Parameter x contains a unit with undefined value");if(n.value===null||n.value===void 0)throw new Error("Parameter y contains a unit with undefined value");if(!i.equalBase(n))throw new Error("Units do not match");var u=i.clone();return u.value=e.find(t,[u.valueType(),n.valueType()])(u.value,n.value),u.fixPrefix=!1,u})})}),On="subtractScalar",sf=["typed"],ff=rr(On,sf,r=>{var{typed:e}=r;return e(On,{"number, number":na,"Complex, Complex":function(i,n){return i.sub(n)},"BigNumber, BigNumber":function(i,n){return i.minus(n)},"bigint, bigint":function(i,n){return i-n},"Fraction, Fraction":function(i,n){return i.sub(n)},"Unit, Unit":e.referToSelf(t=>(i,n)=>{if(i.value===null||i.value===void 0)throw new Error("Parameter x contains a unit with undefined value");if(n.value===null||n.value===void 0)throw new Error("Parameter y contains a unit with undefined value");if(!i.equalBase(n))throw new Error("Units do not match");var u=i.clone();return u.value=e.find(t,[u.valueType(),n.valueType()])(u.value,n.value),u.fixPrefix=!1,u})})}),cf="matAlgo11xS0s",lf=["typed","equalScalar"],vf=rr(cf,lf,r=>{var{typed:e,equalScalar:t}=r;return function(n,u,s,v){var l=n._values,c=n._index,o=n._ptr,a=n._size,f=n._datatype;if(!l)throw new Error("Cannot perform operation on Pattern Sparse Matrix and Scalar value");var h=a[0],d=a[1],p,g=t,D=0,E=s;typeof f=="string"&&(p=f,g=e.find(t,[p,p]),D=e.convert(0,p),u=e.convert(u,p),E=e.find(s,[p,p]));for(var y=[],C=[],A=[],m=0;m<d;m++){A[m]=C.length;for(var b=o[m],F=o[m+1],w=b;w<F;w++){var _=c[w],M=v?E(u,l[w]):E(l[w],u);g(M,D)||(C.push(_),y.push(M))}}return A[d]=C.length,n.createSparseMatrix({values:y,index:C,ptr:A,size:[h,d],datatype:p})}}),hf="matAlgo12xSfs",pf=["typed","DenseMatrix"],Ie=rr(hf,pf,r=>{var{typed:e,DenseMatrix:t}=r;return function(n,u,s,v){var l=n._values,c=n._index,o=n._ptr,a=n._size,f=n._datatype;if(!l)throw new Error("Cannot perform operation on Pattern Sparse Matrix and Scalar value");var h=a[0],d=a[1],p,g=s;typeof f=="string"&&(p=f,u=e.convert(u,p),g=e.find(s,[p,p]));for(var D=[],E=[],y=[],C=0;C<d;C++){for(var A=C+1,m=o[C],b=o[C+1],F=m;F<b;F++){var w=c[F];E[w]=l[F],y[w]=A}for(var _=0;_<h;_++)C===0&&(D[_]=[]),y[_]===A?D[_][C]=v?g(u,E[_]):g(E[_],u):D[_][C]=v?g(u,0):g(0,u)}return new t({data:D,size:[h,d],datatype:p})}}),df="matAlgo14xDs",mf=["typed"],sa=rr(df,mf,r=>{var{typed:e}=r;return function(n,u,s,v){var l=n._data,c=n._size,o=n._datatype,a,f=s;typeof o=="string"&&(a=o,u=e.convert(u,a),f=e.find(s,[a,a]));var h=c.length>0?t(f,0,c,c[0],l,u,v):[];return n.createDenseMatrix({data:h,size:Er(c),datatype:a})};function t(i,n,u,s,v,l,c){var o=[];if(n===u.length-1)for(var a=0;a<s;a++)o[a]=c?i(l,v[a]):i(v[a],l);else for(var f=0;f<s;f++)o[f]=t(i,n+1,u,u[n+1],v[f],l,c);return o}}),Df="matAlgo03xDSf",gf=["typed"],$e=rr(Df,gf,r=>{var{typed:e}=r;return function(i,n,u,s){var v=i._data,l=i._size,c=i._datatype||i.getDataType(),o=n._values,a=n._index,f=n._ptr,h=n._size,d=n._datatype||n._data===void 0?n._datatype:n.getDataType();if(l.length!==h.length)throw new wr(l.length,h.length);if(l[0]!==h[0]||l[1]!==h[1])throw new RangeError("Dimension mismatch. Matrix A ("+l+") must match Matrix B ("+h+")");if(!o)throw new Error("Cannot perform operation on Dense Matrix and Pattern Sparse Matrix");var p=l[0],g=l[1],D,E=0,y=u;typeof c=="string"&&c===d&&c!=="mixed"&&(D=c,E=e.convert(0,D),y=e.find(u,[D,D]));for(var C=[],A=0;A<p;A++)C[A]=[];for(var m=[],b=[],F=0;F<g;F++){for(var w=F+1,_=f[F],M=f[F+1],B=_;B<M;B++){var O=a[B];m[O]=s?y(o[B],v[O][F]):y(v[O][F],o[B]),b[O]=w}for(var z=0;z<p;z++)b[z]===w?C[z][F]=m[z]:C[z][F]=s?y(E,v[z][F]):y(v[z][F],E)}return i.createDenseMatrix({data:C,size:[p,g],datatype:c===i._datatype&&d===n._datatype?D:void 0})}}),yf="matAlgo05xSfSf",wf=["typed","equalScalar"],Af=rr(yf,wf,r=>{var{typed:e,equalScalar:t}=r;return function(n,u,s){var v=n._values,l=n._index,c=n._ptr,o=n._size,a=n._datatype||n._data===void 0?n._datatype:n.getDataType(),f=u._values,h=u._index,d=u._ptr,p=u._size,g=u._datatype||u._data===void 0?u._datatype:u.getDataType();if(o.length!==p.length)throw new wr(o.length,p.length);if(o[0]!==p[0]||o[1]!==p[1])throw new RangeError("Dimension mismatch. Matrix A ("+o+") must match Matrix B ("+p+")");var D=o[0],E=o[1],y,C=t,A=0,m=s;typeof a=="string"&&a===g&&a!=="mixed"&&(y=a,C=e.find(t,[y,y]),A=e.convert(0,y),m=e.find(s,[y,y]));var b=v&&f?[]:void 0,F=[],w=[],_=b?[]:void 0,M=b?[]:void 0,B=[],O=[],z,I,N,Y;for(I=0;I<E;I++){w[I]=F.length;var q=I+1;for(N=c[I],Y=c[I+1];N<Y;N++)z=l[N],F.push(z),B[z]=q,_&&(_[z]=v[N]);for(N=d[I],Y=d[I+1];N<Y;N++)z=h[N],B[z]!==q&&F.push(z),O[z]=q,M&&(M[z]=f[N]);if(b)for(N=w[I];N<F.length;){z=F[N];var T=B[z],Z=O[z];if(T===q||Z===q){var W=T===q?_[z]:A,R=Z===q?M[z]:A,U=m(W,R);C(U,A)?F.splice(N,1):(b.push(U),N++)}}}return w[E]=F.length,n.createSparseMatrix({values:b,index:F,ptr:w,size:[D,E],datatype:a===n._datatype&&g===u._datatype?y:void 0})}}),Ef="matAlgo13xDD",Ff=["typed"],Cf=rr(Ef,Ff,r=>{var{typed:e}=r;return function(n,u,s){var v=n._data,l=n._size,c=n._datatype,o=u._data,a=u._size,f=u._datatype,h=[];if(l.length!==a.length)throw new wr(l.length,a.length);for(var d=0;d<l.length;d++){if(l[d]!==a[d])throw new RangeError("Dimension mismatch. Matrix A ("+l+") must match Matrix B ("+a+")");h[d]=l[d]}var p,g=s;typeof c=="string"&&c===f&&(p=c,g=e.find(s,[p,p]));var D=h.length>0?t(g,0,h,h[0],v,o):[];return n.createDenseMatrix({data:D,size:h,datatype:p})};function t(i,n,u,s,v,l){var c=[];if(n===u.length-1)for(var o=0;o<s;o++)c[o]=i(v[o],l[o]);else for(var a=0;a<s;a++)c[a]=t(i,n+1,u,u[n+1],v[a],l[a]);return c}});function Ur(r,e){if(De(r.size(),e.size()))return[r,e];var t=ki(r.size(),e.size());return[r,e].map(i=>bf(i,t))}function bf(r,e){return De(r.size(),e)?r:r.create(Yt(r.valueOf(),e),r.datatype())}var _f="matrixAlgorithmSuite",Mf=["typed","matrix"],Ee=rr(_f,Mf,r=>{var{typed:e,matrix:t}=r,i=Cf({typed:e}),n=sa({typed:e});return function(s){var v=s.elop,l=s.SD||s.DS,c;v?(c={"DenseMatrix, DenseMatrix":(h,d)=>i(...Ur(h,d),v),"Array, Array":(h,d)=>i(...Ur(t(h),t(d)),v).valueOf(),"Array, DenseMatrix":(h,d)=>i(...Ur(t(h),d),v),"DenseMatrix, Array":(h,d)=>i(...Ur(h,t(d)),v)},s.SS&&(c["SparseMatrix, SparseMatrix"]=(h,d)=>s.SS(...Ur(h,d),v,!1)),s.DS&&(c["DenseMatrix, SparseMatrix"]=(h,d)=>s.DS(...Ur(h,d),v,!1),c["Array, SparseMatrix"]=(h,d)=>s.DS(...Ur(t(h),d),v,!1)),l&&(c["SparseMatrix, DenseMatrix"]=(h,d)=>l(...Ur(d,h),v,!0),c["SparseMatrix, Array"]=(h,d)=>l(...Ur(t(d),h),v,!0))):(c={"DenseMatrix, DenseMatrix":e.referToSelf(h=>(d,p)=>i(...Ur(d,p),h)),"Array, Array":e.referToSelf(h=>(d,p)=>i(...Ur(t(d),t(p)),h).valueOf()),"Array, DenseMatrix":e.referToSelf(h=>(d,p)=>i(...Ur(t(d),p),h)),"DenseMatrix, Array":e.referToSelf(h=>(d,p)=>i(...Ur(d,t(p)),h))},s.SS&&(c["SparseMatrix, SparseMatrix"]=e.referToSelf(h=>(d,p)=>s.SS(...Ur(d,p),h,!1))),s.DS&&(c["DenseMatrix, SparseMatrix"]=e.referToSelf(h=>(d,p)=>s.DS(...Ur(d,p),h,!1)),c["Array, SparseMatrix"]=e.referToSelf(h=>(d,p)=>s.DS(...Ur(t(d),p),h,!1))),l&&(c["SparseMatrix, DenseMatrix"]=e.referToSelf(h=>(d,p)=>l(...Ur(p,d),h,!0)),c["SparseMatrix, Array"]=e.referToSelf(h=>(d,p)=>l(...Ur(t(p),d),h,!0))));var o=s.scalar||"any",a=s.Ds||s.Ss;a&&(v?(c["DenseMatrix,"+o]=(h,d)=>n(h,d,v,!1),c[o+", DenseMatrix"]=(h,d)=>n(d,h,v,!0),c["Array,"+o]=(h,d)=>n(t(h),d,v,!1).valueOf(),c[o+", Array"]=(h,d)=>n(t(d),h,v,!0).valueOf()):(c["DenseMatrix,"+o]=e.referToSelf(h=>(d,p)=>n(d,p,h,!1)),c[o+", DenseMatrix"]=e.referToSelf(h=>(d,p)=>n(p,d,h,!0)),c["Array,"+o]=e.referToSelf(h=>(d,p)=>n(t(d),p,h,!1).valueOf()),c[o+", Array"]=e.referToSelf(h=>(d,p)=>n(t(p),d,h,!0).valueOf())));var f=s.sS!==void 0?s.sS:s.Ss;return v?(s.Ss&&(c["SparseMatrix,"+o]=(h,d)=>s.Ss(h,d,v,!1)),f&&(c[o+", SparseMatrix"]=(h,d)=>f(d,h,v,!0))):(s.Ss&&(c["SparseMatrix,"+o]=e.referToSelf(h=>(d,p)=>s.Ss(d,p,h,!1))),f&&(c[o+", SparseMatrix"]=e.referToSelf(h=>(d,p)=>f(p,d,h,!0)))),v&&v.signatures&&qu(c,v.signatures),c}}),Sf="matAlgo01xDSid",Bf=["typed"],fa=rr(Sf,Bf,r=>{var{typed:e}=r;return function(i,n,u,s){var v=i._data,l=i._size,c=i._datatype||i.getDataType(),o=n._values,a=n._index,f=n._ptr,h=n._size,d=n._datatype||n._data===void 0?n._datatype:n.getDataType();if(l.length!==h.length)throw new wr(l.length,h.length);if(l[0]!==h[0]||l[1]!==h[1])throw new RangeError("Dimension mismatch. Matrix A ("+l+") must match Matrix B ("+h+")");if(!o)throw new Error("Cannot perform operation on Dense Matrix and Pattern Sparse Matrix");var p=l[0],g=l[1],D=typeof c=="string"&&c!=="mixed"&&c===d?c:void 0,E=D?e.find(u,[D,D]):u,y,C,A=[];for(y=0;y<p;y++)A[y]=[];var m=[],b=[];for(C=0;C<g;C++){for(var F=C+1,w=f[C],_=f[C+1],M=w;M<_;M++)y=a[M],m[y]=s?E(o[M],v[y][C]):E(v[y][C],o[M]),b[y]=F;for(y=0;y<p;y++)b[y]===F?A[y][C]=m[y]:A[y][C]=v[y][C]}return i.createDenseMatrix({data:A,size:[p,g],datatype:c===i._datatype&&d===n._datatype?D:void 0})}}),Nf="matAlgo04xSidSid",xf=["typed","equalScalar"],Tf=rr(Nf,xf,r=>{var{typed:e,equalScalar:t}=r;return function(n,u,s){var v=n._values,l=n._index,c=n._ptr,o=n._size,a=n._datatype||n._data===void 0?n._datatype:n.getDataType(),f=u._values,h=u._index,d=u._ptr,p=u._size,g=u._datatype||u._data===void 0?u._datatype:u.getDataType();if(o.length!==p.length)throw new wr(o.length,p.length);if(o[0]!==p[0]||o[1]!==p[1])throw new RangeError("Dimension mismatch. Matrix A ("+o+") must match Matrix B ("+p+")");var D=o[0],E=o[1],y,C=t,A=0,m=s;typeof a=="string"&&a===g&&a!=="mixed"&&(y=a,C=e.find(t,[y,y]),A=e.convert(0,y),m=e.find(s,[y,y]));var b=v&&f?[]:void 0,F=[],w=[],_=v&&f?[]:void 0,M=v&&f?[]:void 0,B=[],O=[],z,I,N,Y,q;for(I=0;I<E;I++){w[I]=F.length;var T=I+1;for(Y=c[I],q=c[I+1],N=Y;N<q;N++)z=l[N],F.push(z),B[z]=T,_&&(_[z]=v[N]);for(Y=d[I],q=d[I+1],N=Y;N<q;N++)if(z=h[N],B[z]===T){if(_){var Z=m(_[z],f[N]);C(Z,A)?B[z]=null:_[z]=Z}}else F.push(z),O[z]=T,M&&(M[z]=f[N]);if(_&&M)for(N=w[I];N<F.length;)z=F[N],B[z]===T?(b[N]=_[z],N++):O[z]===T?(b[N]=M[z],N++):F.splice(N,1)}return w[E]=F.length,n.createSparseMatrix({values:b,index:F,ptr:w,size:[D,E],datatype:a===n._datatype&&g===u._datatype?y:void 0})}}),zf="matAlgo10xSids",Of=["typed","DenseMatrix"],ca=rr(zf,Of,r=>{var{typed:e,DenseMatrix:t}=r;return function(n,u,s,v){var l=n._values,c=n._index,o=n._ptr,a=n._size,f=n._datatype;if(!l)throw new Error("Cannot perform operation on Pattern Sparse Matrix and Scalar value");var h=a[0],d=a[1],p,g=s;typeof f=="string"&&(p=f,u=e.convert(u,p),g=e.find(s,[p,p]));for(var D=[],E=[],y=[],C=0;C<d;C++){for(var A=C+1,m=o[C],b=o[C+1],F=m;F<b;F++){var w=c[F];E[w]=l[F],y[w]=A}for(var _=0;_<h;_++)C===0&&(D[_]=[]),y[_]===A?D[_][C]=v?g(u,E[_]):g(E[_],u):D[_][C]=u}return new t({data:D,size:[h,d],datatype:p})}}),If="multiplyScalar",$f=["typed"],qf=rr(If,$f,r=>{var{typed:e}=r;return e("multiplyScalar",{"number, number":ia,"Complex, Complex":function(i,n){return i.mul(n)},"BigNumber, BigNumber":function(i,n){return i.times(n)},"bigint, bigint":function(i,n){return i*n},"Fraction, Fraction":function(i,n){return i.mul(n)},"number | Fraction | BigNumber | Complex, Unit":(t,i)=>i.multiply(t),"Unit, number | Fraction | BigNumber | Complex | Unit":(t,i)=>t.multiply(i)})}),In="multiply",Pf=["typed","matrix","addScalar","multiplyScalar","equalScalar","dot"],Rf=rr(In,Pf,r=>{var{typed:e,matrix:t,addScalar:i,multiplyScalar:n,equalScalar:u,dot:s}=r,v=vf({typed:e,equalScalar:u}),l=sa({typed:e});function c(A,m){switch(A.length){case 1:switch(m.length){case 1:if(A[0]!==m[0])throw new RangeError("Dimension mismatch in multiplication. Vectors must have the same length");break;case 2:if(A[0]!==m[0])throw new RangeError("Dimension mismatch in multiplication. Vector length ("+A[0]+") must match Matrix rows ("+m[0]+")");break;default:throw new Error("Can only multiply a 1 or 2 dimensional matrix (Matrix B has "+m.length+" dimensions)")}break;case 2:switch(m.length){case 1:if(A[1]!==m[0])throw new RangeError("Dimension mismatch in multiplication. Matrix columns ("+A[1]+") must match Vector length ("+m[0]+")");break;case 2:if(A[1]!==m[0])throw new RangeError("Dimension mismatch in multiplication. Matrix A columns ("+A[1]+") must match Matrix B rows ("+m[0]+")");break;default:throw new Error("Can only multiply a 1 or 2 dimensional matrix (Matrix B has "+m.length+" dimensions)")}break;default:throw new Error("Can only multiply a 1 or 2 dimensional matrix (Matrix A has "+A.length+" dimensions)")}}function o(A,m,b){if(b===0)throw new Error("Cannot multiply two empty vectors");return s(A,m)}function a(A,m){if(m.storage()!=="dense")throw new Error("Support for SparseMatrix not implemented");return f(A,m)}function f(A,m){var b=A._data,F=A._size,w=A._datatype||A.getDataType(),_=m._data,M=m._size,B=m._datatype||m.getDataType(),O=F[0],z=M[1],I,N=i,Y=n;w&&B&&w===B&&typeof w=="string"&&w!=="mixed"&&(I=w,N=e.find(i,[I,I]),Y=e.find(n,[I,I]));for(var q=[],T=0;T<z;T++){for(var Z=Y(b[0],_[0][T]),W=1;W<O;W++)Z=N(Z,Y(b[W],_[W][T]));q[T]=Z}return A.createDenseMatrix({data:q,size:[z],datatype:w===A._datatype&&B===m._datatype?I:void 0})}var h=e("_multiplyMatrixVector",{"DenseMatrix, any":p,"SparseMatrix, any":E}),d=e("_multiplyMatrixMatrix",{"DenseMatrix, DenseMatrix":g,"DenseMatrix, SparseMatrix":D,"SparseMatrix, DenseMatrix":y,"SparseMatrix, SparseMatrix":C});function p(A,m){var b=A._data,F=A._size,w=A._datatype||A.getDataType(),_=m._data,M=m._datatype||m.getDataType(),B=F[0],O=F[1],z,I=i,N=n;w&&M&&w===M&&typeof w=="string"&&w!=="mixed"&&(z=w,I=e.find(i,[z,z]),N=e.find(n,[z,z]));for(var Y=[],q=0;q<B;q++){for(var T=b[q],Z=N(T[0],_[0]),W=1;W<O;W++)Z=I(Z,N(T[W],_[W]));Y[q]=Z}return A.createDenseMatrix({data:Y,size:[B],datatype:w===A._datatype&&M===m._datatype?z:void 0})}function g(A,m){var b=A._data,F=A._size,w=A._datatype||A.getDataType(),_=m._data,M=m._size,B=m._datatype||m.getDataType(),O=F[0],z=F[1],I=M[1],N,Y=i,q=n;w&&B&&w===B&&typeof w=="string"&&w!=="mixed"&&w!=="mixed"&&(N=w,Y=e.find(i,[N,N]),q=e.find(n,[N,N]));for(var T=[],Z=0;Z<O;Z++){var W=b[Z];T[Z]=[];for(var R=0;R<I;R++){for(var U=q(W[0],_[0][R]),V=1;V<z;V++)U=Y(U,q(W[V],_[V][R]));T[Z][R]=U}}return A.createDenseMatrix({data:T,size:[O,I],datatype:w===A._datatype&&B===m._datatype?N:void 0})}function D(A,m){var b=A._data,F=A._size,w=A._datatype||A.getDataType(),_=m._values,M=m._index,B=m._ptr,O=m._size,z=m._datatype||m._data===void 0?m._datatype:m.getDataType();if(!_)throw new Error("Cannot multiply Dense Matrix times Pattern only Matrix");var I=F[0],N=O[1],Y,q=i,T=n,Z=u,W=0;w&&z&&w===z&&typeof w=="string"&&w!=="mixed"&&(Y=w,q=e.find(i,[Y,Y]),T=e.find(n,[Y,Y]),Z=e.find(u,[Y,Y]),W=e.convert(0,Y));for(var R=[],U=[],V=[],nr=m.createSparseMatrix({values:R,index:U,ptr:V,size:[I,N],datatype:w===A._datatype&&z===m._datatype?Y:void 0}),k=0;k<N;k++){V[k]=U.length;var L=B[k],X=B[k+1];if(X>L)for(var K=0,G=0;G<I;G++){for(var ur=G+1,j=void 0,or=L;or<X;or++){var cr=M[or];K!==ur?(j=T(b[G][cr],_[or]),K=ur):j=q(j,T(b[G][cr],_[or]))}K===ur&&!Z(j,W)&&(U.push(G),R.push(j))}}return V[N]=U.length,nr}function E(A,m){var b=A._values,F=A._index,w=A._ptr,_=A._datatype||A._data===void 0?A._datatype:A.getDataType();if(!b)throw new Error("Cannot multiply Pattern only Matrix times Dense Matrix");var M=m._data,B=m._datatype||m.getDataType(),O=A._size[0],z=m._size[0],I=[],N=[],Y=[],q,T=i,Z=n,W=u,R=0;_&&B&&_===B&&typeof _=="string"&&_!=="mixed"&&(q=_,T=e.find(i,[q,q]),Z=e.find(n,[q,q]),W=e.find(u,[q,q]),R=e.convert(0,q));var U=[],V=[];Y[0]=0;for(var nr=0;nr<z;nr++){var k=M[nr];if(!W(k,R))for(var L=w[nr],X=w[nr+1],K=L;K<X;K++){var G=F[K];V[G]?U[G]=T(U[G],Z(k,b[K])):(V[G]=!0,N.push(G),U[G]=Z(k,b[K]))}}for(var ur=N.length,j=0;j<ur;j++){var or=N[j];I[j]=U[or]}return Y[1]=N.length,A.createSparseMatrix({values:I,index:N,ptr:Y,size:[O,1],datatype:_===A._datatype&&B===m._datatype?q:void 0})}function y(A,m){var b=A._values,F=A._index,w=A._ptr,_=A._datatype||A._data===void 0?A._datatype:A.getDataType();if(!b)throw new Error("Cannot multiply Pattern only Matrix times Dense Matrix");var M=m._data,B=m._datatype||m.getDataType(),O=A._size[0],z=m._size[0],I=m._size[1],N,Y=i,q=n,T=u,Z=0;_&&B&&_===B&&typeof _=="string"&&_!=="mixed"&&(N=_,Y=e.find(i,[N,N]),q=e.find(n,[N,N]),T=e.find(u,[N,N]),Z=e.convert(0,N));for(var W=[],R=[],U=[],V=A.createSparseMatrix({values:W,index:R,ptr:U,size:[O,I],datatype:_===A._datatype&&B===m._datatype?N:void 0}),nr=[],k=[],L=0;L<I;L++){U[L]=R.length;for(var X=L+1,K=0;K<z;K++){var G=M[K][L];if(!T(G,Z))for(var ur=w[K],j=w[K+1],or=ur;or<j;or++){var cr=F[or];k[cr]!==X?(k[cr]=X,R.push(cr),nr[cr]=q(G,b[or])):nr[cr]=Y(nr[cr],q(G,b[or]))}}for(var pr=U[L],mr=R.length,Dr=pr;Dr<mr;Dr++){var lr=R[Dr];W[Dr]=nr[lr]}}return U[I]=R.length,V}function C(A,m){var b=A._values,F=A._index,w=A._ptr,_=A._datatype||A._data===void 0?A._datatype:A.getDataType(),M=m._values,B=m._index,O=m._ptr,z=m._datatype||m._data===void 0?m._datatype:m.getDataType(),I=A._size[0],N=m._size[1],Y=b&&M,q,T=i,Z=n;_&&z&&_===z&&typeof _=="string"&&_!=="mixed"&&(q=_,T=e.find(i,[q,q]),Z=e.find(n,[q,q]));for(var W=Y?[]:void 0,R=[],U=[],V=A.createSparseMatrix({values:W,index:R,ptr:U,size:[I,N],datatype:_===A._datatype&&z===m._datatype?q:void 0}),nr=Y?[]:void 0,k=[],L,X,K,G,ur,j,or,cr,pr=0;pr<N;pr++){U[pr]=R.length;var mr=pr+1;for(ur=O[pr],j=O[pr+1],G=ur;G<j;G++)if(cr=B[G],Y)for(X=w[cr],K=w[cr+1],L=X;L<K;L++)or=F[L],k[or]!==mr?(k[or]=mr,R.push(or),nr[or]=Z(M[G],b[L])):nr[or]=T(nr[or],Z(M[G],b[L]));else for(X=w[cr],K=w[cr+1],L=X;L<K;L++)or=F[L],k[or]!==mr&&(k[or]=mr,R.push(or));if(Y)for(var Dr=U[pr],lr=R.length,Ar=Dr;Ar<lr;Ar++){var yr=R[Ar];W[Ar]=nr[yr]}}return U[N]=R.length,V}return e(In,n,{"Array, Array":e.referTo("Matrix, Matrix",A=>(m,b)=>{c(Mr(m),Mr(b));var F=A(t(m),t(b));return Sr(F)?F.valueOf():F}),"Matrix, Matrix":function(m,b){var F=m.size(),w=b.size();return c(F,w),F.length===1?w.length===1?o(m,b,F[0]):a(m,b):w.length===1?h(m,b):d(m,b)},"Matrix, Array":e.referTo("Matrix,Matrix",A=>(m,b)=>A(m,t(b))),"Array, Matrix":e.referToSelf(A=>(m,b)=>A(t(m,b.storage()),b)),"SparseMatrix, any":function(m,b){return v(m,b,n,!1)},"DenseMatrix, any":function(m,b){return l(m,b,n,!1)},"any, SparseMatrix":function(m,b){return v(b,m,n,!0)},"any, DenseMatrix":function(m,b){return l(b,m,n,!0)},"Array, any":function(m,b){return l(t(m),b,n,!1).valueOf()},"any, Array":function(m,b){return l(t(b),m,n,!0).valueOf()},"any, any":n,"any, any, ...any":e.referToSelf(A=>(m,b,F)=>{for(var w=A(m,b),_=0;_<F.length;_++)w=A(w,F[_]);return w})})}),$n="sign",Uf=["typed","BigNumber","Fraction","complex"],Lf=rr($n,Uf,r=>{var{typed:e,BigNumber:t,complex:i,Fraction:n}=r;return e($n,{number:Jt,Complex:function(s){return s.im===0?i(Jt(s.re)):s.sign()},BigNumber:function(s){return new t(s.cmp(0))},bigint:function(s){return s>0n?1n:s<0n?-1n:0n},Fraction:function(s){return new n(s.s,1)},"Array | Matrix":e.referToSelf(u=>s=>Hr(s,u)),Unit:e.referToSelf(u=>s=>{if(!s._isDerived()&&s.units[0].unit.offset!==0)throw new TypeError("sign is ambiguous for units with offset");return e.find(u,s.valueType())(s.value)})})}),Zf="sqrt",Vf=["config","typed","Complex"],Yf=rr(Zf,Vf,r=>{var{config:e,typed:t,Complex:i}=r;return t("sqrt",{number:n,Complex:function(s){return s.sqrt()},BigNumber:function(s){return!s.isNegative()||e.predictable?s.sqrt():n(s.toNumber())},Unit:function(s){return s.pow(.5)}});function n(u){return isNaN(u)?NaN:u>=0||e.predictable?Math.sqrt(u):new i(u,0).sqrt()}}),qn="subtract",Jf=["typed","matrix","equalScalar","subtractScalar","unaryMinus","DenseMatrix","concat"],Gf=rr(qn,Jf,r=>{var{typed:e,matrix:t,equalScalar:i,subtractScalar:n,unaryMinus:u,DenseMatrix:s,concat:v}=r,l=fa({typed:e}),c=$e({typed:e}),o=Af({typed:e,equalScalar:i}),a=ca({typed:e,DenseMatrix:s}),f=Ie({typed:e,DenseMatrix:s}),h=Ee({typed:e,matrix:t,concat:v});return e(qn,{"any, any":n},h({elop:n,SS:o,DS:l,SD:c,Ss:f,sS:a}))}),Qf="matAlgo07xSSf",Xf=["typed","DenseMatrix"],Je=rr(Qf,Xf,r=>{var{typed:e,DenseMatrix:t}=r;return function(u,s,v){var l=u._size,c=u._datatype||u._data===void 0?u._datatype:u.getDataType(),o=s._size,a=s._datatype||s._data===void 0?s._datatype:s.getDataType();if(l.length!==o.length)throw new wr(l.length,o.length);if(l[0]!==o[0]||l[1]!==o[1])throw new RangeError("Dimension mismatch. Matrix A ("+l+") must match Matrix B ("+o+")");var f=l[0],h=l[1],d,p=0,g=v;typeof c=="string"&&c===a&&c!=="mixed"&&(d=c,p=e.convert(0,d),g=e.find(v,[d,d]));var D,E,y=[];for(D=0;D<f;D++)y[D]=[];var C=[],A=[],m=[],b=[];for(E=0;E<h;E++){var F=E+1;for(i(u,E,m,C,F),i(s,E,b,A,F),D=0;D<f;D++){var w=m[D]===F?C[D]:p,_=b[D]===F?A[D]:p;y[D][E]=g(w,_)}}return new t({data:y,size:[f,h],datatype:c===u._datatype&&a===s._datatype?d:void 0})};function i(n,u,s,v,l){for(var c=n._values,o=n._index,a=n._ptr,f=a[u],h=a[u+1];f<h;f++){var d=o[f];s[d]=l,v[d]=c[f]}}}),Pn="conj",Kf=["typed"],Wf=rr(Pn,Kf,r=>{var{typed:e}=r;return e(Pn,{"number | BigNumber | Fraction":t=>t,Complex:t=>t.conjugate(),"Array | Matrix":e.referToSelf(t=>i=>Hr(i,t))})}),Rn="im",Hf=["typed"],kf=rr(Rn,Hf,r=>{var{typed:e}=r;return e(Rn,{number:()=>0,"BigNumber | Fraction":t=>t.mul(0),Complex:t=>t.im,"Array | Matrix":e.referToSelf(t=>i=>Hr(i,t))})}),Un="re",jf=["typed"],r0=rr(Un,jf,r=>{var{typed:e}=r;return e(Un,{"number | BigNumber | Fraction":t=>t,Complex:t=>t.re,"Array | Matrix":e.referToSelf(t=>i=>Hr(i,t))})}),Ln="concat",e0=["typed","matrix","isInteger"],t0=rr(Ln,e0,r=>{var{typed:e,matrix:t,isInteger:i}=r;return e(Ln,{"...Array | Matrix | number | BigNumber":function(u){var s,v=u.length,l=-1,c,o=!1,a=[];for(s=0;s<v;s++){var f=u[s];if(Sr(f)&&(o=!0),Nr(f)||Ir(f)){if(s!==v-1)throw new Error("Dimension must be specified as last argument");if(c=l,l=f.valueOf(),!i(l))throw new TypeError("Integer number expected for dimension");if(l<0||s>0&&l>c)throw new Ae(l,c+1)}else{var h=Er(f).valueOf(),d=Mr(h);if(a[s]=h,c=l,l=d.length-1,s>0&&l!==c)throw new wr(c+1,l+1)}}if(a.length===0)throw new SyntaxError("At least one matrix expected");for(var p=a.shift();a.length;)p=Hi(p,a.shift(),l);return o?t(p):p},"...string":function(u){return u.join("")}})}),Zn="column",n0=["typed","Index","matrix","range"],i0=rr(Zn,n0,r=>{var{typed:e,Index:t,matrix:i,range:n}=r;return e(Zn,{"Matrix, number":u,"Array, number":function(v,l){return u(i(Er(v)),l).valueOf()}});function u(s,v){if(s.size().length!==2)throw new Error("Only two dimensional matrix is supported");Br(v,s.size()[1]);var l=n(0,s.size()[0]),c=new t(l,v),o=s.subset(c);return Sr(o)?o:i([[o]])}}),Vn="diag",a0=["typed","matrix","DenseMatrix","SparseMatrix"],u0=rr(Vn,a0,r=>{var{typed:e,matrix:t,DenseMatrix:i,SparseMatrix:n}=r;return e(Vn,{Array:function(c){return u(c,0,Mr(c),null)},"Array, number":function(c,o){return u(c,o,Mr(c),null)},"Array, BigNumber":function(c,o){return u(c,o.toNumber(),Mr(c),null)},"Array, string":function(c,o){return u(c,0,Mr(c),o)},"Array, number, string":function(c,o,a){return u(c,o,Mr(c),a)},"Array, BigNumber, string":function(c,o,a){return u(c,o.toNumber(),Mr(c),a)},Matrix:function(c){return u(c,0,c.size(),c.storage())},"Matrix, number":function(c,o){return u(c,o,c.size(),c.storage())},"Matrix, BigNumber":function(c,o){return u(c,o.toNumber(),c.size(),c.storage())},"Matrix, string":function(c,o){return u(c,0,c.size(),o)},"Matrix, number, string":function(c,o,a){return u(c,o,c.size(),a)},"Matrix, BigNumber, string":function(c,o,a){return u(c,o.toNumber(),c.size(),a)}});function u(l,c,o,a){if(!xr(c))throw new TypeError("Second parameter in function diag must be an integer");var f=c>0?c:0,h=c<0?-c:0;switch(o.length){case 1:return s(l,c,a,o[0],h,f);case 2:return v(l,c,a,o,h,f)}throw new RangeError("Matrix for function diag must be 2 dimensional")}function s(l,c,o,a,f,h){var d=[a+f,a+h];if(o&&o!=="sparse"&&o!=="dense")throw new TypeError("Unknown matrix type ".concat(o,'"'));var p=o==="sparse"?n.diagonal(d,l,c):i.diagonal(d,l,c);return o!==null?p:p.valueOf()}function v(l,c,o,a,f,h){if(Sr(l)){var d=l.diagonal(c);return o!==null?o!==d.storage()?t(d,o):d:d.valueOf()}for(var p=Math.min(a[0]-f,a[1]-h),g=[],D=0;D<p;D++)g[D]=l[D+f][D+h];return o!==null?t(g):g}}),Yn="flatten",o0=["typed"],s0=rr(Yn,o0,r=>{var{typed:e}=r;return e(Yn,{Array:function(i){return Vt(i)},Matrix:function(i){return i.create(Vt(i.toArray()),i.datatype())}})}),Jn="getMatrixDataType",f0=["typed"],c0=rr(Jn,f0,r=>{var{typed:e}=r;return e(Jn,{Array:function(i){return St(i,ae)},Matrix:function(i){return i.getDataType()}})}),Gn="identity",l0=["typed","config","matrix","BigNumber","DenseMatrix","SparseMatrix"],v0=rr(Gn,l0,r=>{var{typed:e,config:t,matrix:i,BigNumber:n,DenseMatrix:u,SparseMatrix:s}=r;return e(Gn,{"":function(){return t.matrix==="Matrix"?i([]):[]},string:function(o){return i(o)},"number | BigNumber":function(o){return l(o,o,t.matrix==="Matrix"?"dense":void 0)},"number | BigNumber, string":function(o,a){return l(o,o,a)},"number | BigNumber, number | BigNumber":function(o,a){return l(o,a,t.matrix==="Matrix"?"dense":void 0)},"number | BigNumber, number | BigNumber, string":function(o,a,f){return l(o,a,f)},Array:function(o){return v(o)},"Array, string":function(o,a){return v(o,a)},Matrix:function(o){return v(o.valueOf(),o.storage())},"Matrix, string":function(o,a){return v(o.valueOf(),a)}});function v(c,o){switch(c.length){case 0:return o?i(o):[];case 1:return l(c[0],c[0],o);case 2:return l(c[0],c[1],o);default:throw new Error("Vector containing two values expected")}}function l(c,o,a){var f=Ir(c)||Ir(o)?n:null;if(Ir(c)&&(c=c.toNumber()),Ir(o)&&(o=o.toNumber()),!xr(c)||c<1)throw new Error("Parameters in function identity must be positive integers");if(!xr(o)||o<1)throw new Error("Parameters in function identity must be positive integers");var h=f?new n(1):1,d=f?new f(0):0,p=[c,o];if(a){if(a==="sparse")return s.diagonal(p,h,0,d);if(a==="dense")return u.diagonal(p,h,0,d);throw new TypeError('Unknown matrix type "'.concat(a,'"'))}for(var g=pt([],p,d),D=c<o?c:o,E=0;E<D;E++)g[E][E]=h;return g}}),Qn="kron",h0=["typed","matrix","multiplyScalar"],p0=rr(Qn,h0,r=>{var{typed:e,matrix:t,multiplyScalar:i}=r;return e(Qn,{"Matrix, Matrix":function(s,v){return t(n(s.toArray(),v.toArray()))},"Matrix, Array":function(s,v){return t(n(s.toArray(),v))},"Array, Matrix":function(s,v){return t(n(s,v.toArray()))},"Array, Array":n});function n(u,s){if(Mr(u).length===1&&(u=[u]),Mr(s).length===1&&(s=[s]),Mr(u).length>2||Mr(s).length>2)throw new RangeError("Vectors with dimensions greater then 2 are not supported expected (Size x = "+JSON.stringify(u.length)+", y = "+JSON.stringify(s.length)+")");var v=[],l=[];return u.map(function(c){return s.map(function(o){return l=[],v.push(l),c.map(function(a){return o.map(function(f){return l.push(i(a,f))})})})})&&v}});function la(){throw new Error('No "bignumber" implementation available')}function d0(){throw new Error('No "fraction" implementation available')}function va(){throw new Error('No "matrix" implementation available')}var Xn="range",m0=["typed","config","?matrix","?bignumber","smaller","smallerEq","larger","largerEq","add","isPositive"],D0=rr(Xn,m0,r=>{var{typed:e,config:t,matrix:i,bignumber:n,smaller:u,smallerEq:s,larger:v,largerEq:l,add:c,isPositive:o}=r;return e(Xn,{string:f,"string, boolean":f,"number, number":function(g,D){return a(h(g,D,1,!1))},"number, number, number":function(g,D,E){return a(h(g,D,E,!1))},"number, number, boolean":function(g,D,E){return a(h(g,D,1,E))},"number, number, number, boolean":function(g,D,E,y){return a(h(g,D,E,y))},"BigNumber, BigNumber":function(g,D){var E=g.constructor;return a(h(g,D,new E(1),!1))},"BigNumber, BigNumber, BigNumber":function(g,D,E){return a(h(g,D,E,!1))},"BigNumber, BigNumber, boolean":function(g,D,E){var y=g.constructor;return a(h(g,D,new y(1),E))},"BigNumber, BigNumber, BigNumber, boolean":function(g,D,E,y){return a(h(g,D,E,y))},"Unit, Unit, Unit":function(g,D,E){return a(h(g,D,E,!1))},"Unit, Unit, Unit, boolean":function(g,D,E,y){return a(h(g,D,E,y))}});function a(p){return t.matrix==="Matrix"?i?i(p):va():p}function f(p,g){var D=d(p);if(!D)throw new SyntaxError('String "'+p+'" is no valid range');return t.number==="BigNumber"?(n===void 0&&la(),a(h(n(D.start),n(D.end),n(D.step)))):a(h(D.start,D.end,D.step,g))}function h(p,g,D,E){for(var y=[],C=o(D)?E?s:u:E?l:v,A=p;C(A,g);)y.push(A),A=c(A,D);return y}function d(p){var g=p.split(":"),D=g.map(function(y){return Number(y)}),E=D.some(function(y){return isNaN(y)});if(E)return null;switch(D.length){case 2:return{start:D[0],end:D[1],step:1};case 3:return{start:D[0],end:D[2],step:D[1]};default:return null}}}),Kn="reshape",g0=["typed","isInteger","matrix"],y0=rr(Kn,g0,r=>{var{typed:e,isInteger:t}=r;return e(Kn,{"Matrix, Array":function(n,u){return n.reshape(u,!0)},"Array, Array":function(n,u){return u.forEach(function(s){if(!t(s))throw new TypeError("Invalid size for dimension: "+s)}),kt(n,u)}})}),Wn="size",w0=["typed","config","?matrix"],A0=rr(Wn,w0,r=>{var{typed:e,config:t,matrix:i}=r;return e(Wn,{Matrix:function(u){return u.create(u.size(),"number")},Array:Mr,string:function(u){return t.matrix==="Array"?[u.length]:i([u.length],"dense","number")},"number | Complex | BigNumber | Unit | boolean | null":function(u){return t.matrix==="Array"?[]:i?i([],"dense","number"):va()}})}),Hn="subset",E0=["typed","matrix","zeros","add"],F0=rr(Hn,E0,r=>{var{typed:e,matrix:t,zeros:i,add:n}=r;return e(Hn,{"Matrix, Index":function(v,l){return ze(l)?t():(ht(v,l),v.subset(l))},"Array, Index":e.referTo("Matrix, Index",function(s){return function(v,l){var c=s(t(v),l);return l.isScalar()?c:c.valueOf()}}),"Object, Index":b0,"string, Index":C0,"Matrix, Index, any, any":function(v,l,c,o){return ze(l)?v:(ht(v,l),v.clone().subset(l,u(c,l),o))},"Array, Index, any, any":e.referTo("Matrix, Index, any, any",function(s){return function(v,l,c,o){var a=s(t(v),l,c,o);return a.isMatrix?a.valueOf():a}}),"Array, Index, any":e.referTo("Matrix, Index, any, any",function(s){return function(v,l,c){return s(t(v),l,c,void 0).valueOf()}}),"Matrix, Index, any":e.referTo("Matrix, Index, any, any",function(s){return function(v,l,c){return s(v,l,c,void 0)}}),"string, Index, string":kn,"string, Index, string, string":kn,"Object, Index, any":_0});function u(s,v){if(typeof s=="string")throw new Error("can't boradcast a string");if(v._isScalar)return s;var l=v.size();if(l.every(c=>c>0))try{return n(s,i(l))}catch{return s}else return s}});function C0(r,e){if(!Et(e))throw new TypeError("Index expected");if(ze(e))return"";if(ht(Array.from(r),e),e.size().length!==1)throw new wr(e.size().length,1);var t=r.length;Br(e.min()[0],t),Br(e.max()[0],t);var i=e.dimension(0),n="";return i.forEach(function(u){n+=r.charAt(u)}),n}function kn(r,e,t,i){if(!e||e.isIndex!==!0)throw new TypeError("Index expected");if(ze(e))return r;if(ht(Array.from(r),e),e.size().length!==1)throw new wr(e.size().length,1);if(i!==void 0){if(typeof i!="string"||i.length!==1)throw new TypeError("Single character expected as defaultValue")}else i=" ";var n=e.dimension(0),u=n.size()[0];if(u!==t.length)throw new wr(n.size()[0],t.length);var s=r.length;Br(e.min()[0]),Br(e.max()[0]);for(var v=[],l=0;l<s;l++)v[l]=r.charAt(l);if(n.forEach(function(a,f){v[a]=t.charAt(f[0])}),v.length>s)for(var c=s-1,o=v.length;c<o;c++)v[c]||(v[c]=i);return v.join("")}function b0(r,e){if(!ze(e)){if(e.size().length!==1)throw new wr(e.size(),1);var t=e.dimension(0);if(typeof t!="string")throw new TypeError("String expected as index to retrieve an object property");return Fi(r,t)}}function _0(r,e,t){if(ze(e))return r;if(e.size().length!==1)throw new wr(e.size(),1);var i=e.dimension(0);if(typeof i!="string")throw new TypeError("String expected as index to retrieve an object property");var n=Er(r);return Ci(n,i,t),n}var jn="transpose",M0=["typed","matrix"],S0=rr(jn,M0,r=>{var{typed:e,matrix:t}=r;return e(jn,{Array:s=>i(t(s)).valueOf(),Matrix:i,any:Er});function i(s){var v=s.size(),l;switch(v.length){case 1:l=s.clone();break;case 2:{var c=v[0],o=v[1];if(o===0)throw new RangeError("Cannot transpose a 2D matrix with no columns (size: "+Or(v)+")");switch(s.storage()){case"dense":l=n(s,c,o);break;case"sparse":l=u(s,c,o);break}}break;default:throw new RangeError("Matrix must be a vector or two dimensional (size: "+Or(v)+")")}return l}function n(s,v,l){for(var c=s._data,o=[],a,f=0;f<l;f++){a=o[f]=[];for(var h=0;h<v;h++)a[h]=Er(c[h][f])}return s.createDenseMatrix({data:o,size:[l,v],datatype:s._datatype})}function u(s,v,l){for(var c=s._values,o=s._index,a=s._ptr,f=c?[]:void 0,h=[],d=[],p=[],g=0;g<v;g++)p[g]=0;var D,E,y;for(D=0,E=o.length;D<E;D++)p[o[D]]++;for(var C=0,A=0;A<v;A++)d.push(C),C+=p[A],p[A]=d[A];for(d.push(C),y=0;y<l;y++)for(var m=a[y],b=a[y+1],F=m;F<b;F++){var w=p[o[F]]++;h[w]=y,c&&(f[w]=Er(c[F]))}return s.createSparseMatrix({values:f,index:h,ptr:d,size:[l,v],datatype:s._datatype})}}),ri="ctranspose",B0=["typed","transpose","conj"],N0=rr(ri,B0,r=>{var{typed:e,transpose:t,conj:i}=r;return e(ri,{any:function(u){return i(t(u))}})}),ei="zeros",x0=["typed","config","matrix","BigNumber"],T0=rr(ei,x0,r=>{var{typed:e,config:t,matrix:i,BigNumber:n}=r;return e(ei,{"":function(){return t.matrix==="Array"?u([]):u([],"default")},"...number | BigNumber | string":function(c){var o=c[c.length-1];if(typeof o=="string"){var a=c.pop();return u(c,a)}else return t.matrix==="Array"?u(c):u(c,"default")},Array:u,Matrix:function(c){var o=c.storage();return u(c.valueOf(),o)},"Array | Matrix, string":function(c,o){return u(c.valueOf(),o)}});function u(l,c){var o=s(l),a=o?new n(0):0;if(v(l),c){var f=i(c);return l.length>0?f.resize(l,a):f}else{var h=[];return l.length>0?pt(h,l,a):h}}function s(l){var c=!1;return l.forEach(function(o,a,f){Ir(o)&&(c=!0,f[a]=o.toNumber())}),c}function v(l){l.forEach(function(c){if(typeof c!="number"||!xr(c)||c<0)throw new Error("Parameters in function zeros must be positive integers")})}}),z0="numeric",O0=["number","?bignumber","?fraction"],I0=rr(z0,O0,r=>{var{number:e,bignumber:t,fraction:i}=r,n={string:!0,number:!0,BigNumber:!0,Fraction:!0},u={number:s=>e(s),BigNumber:t?s=>t(s):la,bigint:s=>BigInt(s),Fraction:i?s=>i(s):d0};return function(v){var l=arguments.length>1&&arguments[1]!==void 0?arguments[1]:"number",c=arguments.length>2?arguments[2]:void 0;if(c!==void 0)throw new SyntaxError("numeric() takes one or two arguments");var o=ae(v);if(!(o in n))throw new TypeError("Cannot convert "+v+' of type "'+o+'"; valid input types are '+Object.keys(n).join(", "));if(!(l in u))throw new TypeError("Cannot convert "+v+' to type "'+l+'"; valid output types are '+Object.keys(u).join(", "));return l===o?v:u[l](v)}}),ti="divideScalar",$0=["typed","numeric"],q0=rr(ti,$0,r=>{var{typed:e,numeric:t}=r;return e(ti,{"number, number":function(n,u){return n/u},"Complex, Complex":function(n,u){return n.div(u)},"BigNumber, BigNumber":function(n,u){return n.div(u)},"bigint, bigint":function(n,u){return n/u},"Fraction, Fraction":function(n,u){return n.div(u)},"Unit, number | Complex | Fraction | BigNumber | Unit":(i,n)=>i.divide(n),"number | Fraction | Complex | BigNumber, Unit":(i,n)=>n.divideInto(i)})}),ni="pow",P0=["typed","config","identity","multiply","matrix","inv","fraction","number","Complex"],R0=rr(ni,P0,r=>{var{typed:e,config:t,identity:i,multiply:n,matrix:u,inv:s,number:v,fraction:l,Complex:c}=r;return e(ni,{"number, number":o,"Complex, Complex":function(d,p){return d.pow(p)},"BigNumber, BigNumber":function(d,p){return p.isInteger()||d>=0||t.predictable?d.pow(p):new c(d.toNumber(),0).pow(p.toNumber(),0)},"bigint, bigint":(h,d)=>h**d,"Fraction, Fraction":function(d,p){var g=d.pow(p);if(g!=null)return g;if(t.predictable)throw new Error("Result of pow is non-rational and cannot be expressed as a fraction");return o(d.valueOf(),p.valueOf())},"Array, number":a,"Array, BigNumber":function(d,p){return a(d,p.toNumber())},"Matrix, number":f,"Matrix, BigNumber":function(d,p){return f(d,p.toNumber())},"Unit, number | BigNumber":function(d,p){return d.pow(p)}});function o(h,d){if(t.predictable&&!xr(d)&&h<0)try{var p=l(d),g=v(p);if((d===g||Math.abs((d-g)/d)<1e-14)&&p.d%2===1)return(p.n%2===0?1:-1)*Math.pow(-h,d)}catch{}return t.predictable&&(h<-1&&d===1/0||h>-1&&h<0&&d===-1/0)?NaN:xr(d)||h>=0||t.predictable?ua(h,d):h*h<1&&d===1/0||h*h>1&&d===-1/0?0:new c(h,0).pow(d,0)}function a(h,d){if(!xr(d))throw new TypeError("For A^b, b must be an integer (value is "+d+")");var p=Mr(h);if(p.length!==2)throw new Error("For A^b, A must be 2 dimensional (A has "+p.length+" dimensions)");if(p[0]!==p[1])throw new Error("For A^b, A must be square (size is "+p[0]+"x"+p[1]+")");if(d<0)try{return a(s(h),-d)}catch(E){throw E.message==="Cannot calculate inverse, determinant is zero"?new TypeError("For A^b, when A is not invertible, b must be a positive integer (value is "+d+")"):E}for(var g=i(p[0]).valueOf(),D=h;d>=1;)(d&1)===1&&(g=n(D,g)),d>>=1,D=n(D,D);return g}function f(h,d){return u(a(h.valueOf(),d))}});function Nt(r){var{DenseMatrix:e}=r;return function(i,n,u){var s=i.size();if(s.length!==2)throw new RangeError("Matrix must be two dimensional (size: "+Or(s)+")");var v=s[0],l=s[1];if(v!==l)throw new RangeError("Matrix must be square (size: "+Or(s)+")");var c=[];if(Sr(n)){var o=n.size(),a=n._data;if(o.length===1){if(o[0]!==v)throw new RangeError("Dimension mismatch. Matrix columns must match vector length.");for(var f=0;f<v;f++)c[f]=[a[f]];return new e({data:c,size:[v,1],datatype:n._datatype})}if(o.length===2){if(o[0]!==v||o[1]!==1)throw new RangeError("Dimension mismatch. Matrix columns must match vector length.");if(_i(n)){if(u){c=[];for(var h=0;h<v;h++)c[h]=[a[h][0]];return new e({data:c,size:[v,1],datatype:n._datatype})}return n}if(Mi(n)){for(var d=0;d<v;d++)c[d]=[0];for(var p=n._values,g=n._index,D=n._ptr,E=D[1],y=D[0];y<E;y++){var C=g[y];c[C][0]=p[y]}return new e({data:c,size:[v,1],datatype:n._datatype})}}throw new RangeError("Dimension mismatch. The right side has to be either 1- or 2-dimensional vector.")}if(_r(n)){var A=Mr(n);if(A.length===1){if(A[0]!==v)throw new RangeError("Dimension mismatch. Matrix columns must match vector length.");for(var m=0;m<v;m++)c[m]=[n[m]];return new e({data:c,size:[v,1]})}if(A.length===2){if(A[0]!==v||A[1]!==1)throw new RangeError("Dimension mismatch. Matrix columns must match vector length.");for(var b=0;b<v;b++)c[b]=[n[b][0]];return new e({data:c,size:[v,1]})}throw new RangeError("Dimension mismatch. The right side has to be either 1- or 2-dimensional vector.")}}}var ii="lsolve",U0=["typed","matrix","divideScalar","multiplyScalar","subtractScalar","equalScalar","DenseMatrix"],L0=rr(ii,U0,r=>{var{typed:e,matrix:t,divideScalar:i,multiplyScalar:n,subtractScalar:u,equalScalar:s,DenseMatrix:v}=r,l=Nt({DenseMatrix:v});return e(ii,{"SparseMatrix, Array | Matrix":function(f,h){return o(f,h)},"DenseMatrix, Array | Matrix":function(f,h){return c(f,h)},"Array, Array | Matrix":function(f,h){var d=t(f),p=c(d,h);return p.valueOf()}});function c(a,f){f=l(a,f,!0);for(var h=f._data,d=a._size[0],p=a._size[1],g=[],D=a._data,E=0;E<p;E++){var y=h[E][0]||0,C=void 0;if(s(y,0))C=0;else{var A=D[E][E];if(s(A,0))throw new Error("Linear system cannot be solved since matrix is singular");C=i(y,A);for(var m=E+1;m<d;m++)h[m]=[u(h[m][0]||0,n(C,D[m][E]))]}g[E]=[C]}return new v({data:g,size:[d,1]})}function o(a,f){f=l(a,f,!0);for(var h=f._data,d=a._size[0],p=a._size[1],g=a._values,D=a._index,E=a._ptr,y=[],C=0;C<p;C++){var A=h[C][0]||0;if(s(A,0))y[C]=[0];else{for(var m=0,b=[],F=[],w=E[C],_=E[C+1],M=w;M<_;M++){var B=D[M];B===C?m=g[M]:B>C&&(b.push(g[M]),F.push(B))}if(s(m,0))throw new Error("Linear system cannot be solved since matrix is singular");for(var O=i(A,m),z=0,I=F.length;z<I;z++){var N=F[z];h[N]=[u(h[N][0]||0,n(O,b[z]))]}y[C]=[O]}}return new v({data:y,size:[d,1]})}}),ai="usolve",Z0=["typed","matrix","divideScalar","multiplyScalar","subtractScalar","equalScalar","DenseMatrix"],V0=rr(ai,Z0,r=>{var{typed:e,matrix:t,divideScalar:i,multiplyScalar:n,subtractScalar:u,equalScalar:s,DenseMatrix:v}=r,l=Nt({DenseMatrix:v});return e(ai,{"SparseMatrix, Array | Matrix":function(f,h){return o(f,h)},"DenseMatrix, Array | Matrix":function(f,h){return c(f,h)},"Array, Array | Matrix":function(f,h){var d=t(f),p=c(d,h);return p.valueOf()}});function c(a,f){f=l(a,f,!0);for(var h=f._data,d=a._size[0],p=a._size[1],g=[],D=a._data,E=p-1;E>=0;E--){var y=h[E][0]||0,C=void 0;if(s(y,0))C=0;else{var A=D[E][E];if(s(A,0))throw new Error("Linear system cannot be solved since matrix is singular");C=i(y,A);for(var m=E-1;m>=0;m--)h[m]=[u(h[m][0]||0,n(C,D[m][E]))]}g[E]=[C]}return new v({data:g,size:[d,1]})}function o(a,f){f=l(a,f,!0);for(var h=f._data,d=a._size[0],p=a._size[1],g=a._values,D=a._index,E=a._ptr,y=[],C=p-1;C>=0;C--){var A=h[C][0]||0;if(s(A,0))y[C]=[0];else{for(var m=0,b=[],F=[],w=E[C],_=E[C+1],M=_-1;M>=w;M--){var B=D[M];B===C?m=g[M]:B<C&&(b.push(g[M]),F.push(B))}if(s(m,0))throw new Error("Linear system cannot be solved since matrix is singular");for(var O=i(A,m),z=0,I=F.length;z<I;z++){var N=F[z];h[N]=[u(h[N][0],n(O,b[z]))]}y[C]=[O]}}return new v({data:y,size:[d,1]})}}),ui="usolveAll",Y0=["typed","matrix","divideScalar","multiplyScalar","subtractScalar","equalScalar","DenseMatrix"],J0=rr(ui,Y0,r=>{var{typed:e,matrix:t,divideScalar:i,multiplyScalar:n,subtractScalar:u,equalScalar:s,DenseMatrix:v}=r,l=Nt({DenseMatrix:v});return e(ui,{"SparseMatrix, Array | Matrix":function(f,h){return o(f,h)},"DenseMatrix, Array | Matrix":function(f,h){return c(f,h)},"Array, Array | Matrix":function(f,h){var d=t(f),p=c(d,h);return p.map(g=>g.valueOf())}});function c(a,f){for(var h=[l(a,f,!0)._data.map(F=>F[0])],d=a._data,p=a._size[0],g=a._size[1],D=g-1;D>=0;D--)for(var E=h.length,y=0;y<E;y++){var C=h[y];if(s(d[D][D],0))if(s(C[D],0)){if(y===0){var m=[...C];m[D]=1;for(var b=D-1;b>=0;b--)m[b]=u(m[b],d[b][D]);h.push(m)}}else{if(y===0)return[];h.splice(y,1),y-=1,E-=1}else{C[D]=i(C[D],d[D][D]);for(var A=D-1;A>=0;A--)C[A]=u(C[A],n(C[D],d[A][D]))}}return h.map(F=>new v({data:F.map(w=>[w]),size:[p,1]}))}function o(a,f){for(var h=[l(a,f,!0)._data.map(W=>W[0])],d=a._size[0],p=a._size[1],g=a._values,D=a._index,E=a._ptr,y=p-1;y>=0;y--)for(var C=h.length,A=0;A<C;A++){for(var m=h[A],b=[],F=[],w=E[y],_=E[y+1],M=0,B=_-1;B>=w;B--){var O=D[B];O===y?M=g[B]:O<y&&(b.push(g[B]),F.push(O))}if(s(M,0))if(s(m[y],0)){if(A===0){var Y=[...m];Y[y]=1;for(var q=0,T=F.length;q<T;q++){var Z=F[q];Y[Z]=u(Y[Z],b[q])}h.push(Y)}}else{if(A===0)return[];h.splice(A,1),A-=1,C-=1}else{m[y]=i(m[y],M);for(var z=0,I=F.length;z<I;z++){var N=F[z];m[N]=u(m[N],n(m[y],b[z]))}}}return h.map(W=>new v({data:W.map(R=>[R]),size:[d,1]}))}}),Dt="equal",G0=["typed","matrix","equalScalar","DenseMatrix","concat"],Q0=rr(Dt,G0,r=>{var{typed:e,matrix:t,equalScalar:i,DenseMatrix:n,concat:u}=r,s=$e({typed:e}),v=Je({typed:e,DenseMatrix:n}),l=Ie({typed:e,DenseMatrix:n}),c=Ee({typed:e,matrix:t,concat:u});return e(Dt,X0({typed:e,equalScalar:i}),c({elop:i,SS:v,DS:s,Ss:l}))}),X0=rr(Dt,["typed","equalScalar"],r=>{var{typed:e,equalScalar:t}=r;return e(Dt,{"any, any":function(n,u){return n===null?u===null:u===null?n===null:n===void 0?u===void 0:u===void 0?n===void 0:t(n,u)}})}),gt="smaller",K0=["typed","config","matrix","DenseMatrix","concat"],W0=rr(gt,K0,r=>{var{typed:e,config:t,matrix:i,DenseMatrix:n,concat:u}=r,s=$e({typed:e}),v=Je({typed:e,DenseMatrix:n}),l=Ie({typed:e,DenseMatrix:n}),c=Ee({typed:e,matrix:i,concat:u}),o=Ye({typed:e});return e(gt,H0({typed:e,config:t}),{"boolean, boolean":(a,f)=>a<f,"BigNumber, BigNumber":function(f,h){return f.lt(h)&&!Oe(f,h,t.relTol,t.absTol)},"bigint, bigint":(a,f)=>a<f,"Fraction, Fraction":(a,f)=>a.compare(f)===-1,"Complex, Complex":function(f,h){throw new TypeError("No ordering relation is defined for complex numbers")}},o,c({SS:v,DS:s,Ss:l}))}),H0=rr(gt,["typed","config"],r=>{var{typed:e,config:t}=r;return e(gt,{"number, number":function(n,u){return n<u&&!le(n,u,t.relTol,t.absTol)}})}),yt="smallerEq",k0=["typed","config","matrix","DenseMatrix","concat"],j0=rr(yt,k0,r=>{var{typed:e,config:t,matrix:i,DenseMatrix:n,concat:u}=r,s=$e({typed:e}),v=Je({typed:e,DenseMatrix:n}),l=Ie({typed:e,DenseMatrix:n}),c=Ee({typed:e,matrix:i,concat:u}),o=Ye({typed:e});return e(yt,rc({typed:e,config:t}),{"boolean, boolean":(a,f)=>a<=f,"BigNumber, BigNumber":function(f,h){return f.lte(h)||Oe(f,h,t.relTol,t.absTol)},"bigint, bigint":(a,f)=>a<=f,"Fraction, Fraction":(a,f)=>a.compare(f)!==1,"Complex, Complex":function(){throw new TypeError("No ordering relation is defined for complex numbers")}},o,c({SS:v,DS:s,Ss:l}))}),rc=rr(yt,["typed","config"],r=>{var{typed:e,config:t}=r;return e(yt,{"number, number":function(n,u){return n<=u||le(n,u,t.relTol,t.absTol)}})}),wt="larger",ec=["typed","config","matrix","DenseMatrix","concat"],tc=rr(wt,ec,r=>{var{typed:e,config:t,matrix:i,DenseMatrix:n,concat:u}=r,s=$e({typed:e}),v=Je({typed:e,DenseMatrix:n}),l=Ie({typed:e,DenseMatrix:n}),c=Ee({typed:e,matrix:i,concat:u}),o=Ye({typed:e});return e(wt,nc({typed:e,config:t}),{"boolean, boolean":(a,f)=>a>f,"BigNumber, BigNumber":function(f,h){return f.gt(h)&&!Oe(f,h,t.relTol,t.absTol)},"bigint, bigint":(a,f)=>a>f,"Fraction, Fraction":(a,f)=>a.compare(f)===1,"Complex, Complex":function(){throw new TypeError("No ordering relation is defined for complex numbers")}},o,c({SS:v,DS:s,Ss:l}))}),nc=rr(wt,["typed","config"],r=>{var{typed:e,config:t}=r;return e(wt,{"number, number":function(n,u){return n>u&&!le(n,u,t.relTol,t.absTol)}})}),At="largerEq",ic=["typed","config","matrix","DenseMatrix","concat"],ac=rr(At,ic,r=>{var{typed:e,config:t,matrix:i,DenseMatrix:n,concat:u}=r,s=$e({typed:e}),v=Je({typed:e,DenseMatrix:n}),l=Ie({typed:e,DenseMatrix:n}),c=Ee({typed:e,matrix:i,concat:u}),o=Ye({typed:e});return e(At,uc({typed:e,config:t}),{"boolean, boolean":(a,f)=>a>=f,"BigNumber, BigNumber":function(f,h){return f.gte(h)||Oe(f,h,t.relTol,t.absTol)},"bigint, bigint":function(f,h){return f>=h},"Fraction, Fraction":(a,f)=>a.compare(f)!==-1,"Complex, Complex":function(){throw new TypeError("No ordering relation is defined for complex numbers")}},o,c({SS:v,DS:s,Ss:l}))}),uc=rr(At,["typed","config"],r=>{var{typed:e,config:t}=r;return e(At,{"number, number":function(n,u){return n>=u||le(n,u,t.relTol,t.absTol)}})}),oc="ImmutableDenseMatrix",sc=["smaller","DenseMatrix"],fc=rr(oc,sc,r=>{var{smaller:e,DenseMatrix:t}=r;function i(n,u){if(!(this instanceof i))throw new SyntaxError("Constructor must be called with the new operator");if(u&&!re(u))throw new Error("Invalid datatype: "+u);if(Sr(n)||_r(n)){var s=new t(n,u);this._data=s._data,this._size=s._size,this._datatype=s._datatype,this._min=null,this._max=null}else if(n&&_r(n.data)&&_r(n.size))this._data=n.data,this._size=n.size,this._datatype=n.datatype,this._min=typeof n.min<"u"?n.min:null,this._max=typeof n.max<"u"?n.max:null;else{if(n)throw new TypeError("Unsupported type of data ("+ae(n)+")");this._data=[],this._size=[0],this._datatype=u,this._min=null,this._max=null}}return i.prototype=new t,i.prototype.type="ImmutableDenseMatrix",i.prototype.isImmutableDenseMatrix=!0,i.prototype.subset=function(n){switch(arguments.length){case 1:{var u=t.prototype.subset.call(this,n);return Sr(u)?new i({data:u._data,size:u._size,datatype:u._datatype}):u}case 2:case 3:throw new Error("Cannot invoke set subset on an Immutable Matrix instance");default:throw new SyntaxError("Wrong number of arguments")}},i.prototype.set=function(){throw new Error("Cannot invoke set on an Immutable Matrix instance")},i.prototype.resize=function(){throw new Error("Cannot invoke resize on an Immutable Matrix instance")},i.prototype.reshape=function(){throw new Error("Cannot invoke reshape on an Immutable Matrix instance")},i.prototype.clone=function(){return new i({data:Er(this._data),size:Er(this._size),datatype:this._datatype})},i.prototype.toJSON=function(){return{mathjs:"ImmutableDenseMatrix",data:this._data,size:this._size,datatype:this._datatype}},i.fromJSON=function(n){return new i(n)},i.prototype.swapRows=function(){throw new Error("Cannot invoke swapRows on an Immutable Matrix instance")},i.prototype.min=function(){if(this._min===null){var n=null;this.forEach(function(u){(n===null||e(u,n))&&(n=u)}),this._min=n!==null?n:void 0}return this._min},i.prototype.max=function(){if(this._max===null){var n=null;this.forEach(function(u){(n===null||e(n,u))&&(n=u)}),this._max=n!==null?n:void 0}return this._max},i},{isClass:!0}),cc="Index",lc=["ImmutableDenseMatrix","getMatrixDataType"],vc=rr(cc,lc,r=>{var{ImmutableDenseMatrix:e,getMatrixDataType:t}=r;function i(u){if(!(this instanceof i))throw new SyntaxError("Constructor must be called with the new operator");this._dimensions=[],this._sourceSize=[],this._isScalar=!0;for(var s=0,v=arguments.length;s<v;s++){var l=arguments[s],c=_r(l),o=Sr(l),a=null;if(Si(l))this._dimensions.push(l),this._isScalar=!1;else if(c||o){var f=void 0;t(l)==="boolean"?(c&&(f=n(oi(l).valueOf())),o&&(f=n(oi(l._data).valueOf())),a=l.valueOf().length):f=n(l.valueOf()),this._dimensions.push(f);var h=f.size();(h.length!==1||h[0]!==1||a!==null)&&(this._isScalar=!1)}else if(typeof l=="number")this._dimensions.push(n([l]));else if(typeof l=="string")this._dimensions.push(l);else throw new TypeError("Dimension must be an Array, Matrix, number, string, or Range");this._sourceSize.push(a)}}i.prototype.type="Index",i.prototype.isIndex=!0;function n(u){for(var s=0,v=u.length;s<v;s++)if(typeof u[s]!="number"||!xr(u[s]))throw new TypeError("Index parameters must be positive integer numbers");return new e(u)}return i.prototype.clone=function(){var u=new i;return u._dimensions=Er(this._dimensions),u._isScalar=this._isScalar,u._sourceSize=this._sourceSize,u},i.create=function(u){var s=new i;return i.apply(s,u),s},i.prototype.size=function(){for(var u=[],s=0,v=this._dimensions.length;s<v;s++){var l=this._dimensions[s];u[s]=typeof l=="string"?1:l.size()[0]}return u},i.prototype.max=function(){for(var u=[],s=0,v=this._dimensions.length;s<v;s++){var l=this._dimensions[s];u[s]=typeof l=="string"?l:l.max()}return u},i.prototype.min=function(){for(var u=[],s=0,v=this._dimensions.length;s<v;s++){var l=this._dimensions[s];u[s]=typeof l=="string"?l:l.min()}return u},i.prototype.forEach=function(u){for(var s=0,v=this._dimensions.length;s<v;s++)u(this._dimensions[s],s,this)},i.prototype.dimension=function(u){return this._dimensions[u]||null},i.prototype.isObjectProperty=function(){return this._dimensions.length===1&&typeof this._dimensions[0]=="string"},i.prototype.getObjectProperty=function(){return this.isObjectProperty()?this._dimensions[0]:null},i.prototype.isScalar=function(){return this._isScalar},i.prototype.toArray=function(){for(var u=[],s=0,v=this._dimensions.length;s<v;s++){var l=this._dimensions[s];u.push(typeof l=="string"?l:l.toArray())}return u},i.prototype.valueOf=i.prototype.toArray,i.prototype.toString=function(){for(var u=[],s=0,v=this._dimensions.length;s<v;s++){var l=this._dimensions[s];typeof l=="string"?u.push(JSON.stringify(l)):u.push(l.toString())}return"["+u.join(", ")+"]"},i.prototype.toJSON=function(){return{mathjs:"Index",dimensions:this._dimensions}},i.fromJSON=function(u){return i.create(u.dimensions)},i},{isClass:!0});function oi(r){var e=[];return r.forEach((t,i)=>{t&&e.push(i)}),e}var hc="FibonacciHeap",pc=["smaller","larger"],dc=rr(hc,pc,r=>{var{smaller:e,larger:t}=r,i=1/Math.log((1+Math.sqrt(5))/2);function n(){if(!(this instanceof n))throw new SyntaxError("Constructor must be called with the new operator");this._minimum=null,this._size=0}n.prototype.type="FibonacciHeap",n.prototype.isFibonacciHeap=!0,n.prototype.insert=function(o,a){var f={key:o,value:a,degree:0};if(this._minimum){var h=this._minimum;f.left=h,f.right=h.right,h.right=f,f.right.left=f,e(o,h.key)&&(this._minimum=f)}else f.left=f,f.right=f,this._minimum=f;return this._size++,f},n.prototype.size=function(){return this._size},n.prototype.clear=function(){this._minimum=null,this._size=0},n.prototype.isEmpty=function(){return this._size===0},n.prototype.extractMinimum=function(){var o=this._minimum;if(o===null)return o;for(var a=this._minimum,f=o.degree,h=o.child;f>0;){var d=h.right;h.left.right=h.right,h.right.left=h.left,h.left=a,h.right=a.right,a.right=h,h.right.left=h,h.parent=null,h=d,f--}return o.left.right=o.right,o.right.left=o.left,o===o.right?a=null:(a=o.right,a=c(a,this._size)),this._size--,this._minimum=a,o},n.prototype.remove=function(o){this._minimum=u(this._minimum,o,-1),this.extractMinimum()};function u(o,a,f){a.key=f;var h=a.parent;return h&&e(a.key,h.key)&&(s(o,a,h),v(o,h)),e(a.key,o.key)&&(o=a),o}function s(o,a,f){a.left.right=a.right,a.right.left=a.left,f.degree--,f.child===a&&(f.child=a.right),f.degree===0&&(f.child=null),a.left=o,a.right=o.right,o.right=a,a.right.left=a,a.parent=null,a.mark=!1}function v(o,a){var f=a.parent;f&&(a.mark?(s(o,a,f),v(f)):a.mark=!0)}var l=function(a,f){a.left.right=a.right,a.right.left=a.left,a.parent=f,f.child?(a.left=f.child,a.right=f.child.right,f.child.right=a,a.right.left=a):(f.child=a,a.right=a,a.left=a),f.degree++,a.mark=!1};function c(o,a){var f=Math.floor(Math.log(a)*i)+1,h=new Array(f),d=0,p=o;if(p)for(d++,p=p.right;p!==o;)d++,p=p.right;for(var g;d>0;){for(var D=p.degree,E=p.right;g=h[D],!!g;){if(t(p.key,g.key)){var y=g;g=p,p=y}l(g,p),h[D]=null,D++}h[D]=p,p=E,d--}o=null;for(var C=0;C<f;C++)g=h[C],g&&(o?(g.left.right=g.right,g.right.left=g.left,g.left=o,g.right=o.right,o.right=g,g.right.left=g,e(g.key,o.key)&&(o=g)):o=g);return o}return n},{isClass:!0}),mc="Spa",Dc=["addScalar","equalScalar","FibonacciHeap"],gc=rr(mc,Dc,r=>{var{addScalar:e,equalScalar:t,FibonacciHeap:i}=r;function n(){if(!(this instanceof n))throw new SyntaxError("Constructor must be called with the new operator");this._values=[],this._heap=new i}return n.prototype.type="Spa",n.prototype.isSpa=!0,n.prototype.set=function(u,s){if(this._values[u])this._values[u].value=s;else{var v=this._heap.insert(u,s);this._values[u]=v}},n.prototype.get=function(u){var s=this._values[u];return s?s.value:0},n.prototype.accumulate=function(u,s){var v=this._values[u];v?v.value=e(v.value,s):(v=this._heap.insert(u,s),this._values[u]=v)},n.prototype.forEach=function(u,s,v){var l=this._heap,c=this._values,o=[],a=l.extractMinimum();for(a&&o.push(a);a&&a.key<=s;)a.key>=u&&(t(a.value,0)||v(a.key,a.value,this)),a=l.extractMinimum(),a&&o.push(a);for(var f=0;f<o.length;f++){var h=o[f];a=l.insert(h.key,h.value),c[a.key]=a}},n.prototype.swap=function(u,s){var v=this._values[u],l=this._values[s];if(!v&&l)v=this._heap.insert(u,l.value),this._heap.remove(l),this._values[u]=v,this._values[s]=void 0;else if(v&&!l)l=this._heap.insert(s,v.value),this._heap.remove(v),this._values[s]=l,this._values[u]=void 0;else if(v&&l){var c=v.value;v.value=l.value,l.value=c}},n},{isClass:!0}),yc="atan",wc=["typed"],Ac=rr(yc,wc,r=>{var{typed:e}=r;return e("atan",{number:function(i){return Math.atan(i)},Complex:function(i){return i.atan()},BigNumber:function(i){return i.atan()}})}),ha=rr("trigUnit",["typed"],r=>{var{typed:e}=r;return{Unit:e.referToSelf(t=>i=>{if(!i.hasBase(i.constructor.BASE_UNITS.ANGLE))throw new TypeError("Unit in function cot is no angle");return e.find(t,i.valueType())(i.value)})}}),si="cos",Ec=["typed"],Fc=rr(si,Ec,r=>{var{typed:e}=r,t=ha({typed:e});return e(si,{number:Math.cos,"Complex | BigNumber":i=>i.cos()},t)}),fi="sin",Cc=["typed"],bc=rr(fi,Cc,r=>{var{typed:e}=r,t=ha({typed:e});return e(fi,{number:Math.sin,"Complex | BigNumber":i=>i.sin()},t)}),ci="add",_c=["typed","matrix","addScalar","equalScalar","DenseMatrix","SparseMatrix","concat"],Mc=rr(ci,_c,r=>{var{typed:e,matrix:t,addScalar:i,equalScalar:n,DenseMatrix:u,SparseMatrix:s,concat:v}=r,l=fa({typed:e}),c=Tf({typed:e,equalScalar:n}),o=ca({typed:e,DenseMatrix:u}),a=Ee({typed:e,matrix:t,concat:v});return e(ci,{"any, any":i,"any, any, ...any":e.referToSelf(f=>(h,d,p)=>{for(var g=f(h,d),D=0;D<p.length;D++)g=f(g,p[D]);return g})},a({elop:i,DS:l,SS:c,Ss:o}))}),li="norm",Sc=["typed","abs","add","pow","conj","sqrt","multiply","equalScalar","larger","smaller","matrix","ctranspose","eigs"],Bc=rr(li,Sc,r=>{var{typed:e,abs:t,add:i,pow:n,conj:u,sqrt:s,multiply:v,equalScalar:l,larger:c,smaller:o,matrix:a,ctranspose:f,eigs:h}=r;return e(li,{number:Math.abs,Complex:function(F){return F.abs()},BigNumber:function(F){return F.abs()},boolean:function(F){return Math.abs(F)},Array:function(F){return m(a(F),2)},Matrix:function(F){return m(F,2)},"Array, number | BigNumber | string":function(F,w){return m(a(F),w)},"Matrix, number | BigNumber | string":function(F,w){return m(F,w)}});function d(b){var F=0;return b.forEach(function(w){var _=t(w);c(_,F)&&(F=_)},!0),F}function p(b){var F;return b.forEach(function(w){var _=t(w);(!F||o(_,F))&&(F=_)},!0),F||0}function g(b,F){if(F===Number.POSITIVE_INFINITY||F==="inf")return d(b);if(F===Number.NEGATIVE_INFINITY||F==="-inf")return p(b);if(F==="fro")return m(b,2);if(typeof F=="number"&&!isNaN(F)){if(!l(F,0)){var w=0;return b.forEach(function(_){w=i(n(t(_),F),w)},!0),n(w,1/F)}return Number.POSITIVE_INFINITY}throw new Error("Unsupported parameter value")}function D(b){var F=0;return b.forEach(function(w,_){F=i(F,v(w,u(w)))}),t(s(F))}function E(b){var F=[],w=0;return b.forEach(function(_,M){var B=M[1],O=i(F[B]||0,t(_));c(O,w)&&(w=O),F[B]=O},!0),w}function y(b){var F=b.size();if(F[0]!==F[1])throw new RangeError("Invalid matrix dimensions");var w=f(b),_=v(w,b),M=h(_).values.toArray(),B=M[M.length-1];return t(s(B))}function C(b){var F=[],w=0;return b.forEach(function(_,M){var B=M[0],O=i(F[B]||0,t(_));c(O,w)&&(w=O),F[B]=O},!0),w}function A(b,F){if(F===1)return E(b);if(F===Number.POSITIVE_INFINITY||F==="inf")return C(b);if(F==="fro")return D(b);if(F===2)return y(b);throw new Error("Unsupported parameter value "+F)}function m(b,F){var w=b.size();if(w.length===1)return g(b,F);if(w.length===2){if(w[0]&&w[1])return A(b,F);throw new RangeError("Invalid matrix dimensions")}}}),vi="dot",Nc=["typed","addScalar","multiplyScalar","conj","size"],xc=rr(vi,Nc,r=>{var{typed:e,addScalar:t,multiplyScalar:i,conj:n,size:u}=r;return e(vi,{"Array | DenseMatrix, Array | DenseMatrix":v,"SparseMatrix, SparseMatrix":l});function s(o,a){var f=c(o),h=c(a),d,p;if(f.length===1)d=f[0];else if(f.length===2&&f[1]===1)d=f[0];else throw new RangeError("Expected a column vector, instead got a matrix of size ("+f.join(", ")+")");if(h.length===1)p=h[0];else if(h.length===2&&h[1]===1)p=h[0];else throw new RangeError("Expected a column vector, instead got a matrix of size ("+h.join(", ")+")");if(d!==p)throw new RangeError("Vectors must have equal length ("+d+" != "+p+")");if(d===0)throw new RangeError("Cannot calculate the dot product of empty vectors");return d}function v(o,a){var f=s(o,a),h=Sr(o)?o._data:o,d=Sr(o)?o._datatype||o.getDataType():void 0,p=Sr(a)?a._data:a,g=Sr(a)?a._datatype||a.getDataType():void 0,D=c(o).length===2,E=c(a).length===2,y=t,C=i;if(d&&g&&d===g&&typeof d=="string"&&d!=="mixed"){var A=d;y=e.find(t,[A,A]),C=e.find(i,[A,A])}if(!D&&!E){for(var m=C(n(h[0]),p[0]),b=1;b<f;b++)m=y(m,C(n(h[b]),p[b]));return m}if(!D&&E){for(var F=C(n(h[0]),p[0][0]),w=1;w<f;w++)F=y(F,C(n(h[w]),p[w][0]));return F}if(D&&!E){for(var _=C(n(h[0][0]),p[0]),M=1;M<f;M++)_=y(_,C(n(h[M][0]),p[M]));return _}if(D&&E){for(var B=C(n(h[0][0]),p[0][0]),O=1;O<f;O++)B=y(B,C(n(h[O][0]),p[O][0]));return B}}function l(o,a){s(o,a);for(var f=o._index,h=o._values,d=a._index,p=a._values,g=0,D=t,E=i,y=0,C=0;y<f.length&&C<d.length;){var A=f[y],m=d[C];if(A<m){y++;continue}if(A>m){C++;continue}A===m&&(g=D(g,E(h[y],p[C])),y++,C++)}return g}function c(o){return Sr(o)?o.size():u(o)}}),hi="index",Tc=["typed","Index"],zc=rr(hi,Tc,r=>{var{typed:e,Index:t}=r;return e(hi,{"...number | string | BigNumber | Range | Array | Matrix":function(n){var u=n.map(function(v){return Ir(v)?v.toNumber():_r(v)||Sr(v)?v.map(function(l){return Ir(l)?l.toNumber():l}):v}),s=new t;return t.apply(s,u),s}})}),pi="lup",Oc=["typed","matrix","abs","addScalar","divideScalar","multiplyScalar","subtractScalar","larger","equalScalar","unaryMinus","DenseMatrix","SparseMatrix","Spa"],Ic=rr(pi,Oc,r=>{var{typed:e,matrix:t,abs:i,addScalar:n,divideScalar:u,multiplyScalar:s,subtractScalar:v,larger:l,equalScalar:c,unaryMinus:o,DenseMatrix:a,SparseMatrix:f,Spa:h}=r;return e(pi,{DenseMatrix:function(D){return d(D)},SparseMatrix:function(D){return p(D)},Array:function(D){var E=t(D),y=d(E);return{L:y.L.valueOf(),U:y.U.valueOf(),p:y.p}}});function d(g){var D=g._size[0],E=g._size[1],y=Math.min(D,E),C=Er(g._data),A=[],m=[D,y],b=[],F=[y,E],w,_,M,B=[];for(w=0;w<D;w++)B[w]=w;for(_=0;_<E;_++){if(_>0)for(w=0;w<D;w++){var O=Math.min(w,_),z=0;for(M=0;M<O;M++)z=n(z,s(C[w][M],C[M][_]));C[w][_]=v(C[w][_],z)}var I=_,N=0,Y=0;for(w=_;w<D;w++){var q=C[w][_],T=i(q);l(T,N)&&(I=w,N=T,Y=q)}if(_!==I&&(B[_]=[B[I],B[I]=B[_]][0],a._swapRows(_,I,C)),_<D)for(w=_+1;w<D;w++){var Z=C[w][_];c(Z,0)||(C[w][_]=u(C[w][_],Y))}}for(_=0;_<E;_++)for(w=0;w<D;w++){if(_===0&&(w<E&&(b[w]=[]),A[w]=[]),w<_){w<E&&(b[w][_]=C[w][_]),_<D&&(A[w][_]=0);continue}if(w===_){w<E&&(b[w][_]=C[w][_]),_<D&&(A[w][_]=1);continue}w<E&&(b[w][_]=0),_<D&&(A[w][_]=C[w][_])}var W=new a({data:A,size:m}),R=new a({data:b,size:F}),U=[];for(w=0,y=B.length;w<y;w++)U[B[w]]=w;return{L:W,U:R,p:U,toString:function(){return"L: "+this.L.toString()+`
U: `+this.U.toString()+`
P: `+this.p}}}function p(g){var D=g._size[0],E=g._size[1],y=Math.min(D,E),C=g._values,A=g._index,m=g._ptr,b=[],F=[],w=[],_=[D,y],M=[],B=[],O=[],z=[y,E],I,N,Y,q=[],T=[];for(I=0;I<D;I++)q[I]=I,T[I]=I;var Z=function(U,V){var nr=T[U],k=T[V];q[nr]=V,q[k]=U,T[U]=k,T[V]=nr},W=function(){var U=new h;N<D&&(w.push(b.length),b.push(1),F.push(N)),O.push(M.length);var V=m[N],nr=m[N+1];for(Y=V;Y<nr;Y++)I=A[Y],U.set(q[I],C[Y]);N>0&&U.forEach(0,N-1,function(K,G){f._forEachRow(K,b,F,w,function(ur,j){ur>K&&U.accumulate(ur,o(s(j,G)))})});var k=N,L=U.get(N),X=i(L);U.forEach(N+1,D-1,function(K,G){var ur=i(G);l(ur,X)&&(k=K,X=ur,L=G)}),N!==k&&(f._swapRows(N,k,_[1],b,F,w),f._swapRows(N,k,z[1],M,B,O),U.swap(N,k),Z(N,k)),U.forEach(0,D-1,function(K,G){K<=N?(M.push(G),B.push(K)):(G=u(G,L),c(G,0)||(b.push(G),F.push(K)))})};for(N=0;N<E;N++)W();return O.push(M.length),w.push(b.length),{L:new f({values:b,index:F,ptr:w,size:_}),U:new f({values:M,index:B,ptr:O,size:z}),p:q,toString:function(){return"L: "+this.L.toString()+`
U: `+this.U.toString()+`
P: `+this.p}}}}),di="qr",$c=["typed","matrix","zeros","identity","isZero","equal","sign","sqrt","conj","unaryMinus","addScalar","divideScalar","multiplyScalar","subtractScalar","complex"],qc=rr(di,$c,r=>{var{typed:e,matrix:t,zeros:i,identity:n,isZero:u,equal:s,sign:v,sqrt:l,conj:c,unaryMinus:o,addScalar:a,divideScalar:f,multiplyScalar:h,subtractScalar:d,complex:p}=r;return Ne(e(di,{DenseMatrix:function(C){return D(C)},SparseMatrix:function(C){return E()},Array:function(C){var A=t(C),m=D(A);return{Q:m.Q.valueOf(),R:m.R.valueOf()}}}),{_denseQRimpl:g});function g(y){var C=y._size[0],A=y._size[1],m=n([C],"dense"),b=m._data,F=y.clone(),w=F._data,_,M,B,O=i([C],"");for(B=0;B<Math.min(A,C);++B){var z=w[B][B],I=o(s(z,0)?1:v(z)),N=c(I),Y=0;for(_=B;_<C;_++)Y=a(Y,h(w[_][B],c(w[_][B])));var q=h(I,l(Y));if(!u(q)){var T=d(z,q);for(O[B]=1,_=B+1;_<C;_++)O[_]=f(w[_][B],T);var Z=o(c(f(T,q))),W=void 0;for(M=B;M<A;M++){for(W=0,_=B;_<C;_++)W=a(W,h(c(O[_]),w[_][M]));for(W=h(W,Z),_=B;_<C;_++)w[_][M]=h(d(w[_][M],h(O[_],W)),N)}for(_=0;_<C;_++){for(W=0,M=B;M<C;M++)W=a(W,h(b[_][M],O[M]));for(W=h(W,Z),M=B;M<C;++M)b[_][M]=f(d(b[_][M],h(W,c(O[M]))),N)}}}return{Q:m,R:F,toString:function(){return"Q: "+this.Q.toString()+`
R: `+this.R.toString()}}}function D(y){var C=g(y),A=C.R._data;if(y._data.length>0)for(var m=A[0][0].type==="Complex"?p(0):0,b=0;b<A.length;++b)for(var F=0;F<b&&F<(A[0]||[]).length;++F)A[b][F]=m;return C}function E(y){throw new Error("qr not implemented for sparse matrices yet")}});function Pc(r,e,t,i){r._values;for(var n=r._index,u=r._ptr,s=r._size,v=r._datatype,l=s[0],c=s[1],o=null,a=[],f=[],h=0,d=0;d<c;d++){f[d]=h;for(var p=t?t[d]:d,g=u[p],D=u[p+1],E=g;E<D;E++){var y=n[E];a[h]=y,h++}}return f[c]=h,r.createSparseMatrix({values:o,index:a,ptr:f,size:[l,c],datatype:v})}function pa(r,e,t,i,n,u,s){var v=0;for(t[s]=r;v>=0;){var l=t[s+v],c=t[i+l];c===-1?(v--,u[e++]=l):(t[i+l]=t[n+c],++v,t[s+v]=c)}return e}function Rc(r,e){if(!r)return null;var t=0,i,n=[],u=[],s=0,v=e,l=2*e;for(i=0;i<e;i++)u[s+i]=-1;for(i=e-1;i>=0;i--)r[i]!==-1&&(u[v+i]=u[s+r[i]],u[s+r[i]]=i);for(i=0;i<e;i++)r[i]===-1&&(t=pa(i,t,u,s,v,n,l));return n}function Uc(r,e){if(!r)return null;var t=r._index,i=r._ptr,n=r._size,u=n[0],s=n[1],v=[],l=[],c=0,o=s,a,f;for(a=0;a<u;a++)l[o+a]=-1;for(var h=0;h<s;h++){v[h]=-1,l[c+h]=-1;for(var d=i[h],p=i[h+1],g=d;g<p;g++){var D=t[g];for(a=l[o+D];a!==-1&&a<h;a=f)f=l[c+a],l[c+a]=h,f===-1&&(v[a]=h);l[o+D]=h}}return v}function Lc(r,e,t){for(var i=r._values,n=r._index,u=r._ptr,s=r._size,v=s[1],l=0,c=0;c<v;c++){var o=u[c];for(u[c]=l;o<u[c+1];o++)e(n[o],c,i?i[o]:1,t)&&(n[l]=n[o],i&&(i[l]=i[o]),l++)}return u[v]=l,n.splice(l,n.length-l),i&&i.splice(l,i.length-l),l}function de(r){return-r-2}var Zc="csAmd",Vc=["add","multiply","transpose"],Yc=rr(Zc,Vc,r=>{var{add:e,multiply:t,transpose:i}=r;return function(o,a){if(!a||o<=0||o>3)return null;var f=a._size,h=f[0],d=f[1],p=0,g=Math.max(16,10*Math.sqrt(d));g=Math.min(d-2,g);var D=n(o,a,h,d,g);Lc(D,l,null);for(var E=D._index,y=D._ptr,C=y[d],A=[],m=[],b=0,F=d+1,w=2*(d+1),_=3*(d+1),M=4*(d+1),B=5*(d+1),O=6*(d+1),z=7*(d+1),I=A,N=u(d,y,m,b,_,I,w,z,F,O,M,B),Y=s(d,y,m,B,M,O,g,F,_,I,w),q=0,T,Z,W,R,U,V,nr,k,L,X,K,G,ur,j,or,cr;Y<d;){for(W=-1;q<d&&(W=m[_+q])===-1;q++);m[w+W]!==-1&&(I[m[w+W]]=-1),m[_+q]=m[w+W];var pr=m[M+W],mr=m[F+W];Y+=mr;var Dr=0;m[F+W]=-mr;var lr=y[W],Ar=pr===0?lr:C,yr=Ar;for(R=1;R<=pr+1;R++){for(R>pr?(V=W,nr=lr,k=m[b+W]-pr):(V=E[lr++],nr=y[V],k=m[b+V]),U=1;U<=k;U++)T=E[nr++],!((L=m[F+T])<=0)&&(Dr+=L,m[F+T]=-L,E[yr++]=T,m[w+T]!==-1&&(I[m[w+T]]=I[T]),I[T]!==-1?m[w+I[T]]=m[w+T]:m[_+m[B+T]]=m[w+T]);V!==W&&(y[V]=de(W),m[O+V]=0)}for(pr!==0&&(C=yr),m[B+W]=Dr,y[W]=Ar,m[b+W]=yr-Ar,m[M+W]=-2,N=v(N,p,m,O,d),X=Ar;X<yr;X++)if(T=E[X],!((K=m[M+T])<=0)){L=-m[F+T];var Fr=N-L;for(lr=y[T],G=y[T]+K-1;lr<=G;lr++)V=E[lr],m[O+V]>=N?m[O+V]-=L:m[O+V]!==0&&(m[O+V]=m[B+V]+Fr)}for(X=Ar;X<yr;X++){for(T=E[X],G=y[T],ur=G+m[M+T]-1,j=G,or=0,cr=0,lr=G;lr<=ur;lr++)if(V=E[lr],m[O+V]!==0){var Pr=m[O+V]-N;Pr>0?(cr+=Pr,E[j++]=V,or+=V):(y[V]=de(W),m[O+V]=0)}m[M+T]=j-G+1;var S=j,x=G+m[b+T];for(lr=ur+1;lr<x;lr++){Z=E[lr];var $=m[F+Z];$<=0||(cr+=$,E[j++]=Z,or+=Z)}cr===0?(y[T]=de(W),L=-m[F+T],Dr-=L,mr+=L,Y+=L,m[F+T]=0,m[M+T]=-1):(m[B+T]=Math.min(m[B+T],cr),E[j]=E[S],E[S]=E[G],E[G]=W,m[b+T]=j-G+1,or=(or<0?-or:or)%d,m[w+T]=m[z+or],m[z+or]=T,I[T]=or)}for(m[B+W]=Dr,p=Math.max(p,Dr),N=v(N+p,p,m,O,d),X=Ar;X<yr;X++)if(T=E[X],!(m[F+T]>=0))for(or=I[T],T=m[z+or],m[z+or]=-1;T!==-1&&m[w+T]!==-1;T=m[w+T],N++){for(k=m[b+T],K=m[M+T],lr=y[T]+1;lr<=y[T]+k-1;lr++)m[O+E[lr]]=N;var P=T;for(Z=m[w+T];Z!==-1;){var Q=m[b+Z]===k&&m[M+Z]===K;for(lr=y[Z]+1;Q&&lr<=y[Z]+k-1;lr++)m[O+E[lr]]!==N&&(Q=0);Q?(y[Z]=de(T),m[F+T]+=m[F+Z],m[F+Z]=0,m[M+Z]=-1,Z=m[w+Z],m[w+P]=Z):(P=Z,Z=m[w+Z])}}for(lr=Ar,X=Ar;X<yr;X++)T=E[X],!((L=-m[F+T])<=0)&&(m[F+T]=L,cr=m[B+T]+Dr-L,cr=Math.min(cr,d-Y-L),m[_+cr]!==-1&&(I[m[_+cr]]=T),m[w+T]=m[_+cr],I[T]=-1,m[_+cr]=T,q=Math.min(q,cr),m[B+T]=cr,E[lr++]=T);m[F+W]=mr,(m[b+W]=lr-Ar)===0&&(y[W]=-1,m[O+W]=0),pr!==0&&(C=lr)}for(T=0;T<d;T++)y[T]=de(y[T]);for(Z=0;Z<=d;Z++)m[_+Z]=-1;for(Z=d;Z>=0;Z--)m[F+Z]>0||(m[w+Z]=m[_+y[Z]],m[_+y[Z]]=Z);for(V=d;V>=0;V--)m[F+V]<=0||y[V]!==-1&&(m[w+V]=m[_+y[V]],m[_+y[V]]=V);for(W=0,T=0;T<=d;T++)y[T]===-1&&(W=pa(T,W,m,_,w,A,O));return A.splice(A.length-1,1),A};function n(c,o,a,f,h){var d=i(o);if(c===1&&f===a)return e(o,d);if(c===2){for(var p=d._index,g=d._ptr,D=0,E=0;E<a;E++){var y=g[E];if(g[E]=D,!(g[E+1]-y>h))for(var C=g[E+1];y<C;y++)p[D++]=p[y]}return g[a]=D,o=i(d),t(d,o)}return t(d,o)}function u(c,o,a,f,h,d,p,g,D,E,y,C){for(var A=0;A<c;A++)a[f+A]=o[A+1]-o[A];a[f+c]=0;for(var m=0;m<=c;m++)a[h+m]=-1,d[m]=-1,a[p+m]=-1,a[g+m]=-1,a[D+m]=1,a[E+m]=1,a[y+m]=0,a[C+m]=a[f+m];var b=v(0,0,a,E,c);return a[y+c]=-2,o[c]=-1,a[E+c]=0,b}function s(c,o,a,f,h,d,p,g,D,E,y){for(var C=0,A=0;A<c;A++){var m=a[f+A];if(m===0)a[h+A]=-2,C++,o[A]=-1,a[d+A]=0;else if(m>p)a[g+A]=0,a[h+A]=-1,C++,o[A]=de(c),a[g+c]++;else{var b=a[D+m];b!==-1&&(E[b]=A),a[y+A]=a[D+m],a[D+m]=A}}return C}function v(c,o,a,f,h){if(c<2||c+o<0){for(var d=0;d<h;d++)a[f+d]!==0&&(a[f+d]=1);c=2}return c}function l(c,o){return c!==o}});function Jc(r,e,t,i,n,u,s){var v,l,c=0,o;if(r<=e||t[i+e]<=t[n+r])return-1;t[n+r]=t[i+e];var a=t[u+r];if(t[u+r]=e,a===-1)c=1,o=r;else{for(c=2,o=a;o!==t[s+o];o=t[s+o]);for(v=a;v!==o;v=l)l=t[s+v],t[s+v]=o}return{jleaf:c,q:o}}var Gc="csCounts",Qc=["transpose"],Xc=rr(Gc,Qc,r=>{var{transpose:e}=r;return function(t,i,n,u){if(!t||!i||!n)return null;var s=t._size,v=s[0],l=s[1],c,o,a,f,h,d,p,g=4*l+(u?l+v+1:0),D=[],E=0,y=l,C=2*l,A=3*l,m=4*l,b=5*l+1;for(a=0;a<g;a++)D[a]=-1;var F=[],w=e(t),_=w._index,M=w._ptr;for(a=0;a<l;a++)for(o=n[a],F[o]=D[A+o]===-1?1:0;o!==-1&&D[A+o]===-1;o=i[o])D[A+o]=a;if(u){for(a=0;a<l;a++)D[n[a]]=a;for(c=0;c<v;c++){for(a=l,d=M[c],p=M[c+1],h=d;h<p;h++)a=Math.min(a,D[_[h]]);D[b+c]=D[m+a],D[m+a]=c}}for(c=0;c<l;c++)D[E+c]=c;for(a=0;a<l;a++){for(o=n[a],i[o]!==-1&&F[i[o]]--,f=u?D[m+a]:o;f!==-1;f=u?D[b+f]:-1)for(h=M[f];h<M[f+1];h++){c=_[h];var B=Jc(c,o,D,A,y,C,E);B.jleaf>=1&&F[o]++,B.jleaf===2&&F[B.q]--}i[o]!==-1&&(D[E+o]=i[o])}for(o=0;o<l;o++)i[o]!==-1&&(F[i[o]]+=F[o]);return F}}),Kc="csSqr",Wc=["add","multiply","transpose"],Hc=rr(Kc,Wc,r=>{var{add:e,multiply:t,transpose:i}=r,n=Yc({add:e,multiply:t,transpose:i}),u=Xc({transpose:i});return function(l,c,o){var a=c._ptr,f=c._size,h=f[1],d,p={};if(p.q=n(l,c),l&&!p.q)return null;if(o){var g=l?Pc(c,null,p.q):c;p.parent=Uc(g);var D=Rc(p.parent,h);if(p.cp=u(g,p.parent,D,1),g&&p.parent&&p.cp&&s(g,p))for(p.unz=0,d=0;d<h;d++)p.unz+=p.cp[d]}else p.unz=4*a[h]+h,p.lnz=p.unz;return p};function s(v,l){var c=v._ptr,o=v._index,a=v._size,f=a[0],h=a[1];l.pinv=[],l.leftmost=[];var d=l.parent,p=l.pinv,g=l.leftmost,D=[],E=0,y=f,C=f+h,A=f+2*h,m,b,F,w,_;for(b=0;b<h;b++)D[y+b]=-1,D[C+b]=-1,D[A+b]=0;for(m=0;m<f;m++)g[m]=-1;for(b=h-1;b>=0;b--)for(w=c[b],_=c[b+1],F=w;F<_;F++)g[o[F]]=b;for(m=f-1;m>=0;m--)p[m]=-1,b=g[m],b!==-1&&(D[A+b]++===0&&(D[C+b]=m),D[E+m]=D[y+b],D[y+b]=m);for(l.lnz=0,l.m2=f,b=0;b<h;b++)if(m=D[y+b],l.lnz++,m<0&&(m=l.m2++),p[m]=b,!(--A[b]<=0)){l.lnz+=D[A+b];var M=d[b];M!==-1&&(D[A+M]===0&&(D[C+M]=D[C+b]),D[E+D[C+b]]=D[y+M],D[y+M]=D[E+m],D[A+M]+=D[A+b])}for(m=0;m<f;m++)p[m]<0&&(p[m]=b++);return!0}});function Gt(r,e){return r[e]<0}function da(r,e){r[e]=de(r[e])}function mi(r){return r<0?de(r):r}function kc(r,e,t,i,n){var u=e._index,s=e._ptr,v=e._size,l=v[1],c,o,a,f=0;for(i[0]=r;f>=0;){r=i[f];var h=n?n[r]:r;Gt(s,r)||(da(s,r),i[l+f]=h<0?0:mi(s[h]));var d=1;for(o=i[l+f],a=h<0?0:mi(s[h+1]);o<a;o++)if(c=u[o],!Gt(s,c)){i[l+f]=o,i[++f]=c,d=0;break}d&&(f--,i[--t]=r)}return t}function jc(r,e,t,i,n){var u=r._ptr,s=r._size,v=e._index,l=e._ptr,c=s[1],o,a,f,h=c;for(a=l[t],f=l[t+1],o=a;o<f;o++){var d=v[o];Gt(u,d)||(h=kc(d,r,h,i,n))}for(o=h;o<c;o++)da(u,i[o]);return h}var rl="csSpsolve",el=["divideScalar","multiply","subtract"],tl=rr(rl,el,r=>{var{divideScalar:e,multiply:t,subtract:i}=r;return function(u,s,v,l,c,o,a){var f=u._values,h=u._index,d=u._ptr,p=u._size,g=p[1],D=s._values,E=s._index,y=s._ptr,C,A,m,b,F=jc(u,s,v,l,o);for(C=F;C<g;C++)c[l[C]]=0;for(A=y[v],m=y[v+1],C=A;C<m;C++)c[E[C]]=D[C];for(var w=F;w<g;w++){var _=l[w],M=o?o[_]:_;if(!(M<0))for(A=d[M],m=d[M+1],c[_]=e(c[_],f[a?A:m-1]),C=a?A+1:A,b=a?m:m-1;C<b;C++){var B=h[C];c[B]=i(c[B],t(f[C],c[_]))}}return F}}),nl="csLu",il=["abs","divideScalar","multiply","subtract","larger","largerEq","SparseMatrix"],al=rr(nl,il,r=>{var{abs:e,divideScalar:t,multiply:i,subtract:n,larger:u,largerEq:s,SparseMatrix:v}=r,l=tl({divideScalar:t,multiply:i,subtract:n});return function(o,a,f){if(!o)return null;var h=o._size,d=h[1],p,g=100,D=100;a&&(p=a.q,g=a.lnz||g,D=a.unz||D);var E=[],y=[],C=[],A=new v({values:E,index:y,ptr:C,size:[d,d]}),m=[],b=[],F=[],w=new v({values:m,index:b,ptr:F,size:[d,d]}),_=[],M,B,O=[],z=[];for(M=0;M<d;M++)O[M]=0,_[M]=-1,C[M+1]=0;g=0,D=0;for(var I=0;I<d;I++){C[I]=g,F[I]=D;var N=p?p[I]:I,Y=l(A,o,N,z,O,_,1),q=-1,T=-1;for(B=Y;B<d;B++)if(M=z[B],_[M]<0){var Z=e(O[M]);u(Z,T)&&(T=Z,q=M)}else b[D]=_[M],m[D++]=O[M];if(q===-1||T<=0)return null;_[N]<0&&s(e(O[N]),i(T,f))&&(q=N);var W=O[q];for(b[D]=I,m[D++]=W,_[q]=I,y[g]=q,E[g++]=1,B=Y;B<d;B++)M=z[B],_[M]<0&&(y[g]=M,E[g++]=t(O[M],W)),O[M]=0}for(C[d]=g,F[d]=D,B=0;B<g;B++)y[B]=_[y[B]];return E.splice(g,E.length-g),y.splice(g,y.length-g),m.splice(D,m.length-D),b.splice(D,b.length-D),{L:A,U:w,pinv:_}}}),Di="slu",ul=["typed","abs","add","multiply","transpose","divideScalar","subtract","larger","largerEq","SparseMatrix"],ol=rr(Di,ul,r=>{var{typed:e,abs:t,add:i,multiply:n,transpose:u,divideScalar:s,subtract:v,larger:l,largerEq:c,SparseMatrix:o}=r,a=Hc({add:i,multiply:n,transpose:u}),f=al({abs:t,divideScalar:s,multiply:n,subtract:v,larger:l,largerEq:c,SparseMatrix:o});return e(Di,{"SparseMatrix, number, number":function(d,p,g){if(!xr(p)||p<0||p>3)throw new Error("Symbolic Ordering and Analysis order must be an integer number in the interval [0, 3]");if(g<0||g>1)throw new Error("Partial pivoting threshold must be a number from 0 to 1");var D=a(p,d,!1),E=f(d,D,g);return{L:E.L,U:E.U,p:E.pinv,q:D.q,toString:function(){return"L: "+this.L.toString()+`
U: `+this.U.toString()+`
p: `+this.p.toString()+(this.q?`
q: `+this.q.toString():"")+`
`}}}})});function gi(r,e){var t,i=e.length,n=[];if(r)for(t=0;t<i;t++)n[r[t]]=e[t];else for(t=0;t<i;t++)n[t]=e[t];return n}var yi="lusolve",sl=["typed","matrix","lup","slu","usolve","lsolve","DenseMatrix"],fl=rr(yi,sl,r=>{var{typed:e,matrix:t,lup:i,slu:n,usolve:u,lsolve:s,DenseMatrix:v}=r,l=Nt({DenseMatrix:v});return e(yi,{"Array, Array | Matrix":function(f,h){f=t(f);var d=i(f),p=o(d.L,d.U,d.p,null,h);return p.valueOf()},"DenseMatrix, Array | Matrix":function(f,h){var d=i(f);return o(d.L,d.U,d.p,null,h)},"SparseMatrix, Array | Matrix":function(f,h){var d=i(f);return o(d.L,d.U,d.p,null,h)},"SparseMatrix, Array | Matrix, number, number":function(f,h,d,p){var g=n(f,d,p);return o(g.L,g.U,g.p,g.q,h)},"Object, Array | Matrix":function(f,h){return o(f.L,f.U,f.p,f.q,h)}});function c(a){if(Sr(a))return a;if(_r(a))return t(a);throw new TypeError("Invalid Matrix LU decomposition")}function o(a,f,h,d,p){a=c(a),f=c(f),h&&(p=l(a,p,!0),p._data=gi(h,p._data));var g=s(a,p),D=u(f,g);return d&&(D._data=gi(d,D._data)),D}}),wi="det",cl=["typed","matrix","subtractScalar","multiply","divideScalar","isZero","unaryMinus"],ll=rr(wi,cl,r=>{var{typed:e,matrix:t,subtractScalar:i,multiply:n,divideScalar:u,isZero:s,unaryMinus:v}=r;return e(wi,{any:function(o){return Er(o)},"Array | Matrix":function(o){var a;switch(Sr(o)?a=o.size():Array.isArray(o)?(o=t(o),a=o.size()):a=[],a.length){case 0:return Er(o);case 1:if(a[0]===1)return Er(o.valueOf()[0]);if(a[0]===0)return 1;throw new RangeError("Matrix must be square (size: "+Or(a)+")");case 2:{var f=a[0],h=a[1];if(f===h)return l(o.clone().valueOf(),f);if(h===0)return 1;throw new RangeError("Matrix must be square (size: "+Or(a)+")")}default:throw new RangeError("Matrix must be two dimensional (size: "+Or(a)+")")}}});function l(c,o,a){if(o===1)return Er(c[0][0]);if(o===2)return i(n(c[0][0],c[1][1]),n(c[1][0],c[0][1]));for(var f=!1,h=new Array(o).fill(0).map((b,F)=>F),d=0;d<o;d++){var p=h[d];if(s(c[p][d])){var g=void 0;for(g=d+1;g<o;g++)if(!s(c[h[g]][d])){p=h[g],h[g]=h[d],h[d]=p,f=!f;break}if(g===o)return c[p][d]}for(var D=c[p][d],E=d===0?1:c[h[d-1]][d-1],y=d+1;y<o;y++)for(var C=h[y],A=d+1;A<o;A++)c[C][A]=u(i(n(c[C][A],D),n(c[C][d],c[p][A])),E)}var m=c[h[o-1]][o-1];return f?v(m):m}}),Ai="inv",vl=["typed","matrix","divideScalar","addScalar","multiply","unaryMinus","det","identity","abs"],hl=rr(Ai,vl,r=>{var{typed:e,matrix:t,divideScalar:i,addScalar:n,multiply:u,unaryMinus:s,det:v,identity:l,abs:c}=r;return e(Ai,{"Array | Matrix":function(f){var h=Sr(f)?f.size():Mr(f);switch(h.length){case 1:if(h[0]===1)return Sr(f)?t([i(1,f.valueOf()[0])]):[i(1,f[0])];throw new RangeError("Matrix must be square (size: "+Or(h)+")");case 2:{var d=h[0],p=h[1];if(d===p)return Sr(f)?t(o(f.valueOf(),d,p),f.storage()):o(f,d,p);throw new RangeError("Matrix must be square (size: "+Or(h)+")")}default:throw new RangeError("Matrix must be two dimensional (size: "+Or(h)+")")}},any:function(f){return i(1,f)}});function o(a,f,h){var d,p,g,D,E;if(f===1){if(D=a[0][0],D===0)throw Error("Cannot calculate inverse, determinant is zero");return[[i(1,D)]]}else if(f===2){var y=v(a);if(y===0)throw Error("Cannot calculate inverse, determinant is zero");return[[i(a[1][1],y),i(s(a[0][1]),y)],[i(s(a[1][0]),y),i(a[0][0],y)]]}else{var C=a.concat();for(d=0;d<f;d++)C[d]=C[d].concat();for(var A=l(f).valueOf(),m=0;m<h;m++){var b=c(C[m][m]),F=m;for(d=m+1;d<f;)c(C[d][m])>b&&(b=c(C[d][m]),F=d),d++;if(b===0)throw Error("Cannot calculate inverse, determinant is zero");d=F,d!==m&&(E=C[m],C[m]=C[d],C[d]=E,E=A[m],A[m]=A[d],A[d]=E);var w=C[m],_=A[m];for(d=0;d<f;d++){var M=C[d],B=A[d];if(d!==m){if(M[m]!==0){for(g=i(s(M[m]),w[m]),p=m;p<h;p++)M[p]=n(M[p],u(g,w[p]));for(p=0;p<h;p++)B[p]=n(B[p],u(g,_[p]))}}else{for(g=w[m],p=m;p<h;p++)M[p]=i(M[p],g);for(p=0;p<h;p++)B[p]=i(B[p],g)}}}return A}}});function pl(r){var{addScalar:e,subtract:t,flatten:i,multiply:n,multiplyScalar:u,divideScalar:s,sqrt:v,abs:l,bignumber:c,diag:o,size:a,reshape:f,inv:h,qr:d,usolve:p,usolveAll:g,equal:D,complex:E,larger:y,smaller:C,matrixFromColumns:A,dot:m}=r;function b(R,U,V,nr){var k=arguments.length>4&&arguments[4]!==void 0?arguments[4]:!0,L=F(R,U,V,nr,k);w(R,U,V,nr,k,L);var{values:X,C:K}=_(R,U,V,nr,k);if(k){var G=M(R,U,K,L,X,V,nr);return{values:X,eigenvectors:G}}return{values:X}}function F(R,U,V,nr,k){var L=nr==="BigNumber",X=nr==="Complex",K=L?c(0):0,G=L?c(1):X?E(1):1,ur=L?c(1):1,j=L?c(10):2,or=u(j,j),cr;k&&(cr=Array(U).fill(G));for(var pr=!1;!pr;){pr=!0;for(var mr=0;mr<U;mr++){for(var Dr=K,lr=K,Ar=0;Ar<U;Ar++)mr!==Ar&&(Dr=e(Dr,l(R[Ar][mr])),lr=e(lr,l(R[mr][Ar])));if(!D(Dr,0)&&!D(lr,0)){for(var yr=ur,Fr=Dr,Pr=s(lr,j),S=u(lr,j);C(Fr,Pr);)Fr=u(Fr,or),yr=u(yr,j);for(;y(Fr,S);)Fr=s(Fr,or),yr=s(yr,j);var x=C(s(e(Fr,lr),yr),u(e(Dr,lr),.95));if(x){pr=!1;for(var $=s(1,yr),P=0;P<U;P++)mr!==P&&(R[mr][P]=u(R[mr][P],$),R[P][mr]=u(R[P][mr],yr));k&&(cr[mr]=u(cr[mr],$))}}}}return k?o(cr):null}function w(R,U,V,nr,k,L){var X=nr==="BigNumber",K=nr==="Complex",G=X?c(0):K?E(0):0;X&&(V=c(V));for(var ur=0;ur<U-2;ur++){for(var j=0,or=G,cr=ur+1;cr<U;cr++){var pr=R[cr][ur];C(l(or),l(pr))&&(or=pr,j=cr)}if(!C(l(or),V)){if(j!==ur+1){var mr=R[j];R[j]=R[ur+1],R[ur+1]=mr;for(var Dr=0;Dr<U;Dr++){var lr=R[Dr][j];R[Dr][j]=R[Dr][ur+1],R[Dr][ur+1]=lr}if(k){var Ar=L[j];L[j]=L[ur+1],L[ur+1]=Ar}}for(var yr=ur+2;yr<U;yr++){var Fr=s(R[yr][ur],or);if(Fr!==0){for(var Pr=0;Pr<U;Pr++)R[yr][Pr]=t(R[yr][Pr],u(Fr,R[ur+1][Pr]));for(var S=0;S<U;S++)R[S][ur+1]=e(R[S][ur+1],u(Fr,R[S][yr]));if(k)for(var x=0;x<U;x++)L[yr][x]=t(L[yr][x],u(Fr,L[ur+1][x]))}}}}return L}function _(R,U,V,nr,k){var L=nr==="BigNumber",X=nr==="Complex",K=L?c(1):X?E(1):1;L&&(V=c(V));for(var G=Er(R),ur=[],j=U,or=[],cr=k?o(Array(U).fill(K)):void 0,pr=k?o(Array(j).fill(K)):void 0,mr=0;mr<=100;){mr+=1;for(var Dr=G[j-1][j-1],lr=0;lr<j;lr++)G[lr][lr]=t(G[lr][lr],Dr);var{Q:Ar,R:yr}=d(G);G=n(yr,Ar);for(var Fr=0;Fr<j;Fr++)G[Fr][Fr]=e(G[Fr][Fr],Dr);if(k&&(pr=n(pr,Ar)),j===1||C(l(G[j-1][j-2]),V)){mr=0,ur.push(G[j-1][j-1]),k&&(or.unshift([[1]]),z(pr,U),cr=n(cr,pr),j>1&&(pr=o(Array(j-1).fill(K)))),j-=1,G.pop();for(var Pr=0;Pr<j;Pr++)G[Pr].pop()}else if(j===2||C(l(G[j-2][j-3]),V)){mr=0;var S=B(G[j-2][j-2],G[j-2][j-1],G[j-1][j-2],G[j-1][j-1]);ur.push(...S),k&&(or.unshift(O(G[j-2][j-2],G[j-2][j-1],G[j-1][j-2],G[j-1][j-1],S[0],S[1],V,nr)),z(pr,U),cr=n(cr,pr),j>2&&(pr=o(Array(j-2).fill(K)))),j-=2,G.pop(),G.pop();for(var x=0;x<j;x++)G[x].pop(),G[x].pop()}if(j===0)break}if(ur.sort((Q,J)=>+t(l(Q),l(J))),mr>100){var $=Error("The eigenvalues failed to converge. Only found these eigenvalues: "+ur.join(", "));throw $.values=ur,$.vectors=[],$}var P=k?n(cr,I(or,U)):void 0;return{values:ur,C:P}}function M(R,U,V,nr,k,L,X){var K=h(V),G=n(K,R,V),ur=X==="BigNumber",j=X==="Complex",or=ur?c(0):j?E(0):0,cr=ur?c(1):j?E(1):1,pr=[],mr=[];for(var Dr of k){var lr=N(pr,Dr,D);lr===-1?(pr.push(Dr),mr.push(1)):mr[lr]+=1}for(var Ar=[],yr=pr.length,Fr=Array(U).fill(or),Pr=o(Array(U).fill(cr)),S=function(){var P=pr[x],Q=t(G,n(P,Pr)),J=g(Q,Fr);for(J.shift();J.length<mr[x];){var ar=Y(Q,U,J,L,X);if(ar===null)break;J.push(ar)}var tr=n(h(nr),V);J=J.map(ir=>n(tr,ir)),Ar.push(...J.map(ir=>({value:P,vector:i(ir)})))},x=0;x<yr;x++)S();return Ar}function B(R,U,V,nr){var k=e(R,nr),L=t(u(R,nr),u(U,V)),X=u(k,.5),K=u(v(t(u(k,k),u(4,L))),.5);return[e(X,K),t(X,K)]}function O(R,U,V,nr,k,L,X,K){var G=K==="BigNumber",ur=K==="Complex",j=G?c(0):ur?E(0):0,or=G?c(1):ur?E(1):1;if(C(l(V),X))return[[or,j],[j,or]];if(y(l(t(k,L)),X))return[[t(k,nr),t(L,nr)],[V,V]];var cr=t(R,k),pr=t(nr,k);return C(l(U),X)&&C(l(pr),X)?[[cr,or],[V,j]]:[[U,j],[pr,or]]}function z(R,U){for(var V=0;V<R.length;V++)R[V].push(...Array(U-R[V].length).fill(0));for(var nr=R.length;nr<U;nr++)R.push(Array(U).fill(0)),R[nr][nr]=1;return R}function I(R,U){for(var V=[],nr=0;nr<U;nr++)V[nr]=Array(U).fill(0);var k=0;for(var L of R){for(var X=L.length,K=0;K<X;K++)for(var G=0;G<X;G++)V[k+K][k+G]=L[K][G];k+=X}return V}function N(R,U,V){for(var nr=0;nr<R.length;nr++)if(V(R[nr],U))return nr;return-1}function Y(R,U,V,nr,k){for(var L=k==="BigNumber"?c(1e3):1e3,X,K=0;K<5;++K){X=q(U,V,k);try{X=p(R,X)}catch{continue}if(y(Z(X),L))break}if(K>=5)return null;for(K=0;;){var G=p(R,X);if(C(Z(T(X,[G])),nr))break;if(++K>=10)return null;X=W(G)}return X}function q(R,U,V){var nr=V==="BigNumber",k=V==="Complex",L=Array(R).fill(0).map(X=>2*Math.random()-1);return nr&&(L=L.map(X=>c(X))),k&&(L=L.map(X=>E(X))),L=T(L,U),W(L,V)}function T(R,U){var V=a(R);for(var nr of U)nr=f(nr,V),R=t(R,n(s(m(nr,R),m(nr,nr)),nr));return R}function Z(R){return l(v(m(R,R)))}function W(R,U){var V=U==="BigNumber",nr=U==="Complex",k=V?c(1):nr?E(1):1;return n(s(k,Z(R)),R)}return b}function dl(r){var{config:e,addScalar:t,subtract:i,abs:n,atan:u,cos:s,sin:v,multiplyScalar:l,inv:c,bignumber:o,multiply:a,add:f}=r;function h(w,_){var M=arguments.length>2&&arguments[2]!==void 0?arguments[2]:e.relTol,B=arguments.length>3?arguments[3]:void 0,O=arguments.length>4?arguments[4]:void 0;if(B==="number")return d(w,M,O);if(B==="BigNumber")return p(w,M,O);throw TypeError("Unsupported data type: "+B)}function d(w,_,M){var B=w.length,O=Math.abs(_/B),z,I;if(M){I=new Array(B);for(var N=0;N<B;N++)I[N]=Array(B).fill(0),I[N][N]=1}for(var Y=m(w);Math.abs(Y[1])>=Math.abs(O);){var q=Y[0][0],T=Y[0][1];z=g(w[q][q],w[T][T],w[q][T]),w=A(w,z,q,T),M&&(I=E(I,z,q,T)),Y=m(w)}for(var Z=Array(B).fill(0),W=0;W<B;W++)Z[W]=w[W][W];return F(Er(Z),I,M)}function p(w,_,M){var B=w.length,O=n(_/B),z,I;if(M){I=new Array(B);for(var N=0;N<B;N++)I[N]=Array(B).fill(0),I[N][N]=1}for(var Y=b(w);n(Y[1])>=n(O);){var q=Y[0][0],T=Y[0][1];z=D(w[q][q],w[T][T],w[q][T]),w=C(w,z,q,T),M&&(I=y(I,z,q,T)),Y=b(w)}for(var Z=Array(B).fill(0),W=0;W<B;W++)Z[W]=w[W][W];return F(Er(Z),I,M)}function g(w,_,M){var B=_-w;return Math.abs(B)<=e.relTol?Math.PI/4:.5*Math.atan(2*M/(_-w))}function D(w,_,M){var B=i(_,w);return n(B)<=e.relTol?o(-1).acos().div(4):l(.5,u(a(2,M,c(B))))}function E(w,_,M,B){for(var O=w.length,z=Math.cos(_),I=Math.sin(_),N=Array(O).fill(0),Y=Array(O).fill(0),q=0;q<O;q++)N[q]=z*w[q][M]-I*w[q][B],Y[q]=I*w[q][M]+z*w[q][B];for(var T=0;T<O;T++)w[T][M]=N[T],w[T][B]=Y[T];return w}function y(w,_,M,B){for(var O=w.length,z=s(_),I=v(_),N=Array(O).fill(o(0)),Y=Array(O).fill(o(0)),q=0;q<O;q++)N[q]=i(l(z,w[q][M]),l(I,w[q][B])),Y[q]=t(l(I,w[q][M]),l(z,w[q][B]));for(var T=0;T<O;T++)w[T][M]=N[T],w[T][B]=Y[T];return w}function C(w,_,M,B){for(var O=w.length,z=o(s(_)),I=o(v(_)),N=l(z,z),Y=l(I,I),q=Array(O).fill(o(0)),T=Array(O).fill(o(0)),Z=a(o(2),z,I,w[M][B]),W=t(i(l(N,w[M][M]),Z),l(Y,w[B][B])),R=f(l(Y,w[M][M]),Z,l(N,w[B][B])),U=0;U<O;U++)q[U]=i(l(z,w[M][U]),l(I,w[B][U])),T[U]=t(l(I,w[M][U]),l(z,w[B][U]));w[M][M]=W,w[B][B]=R,w[M][B]=o(0),w[B][M]=o(0);for(var V=0;V<O;V++)V!==M&&V!==B&&(w[M][V]=q[V],w[V][M]=q[V],w[B][V]=T[V],w[V][B]=T[V]);return w}function A(w,_,M,B){for(var O=w.length,z=Math.cos(_),I=Math.sin(_),N=z*z,Y=I*I,q=Array(O).fill(0),T=Array(O).fill(0),Z=N*w[M][M]-2*z*I*w[M][B]+Y*w[B][B],W=Y*w[M][M]+2*z*I*w[M][B]+N*w[B][B],R=0;R<O;R++)q[R]=z*w[M][R]-I*w[B][R],T[R]=I*w[M][R]+z*w[B][R];w[M][M]=Z,w[B][B]=W,w[M][B]=0,w[B][M]=0;for(var U=0;U<O;U++)U!==M&&U!==B&&(w[M][U]=q[U],w[U][M]=q[U],w[B][U]=T[U],w[U][B]=T[U]);return w}function m(w){for(var _=w.length,M=0,B=[0,1],O=0;O<_;O++)for(var z=O+1;z<_;z++)Math.abs(M)<Math.abs(w[O][z])&&(M=Math.abs(w[O][z]),B=[O,z]);return[B,M]}function b(w){for(var _=w.length,M=0,B=[0,1],O=0;O<_;O++)for(var z=O+1;z<_;z++)n(M)<n(w[O][z])&&(M=n(w[O][z]),B=[O,z]);return[B,M]}function F(w,_,M){var B=w.length,O=Array(B),z;if(M){z=Array(B);for(var I=0;I<B;I++)z[I]=Array(B)}for(var N=0;N<B;N++){for(var Y=0,q=w[0],T=0;T<w.length;T++)n(w[T])<n(q)&&(Y=T,q=w[Y]);if(O[N]=w.splice(Y,1)[0],M)for(var Z=0;Z<B;Z++)z[N][Z]=_[Z][Y],_[Z].splice(Y,1)}if(!M)return{values:O};var W=z.map((R,U)=>({value:O[U],vector:R}));return{values:O,eigenvectors:W}}return h}var ml="eigs",Dl=["config","typed","matrix","addScalar","equal","subtract","abs","atan","cos","sin","multiplyScalar","divideScalar","inv","bignumber","multiply","add","larger","column","flatten","number","complex","sqrt","diag","size","reshape","qr","usolve","usolveAll","im","re","smaller","matrixFromColumns","dot"],gl=rr(ml,Dl,r=>{var{config:e,typed:t,matrix:i,addScalar:n,subtract:u,equal:s,abs:v,atan:l,cos:c,sin:o,multiplyScalar:a,divideScalar:f,inv:h,bignumber:d,multiply:p,add:g,larger:D,column:E,flatten:y,number:C,complex:A,sqrt:m,diag:b,size:F,reshape:w,qr:_,usolve:M,usolveAll:B,im:O,re:z,smaller:I,matrixFromColumns:N,dot:Y}=r,q=dl({config:e,addScalar:n,subtract:u,column:E,flatten:y,equal:s,abs:v,atan:l,cos:c,sin:o,multiplyScalar:a,inv:h,bignumber:d,complex:A,multiply:p,add:g}),T=pl({config:e,addScalar:n,subtract:u,multiply:p,multiplyScalar:a,flatten:y,divideScalar:f,sqrt:m,abs:v,bignumber:d,diag:b,size:F,reshape:w,qr:_,inv:h,usolve:M,usolveAll:B,equal:s,complex:A,larger:D,smaller:I,matrixFromColumns:N,dot:Y});return t("eigs",{Array:function(L){return Z(i(L))},"Array, number|BigNumber":function(L,X){return Z(i(L),{precision:X})},"Array, Object"(k,L){return Z(i(k),L)},Matrix:function(L){return Z(L,{matricize:!0})},"Matrix, number|BigNumber":function(L,X){return Z(L,{precision:X,matricize:!0})},"Matrix, Object":function(L,X){var K={matricize:!0};return Ne(K,X),Z(L,K)}});function Z(k){var L,X=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},K="eigenvectors"in X?X.eigenvectors:!0,G=(L=X.precision)!==null&&L!==void 0?L:e.relTol,ur=W(k,G,K);return X.matricize&&(ur.values=i(ur.values),K&&(ur.eigenvectors=ur.eigenvectors.map(j=>{var{value:or,vector:cr}=j;return{value:or,vector:i(cr)}}))),K&&Object.defineProperty(ur,"vectors",{enumerable:!1,get:()=>{throw new Error("eigs(M).vectors replaced with eigs(M).eigenvectors")}}),ur}function W(k,L,X){var K=k.toArray(),G=k.size();if(G.length!==2||G[0]!==G[1])throw new RangeError("Matrix must be square (size: ".concat(Or(G),")"));var ur=G[0];if(U(K,ur,L)&&(V(K,ur),R(K,ur,L))){var j=nr(k,K,ur);return q(K,ur,L,j,X)}var or=nr(k,K,ur);return T(K,ur,L,or,X)}function R(k,L,X){for(var K=0;K<L;K++)for(var G=K;G<L;G++)if(D(d(v(u(k[K][G],k[G][K]))),X))return!1;return!0}function U(k,L,X){for(var K=0;K<L;K++)for(var G=0;G<L;G++)if(D(d(v(O(k[K][G]))),X))return!1;return!0}function V(k,L){for(var X=0;X<L;X++)for(var K=0;K<L;K++)k[X][K]=z(k[X][K])}function nr(k,L,X){var K=k.datatype();if(K==="number"||K==="BigNumber"||K==="Complex")return K;for(var G=!1,ur=!1,j=!1,or=0;or<X;or++)for(var cr=0;cr<X;cr++){var pr=L[or][cr];if(Nr(pr)||Xt(pr))G=!0;else if(Ir(pr))ur=!0;else if(Qt(pr))j=!0;else throw TypeError("Unsupported type in Matrix: "+ae(pr))}if(ur&&j&&console.warn("Complex BigNumbers not supported, this operation will lose precission."),j){for(var mr=0;mr<X;mr++)for(var Dr=0;Dr<X;Dr++)L[mr][Dr]=A(L[mr][Dr]);return"Complex"}if(ur){for(var lr=0;lr<X;lr++)for(var Ar=0;Ar<X;Ar++)L[lr][Ar]=d(L[lr][Ar]);return"BigNumber"}if(G){for(var yr=0;yr<X;yr++)for(var Fr=0;Fr<X;Fr++)L[yr][Fr]=C(L[yr][Fr]);return"number"}else throw TypeError("Matrix contains unsupported types only.")}}),Ge=Xo({config:Qr}),xt=jo({}),en=os({}),tn=cs({}),Vr=Fs({Matrix:tn}),fr=Wu({BigNumber:Ge,Complex:xt,DenseMatrix:Vr,Fraction:en}),Qe=af({typed:fr}),we=of({typed:fr}),yl=Ac({typed:fr}),nn=Qs({Complex:xt,typed:fr}),Tt=Wf({typed:fr}),wl=Fc({typed:fr}),ee=zs({config:Qr,typed:fr}),an=s0({typed:fr}),Al=c0({typed:fr}),El=kf({typed:fr}),ma=bs({typed:fr}),Fl=Ss({config:Qr,typed:fr}),Da=Ns({equalScalar:ee,typed:fr}),ve=qf({typed:fr}),un=Ls({typed:fr}),Cl=r0({typed:fr}),bl=Lf({BigNumber:Ge,Fraction:en,complex:nn,typed:fr}),_l=bc({typed:fr}),qe=$s({Matrix:tn,equalScalar:ee,typed:fr}),Fe=ff({typed:fr}),on=Ys({BigNumber:Ge,typed:fr}),sn=Yf({Complex:xt,config:Qr,typed:fr}),Xe=tf({typed:fr}),ga=Ws({Fraction:en,typed:fr}),gr=ks({DenseMatrix:Vr,Matrix:tn,SparseMatrix:qe,typed:fr}),Ml=I0({bignumber:on,fraction:ga,number:un}),Sl=y0({isInteger:ma,matrix:gr,typed:fr}),fn=A0({matrix:gr,config:Qr,typed:fr}),cn=S0({matrix:gr,typed:fr}),ya=T0({BigNumber:Ge,config:Qr,matrix:gr,typed:fr}),Ce=t0({isInteger:ma,matrix:gr,typed:fr}),Bl=N0({conj:Tt,transpose:cn,typed:fr}),Nl=u0({DenseMatrix:Vr,SparseMatrix:qe,matrix:gr,typed:fr}),he=q0({numeric:Ml,typed:fr}),wa=Q0({DenseMatrix:Vr,concat:Ce,equalScalar:ee,matrix:gr,typed:fr}),zt=v0({BigNumber:Ge,DenseMatrix:Vr,SparseMatrix:qe,config:Qr,matrix:gr,typed:fr}),xl=p0({matrix:gr,multiplyScalar:ve,typed:fr}),Aa=ac({DenseMatrix:Vr,concat:Ce,config:Qr,matrix:gr,typed:fr}),Tl=L0({DenseMatrix:Vr,divideScalar:he,equalScalar:ee,matrix:gr,multiplyScalar:ve,subtractScalar:Fe,typed:fr}),zl=rf({flatten:an,matrix:gr,size:fn,typed:fr}),Ol=qc({addScalar:we,complex:nn,conj:Tt,divideScalar:he,equal:wa,identity:zt,isZero:Da,matrix:gr,multiplyScalar:ve,sign:bl,sqrt:sn,subtractScalar:Fe,typed:fr,unaryMinus:Xe,zeros:ya}),Ke=W0({DenseMatrix:Vr,concat:Ce,config:Qr,matrix:gr,typed:fr}),We=Gf({DenseMatrix:Vr,concat:Ce,equalScalar:ee,matrix:gr,subtractScalar:Fe,typed:fr,unaryMinus:Xe}),Ea=V0({DenseMatrix:Vr,divideScalar:he,equalScalar:ee,matrix:gr,multiplyScalar:ve,subtractScalar:Fe,typed:fr}),He=Mc({DenseMatrix:Vr,SparseMatrix:qe,addScalar:we,concat:Ce,equalScalar:ee,matrix:gr,typed:fr}),Le=xc({addScalar:we,conj:Tt,multiplyScalar:ve,size:fn,typed:fr}),Il=fc({DenseMatrix:Vr,smaller:Ke}),Fa=vc({ImmutableDenseMatrix:Il,getMatrixDataType:Al}),Pe=tc({DenseMatrix:Vr,concat:Ce,config:Qr,matrix:gr,typed:fr}),oe=Rf({addScalar:we,dot:Le,equalScalar:ee,matrix:gr,multiplyScalar:ve,typed:fr}),$l=ol({SparseMatrix:qe,abs:Qe,add:He,divideScalar:he,larger:Pe,largerEq:Aa,multiply:oe,subtract:We,transpose:cn,typed:fr}),at=F0({add:He,matrix:gr,typed:fr,zeros:ya}),ql=J0({DenseMatrix:Vr,divideScalar:he,equalScalar:ee,matrix:gr,multiplyScalar:ve,subtractScalar:Fe,typed:fr}),Pl=ll({divideScalar:he,isZero:Da,matrix:gr,multiply:oe,subtractScalar:Fe,typed:fr,unaryMinus:Xe}),Rl=dc({larger:Pe,smaller:Ke}),ut=zc({Index:Fa,typed:fr}),Ul=j0({DenseMatrix:Vr,concat:Ce,config:Qr,matrix:gr,typed:fr}),Ll=D0({bignumber:on,matrix:gr,add:He,config:Qr,isPositive:Fl,larger:Pe,largerEq:Aa,smaller:Ke,smallerEq:Ul,typed:fr}),Zl=gc({FibonacciHeap:Rl,addScalar:we,equalScalar:ee}),Vl=i0({Index:Fa,matrix:gr,range:Ll,typed:fr}),Ca=hl({abs:Qe,addScalar:we,det:Pl,divideScalar:he,identity:zt,matrix:gr,multiply:oe,typed:fr,unaryMinus:Xe}),Yl=Ic({DenseMatrix:Vr,Spa:Zl,SparseMatrix:qe,abs:Qe,addScalar:we,divideScalar:he,equalScalar:ee,larger:Pe,matrix:gr,multiplyScalar:ve,subtractScalar:Fe,typed:fr,unaryMinus:Xe}),Jl=R0({Complex:xt,config:Qr,fraction:ga,identity:zt,inv:Ca,matrix:gr,multiply:oe,number:un,typed:fr}),Gl=fl({DenseMatrix:Vr,lsolve:Tl,lup:Yl,matrix:gr,slu:$l,typed:fr,usolve:Ea}),Ql=gl({abs:Qe,add:He,addScalar:we,atan:yl,bignumber:on,column:Vl,complex:nn,config:Qr,cos:wl,diag:Nl,divideScalar:he,dot:Le,equal:wa,flatten:an,im:El,inv:Ca,larger:Pe,matrix:gr,matrixFromColumns:zl,multiply:oe,multiplyScalar:ve,number:un,qr:Ol,re:Cl,reshape:Sl,sin:_l,size:fn,smaller:Ke,sqrt:sn,subtract:We,typed:fr,usolve:Ea,usolveAll:ql}),ln=Bc({abs:Qe,add:He,conj:Tt,ctranspose:Bl,eigs:Ql,equalScalar:ee,larger:Pe,matrix:gr,multiply:oe,pow:Jl,smaller:Ke,sqrt:sn,typed:fr});function ba(r,e){const t=We(e,r),i=ln(t),n=Le(t,gr([1,0,0]))/i,u=Le(t,gr([0,1,0]))/i,s=Le(t,gr([0,0,1]))/i,v=Math.sqrt(n**2+u**2);let l=gr([[n,u,s],[-u/v,n/v,0],[-n*s/v,-u*s/v,v]]);return s===1&&(l=gr([[0,0,1],[0,1,0],[-1,0,0]])),s===-1&&(l=gr([[0,0,-1],[0,1,0],[1,0,0]])),xl(zt(4),l).toArray()}function _a(r,e,t){const i=(r==null?void 0:r.momentOfInertiaZ)??0,n=(r==null?void 0:r.momentOfInertiaY)??0,u=(e==null?void 0:e.elasticity)??0,s=(r==null?void 0:r.area)??0,v=(e==null?void 0:e.shearModulus)??0,l=(r==null?void 0:r.torsionalConstant)??0,c=t??1,o=u*s/c,a=u*i/c**3,f=u*n/c**3,h=v*l/c;return gr([[o,0,0,0,0,0,-o,0,0,0,0,0],[0,12*a,0,0,0,6*c*a,0,-12*a,0,0,0,6*c*a],[0,0,12*f,0,-6*c*f,0,0,0,-12*f,0,-6*c*f,0],[0,0,0,h,0,0,0,0,0,-h,0,0],[0,0,-6*c*f,0,4*f*c**2,0,0,0,6*c*f,0,2*f*c**2,0],[0,6*c*a,0,0,0,4*a*c**2,0,-6*c*a,0,0,0,2*a*c**2],[-o,0,0,0,0,0,o,0,0,0,0,0],[0,-12*a,0,0,0,-6*a*c,0,12*a,0,0,0,-6*a*c],[0,0,-12*f,0,6*c*f,0,0,0,12*f,0,6*c*f,0],[0,0,0,-h,0,0,0,0,0,h,0,0],[0,0,-6*c*f,0,2*f*c**2,0,0,0,6*c*f,0,4*f*c**2,0],[0,6*c*a,0,0,0,2*a*c**2,0,-6*c*a,0,0,0,4*a*c**2]]).toArray()}function Xl(r,e,t,i,n){let u=Array(n).fill(0).map(()=>Array(n).fill(0));return e.forEach((s,v)=>{const[l,c]=s,o=r[l],a=r[c],f=ln(We(a,o)),h=_a(i==null?void 0:i.get(v),t==null?void 0:t.get(v),f),d=ba(o,a),p=oe(cn(d),oe(h,d));u=Kl(u,p,l,c)}),u}function Kl(r,e,t,i){const n=6*t,u=6*i;for(let s=0;s<6;s++)for(let v=0;v<6;v++)r[n+s][n+v]+=e[s][v],r[u+s][n+v]+=e[s+6][v],r[n+s][u+v]+=e[s][v+6],r[u+s][u+v]+=e[s+6][v+6];return r}function Wl(r,e,t,i){const n=[];r==null||r.forEach((v,l)=>{v[0]&&n.push(l*6),v[1]&&n.push(l*6+1),v[2]&&n.push(l*6+2),v[3]&&n.push(l*6+3),v[4]&&n.push(l*6+4),v[5]&&n.push(l*6+5)});const u=new Set;e==null||e.forEach((v,l)=>{if(!v.momentOfInertiaY&&!v.momentOfInertiaZ){const c=t[l];u.add(c[0]),u.add(c[1])}});const s=[];return u.forEach(v=>{s.push(v*6+3),s.push(v*6+4),s.push(v*6+5)}),Array(i).fill(0).map((v,l)=>l).filter(v=>!n.includes(v)&&!s.includes(v))}function Hl(r,e){const t=Array(e).fill(0);return r==null||r.forEach((i,n)=>{t[n*6]=i[0],t[n*6+1]=i[1],t[n*6+2]=i[2],t[n*6+3]=i[3],t[n*6+4]=i[4],t[n*6+5]=i[5]}),t}function kl(r,e,t){const i=r.length*6,n=Wl(t.pointSupports,t.sections,e,i),u=Hl(t.pointLoads,i),s=Xl(r,e,t.materials,t.sections,i),v=at(u,ut(n)),l=at(s,ut(n,n)),c=Gl(l,v),o=at(Array(i).fill(0),ut(n),an(c)),a=oe(s,o);return{deformations:o,reactions:a}}function rv(r,e,t){const{deformations:i,reactions:n}=kl(r,e,t),u={nodes:new Map,elements:new Map};return r.forEach((s,v)=>{var c,o;const l=(c=t.pointSupports)==null?void 0:c.get(v);(o=u.nodes)==null||o.set(v,{deformation:[i[v*6],i[v*6+1],i[v*6+2],i[v*6+3],i[v*6+4],i[v*6+5]],...l&&{reaction:[n[v*6],n[v*6+1],n[v*6+2],n[v*6+3],n[v*6+4],n[v*6+5]]}})}),e.forEach((s,v)=>{var E,y,C,A;const l=r[s[0]],c=r[s[1]],o=ln(We(c,l)),a=at(i,ut(jl(s))),f=ba(l,c),h=oe(f,a),d=_a((E=t.sections)==null?void 0:E.get(v),(y=t.materials)==null?void 0:y.get(v),o);let p=oe(d,h);const g=(C=t.sections)==null?void 0:C.get(v),D=(g==null?void 0:g.momentOfInertiaY)&&g.momentOfInertiaZ;(A=u.elements)==null||A.set(v,{normal:[p[0],p[6]],...D&&{shearY:[p[1],p[7]],shearZ:[p[2],p[8]],torsion:[p[3],p[9]],bendingY:[p[4],p[10]],bendingZ:[p[5],p[11]]}})}),u}function jl(r){const e=[r[0]*6,r[0]*6+1,r[0]*6+2,r[0]*6+3,r[0]*6+4,r[0]*6+5],t=[r[1]*6,r[1]*6+1,r[1]*6+2,r[1]*6+3,r[1]*6+4,r[1]*6+5];return[...e,...t]}export{rv as a};
