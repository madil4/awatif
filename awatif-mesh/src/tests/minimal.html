<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Awatif Mesh - Minimal</title>
    <script type="module">
      import { viewer } from "awatif-ui";
      import van from "vanjs-core";
      import { mesh } from ".././mesh";

      const points = van.state([
        [0, 0],
        [10, 0],
        [10, 10],
        [5, 3],
      ]);
      const polygon = van.state([0, 1, 3]);

      const { nodes, elements } = mesh({ points, polygon });

      // Mimic a second call after a parameter change
      setTimeout(() => {
        polygon.val = [0, 1, 2];
      }, 1000);

      const viewerElm = viewer({
        structure: {
          nodes,
          elements,
        },
      });

      document.body.appendChild(viewerElm);
    </script>
  </head>
  <body></body>
</html>
